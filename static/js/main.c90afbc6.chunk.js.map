{"version":3,"sources":["panels/Purchase.js","panels/PurchaseEdit.js","panels/AlbumEdit.js","panels/OrdersPanel.js","panels/OrderEditPanel.js","panels/Item.js","panels/Order.js","panels/LichKab.js","panels/ImgView.js","panels/Catalog.js","panels/FilterPanel.js","panels/SortPanel.js","App.js","index.js"],"names":["osname","platform","PurchasesPanel","props","state","app","price_from","diskvalue_from","ramvalue_from","cpucount_from","virtyalize","groups_by_ids","setState","pid","LK_purchases_array","length","datain","action","vkid","fetchedUser","id","connect_to_bd","prevProps","e","onChange","target","value","purchases_array","Array","from","go","IOS","setActiveModal","map","i","activePanel","new_pid_name","name","React","Component","PurchaseEdit","orders_array","albums_array","items_array","main_array","del_puschase","bind","get_purchase_info","modalBack","modalHistory","this","set_catalog_search_default","activeStory","self","data","FormData","append","JSON","stringify","fetch","method","body","then","response","status","json","success","org_included","org_sbor","save_descr_pid","descr","PE_new_albums_array","purchases","popout","title","autoclose","closePopout","errors","AE_main_array","AE_album_url","onClick","activeTabPE","selected","display","item","photo_url_catalog","openitempanelCatalog","vkphotoid","album","LK_edit_album_id","GoBackPanel","url","order","OEP_orderid","fio","phone","adress","all_items","items_in_catalog","slice","AlbumEdit","categories_array","activeTabAE","aplly_changes","load_items","del_items_from_db","del_album","get_album_settings","albumid","album_name","AE_album_name","ps_strrow_name","AE_ps_strrow_name","ps_default_name","AE_ps_default_name","ps_strrow_price","AE_ps_strrow_price","ps_default_price","AE_ps_default_price","ps_set_default_name","AE_ps_set_default_name","categories_selected_to_album","AE_categories_selected_to_album","album_settings","handleInputChange","OrdersPanel","console","log","OP_orders_list","left","data-to","photo","before","src","size","className","orginfo","activeTabOE","propshandleInputChange","SaveChange","CancelOrder","UpdateInfo","orderid","OEP_cancel_order","orderinfo","OEP_get_order_info_client_orderinfo","event","type","checked","ORDER_amount","ORDER_saleprice","ORDER_itemcount","checkphone","checkFIO","saleprice","count","amount","currency","OEP_get_order_info_client_item","org_photo_200","OrderEditPanel","getElementById","document","copyText","execCommand","item_array","iteminfo","orgingo_array","zakupkainfo_array","zakupkainfo","active_img","big_active_img","big_photo_url_catalog","activeTab2","a","owner_id2","whiteSpace","err","matches","phoneid","fetchedUserFIO","match","allowofertahidden","preventDefault","phonein","phone_sav","replace","output","curstr","activeitemid","LkPanel","search_str","catalog_items_array_out","toLowerCase","item_index_url","item_index_urlm","item_index","indexOf","catalog_items_array_save","connect_to_ajax","filters_array_global","CP_count","search_string","Number","CP_count_step","catalog_items_array","Imgview","orgs_selected","orgs_array_save","categories_array_save","categories_selected","array_items_out","count_selected_orgs","girl_selected","sex_selected","categories_sex_save","female_selected","sex","array_items_categories_out","count_selected_cats","categories","orgs_array","orgs","activeFilter","filter","ii","orgs_array_list","victorina","victorinacode","victorinadesc","answer_hash","need_check","cnt_check","iconsarr","iconsnamearr","iconscodearr","closePopoutNewQ","fioin","items_finished","purchases_list","dataout","client_orders_list","LK_order_list","orgs_orders_list","LK_org_order_list","mess_to_display","backstory","new_album","back_page_after_err","activeModal","activeTabLichKab","added_new_one","useringroupcnt","connect","useringroup","top_list","top","self_top","currentTarget","dataset","window","addEventListener","menu","history","pushState","panel","schemeAttribute","createAttribute","scheme","attributes","setNamedItem","detail","fetchedUserName","first_name","last_name","fetchedUserPhoto","hot_items_array","hot_items","onStoryChange","hot_items_array2"],"mappings":"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","file":"static/js/main.c90afbc6.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport connect from '@vkontakte/vk-connect';\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\n//import { Select, Div, FormLayout, FormLayoutGroup, Button, Input, Textarea  } from '@vkontakte/vkui';\r\nconst MODAL_PAGE_ADD_PURCHASE = 'add_purchase';\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass PurchasesPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r        \t//LK_purchases_array: this.props.app.state.LK_purchases_array,\r\n            price_from: 0,\r\n            diskvalue_from: 0,\r\n            ramvalue_from: 0,\r\n            cpucount_from: 0,\r\n            virtyalize : \"Неважно\",\r\n        };\r\n        this.groups_by_ids = [];\r\n\r\n    }\r\n\r\n  componentDidMount()\r\n  {\r\t  this.props.app.setState({pid:0})\r\n\t  if (this.props.app.state.LK_purchases_array.length===0)\r\n\t  {\r\n\t\t  var datain = {\r\n\t\t\t    action: \"get_user_info_list\",\r\n\t\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\r\n\t\t  };\r\n\t  \t  this.props.app.connect_to_bd(datain);\r\n  \t  }\r  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r  \tconst purchases_array = Array.from(this.props.app.state.LK_purchases_array);\r\n    return (\r\n    <Panel id={this.props.id}>\r\n    \t<PanelHeader\r\n\t\t\tleft={<HeaderButton  onClick={this.props.go} data-to=\"main\" >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t\t\t</HeaderButton>}\r\n          >\r\n\r\n    \tЗакупки</PanelHeader>\r\n\r\n\t    <Group title=\"Управление\">\r\n\t      <CellButton before={<Icon24Add />}\r\n\t      \t//onClick={ (e) => this.setActiveModal(MODAL_CARD_ABOUT) }\r\n\t      \tonClick={(e) =>  this.props.app.setActiveModal(MODAL_PAGE_ADD_PURCHASE)}\r\n\t      >\r\n\t      \tДобавить закупку\r\n\t      </CellButton>\r\n\t    </Group>\r\n\r\n\t    <Group title=\"Список закупок\">\r\n          <List>\r\n\t      {purchases_array.length > 0 &&\r\n\t      //onClick={(e) => this.props.app.setState({ activePanel: \"PurchasesPanel\", fetchedUser:this.props.app.state.fetchedUser})} data-to=\"PurchasesPanel\"\r\n\t\t\t//purchases_array.map((value, i) => {return ( <CellButton key={i} onClick={(e) => this.props.app.openPurchasePanel(value.pid)}>{value.name}</CellButton> ) } )\r\n\r\n\t\t\tpurchases_array.map((value, i) => {return (\r\n\t\t\t\t<Cell\r\n\t\t\t\t\tasideContent={<Link onClick={(e) => this.props.app.setState({ activePanel: \"PurchaseEdit\", fetchedUser:this.props.app.state.fetchedUser, pid:value.pid, new_pid_name:value.name})}>Управление</Link>}\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\tonClick={(e) => this.props.app.setState({ activePanel: \"PurchaseEdit\", fetchedUser:this.props.app.state.fetchedUser, pid:value.pid, new_pid_name:value.name})}\r\n\t\t\t\t\t>{value.name}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</Cell> ) } )\r\n\r\n\r\n          }\r\n          </List>\r\n          <List>\r\n          {//console.log(\"purchases_array\",this.state.purchases_array)\r\n          }\r\n\r\n          </List>\r\n\t    </Group>\r\n\t</Panel>\r\n    );\r\n  }\r\n}\r\nexport default PurchasesPanel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport connect from '@vkontakte/vk-connect';\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  ModalPageHeader, Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\nimport { IS_PLATFORM_ANDROID, IS_PLATFORM_IOS } from '@vkontakte/vkui/dist/lib/platform';\r\n\r\nimport Icon24Reorder from '@vkontakte/icons/dist/24/reorder';\r\nimport Icon24Article from '@vkontakte/icons/dist/24/article';\r\nimport Icon24Coins from '@vkontakte/icons/dist/24/coins';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\r\n//import { Select, Div, FormLayout, FormLayoutGroup, Button, Input, Textarea  } from '@vkontakte/vkui';\r\nconst MODAL_PAGE_ADD_PURCHASE_FROM_EDIT = 'add_purchase_from_edit';\r\nconst MODAL_PAGE_ADD_PURCHASE = 'add_purchase';\r\nconst MODAL_PAGE_ADD_ALBUM = 'add_album_to_purchase';\r\nconst MODAL_PAGE_ADD_ORDER = 'add_order';\r\nconst MODAL_PAGE_EDIT_ORG_SBOR = 'edit_org_sbor';\r\nconst MODAL_CARD_ERRS = 'errors_modal_card';\r\nconst MODAL_PAGE_EDIT_DESCR_PID = 'edit_descr_pid';\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass PurchaseEdit extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n        \tpurchases_array: [],\r\n        \t//activeTabPE: 'pid_orders',\r\n        \torders_array: [],\r\n            new_pid_name: '',\r\n            albums_array: [],\r\n            items_array: [],\r\n            main_array:[],\r\n\r\n        };\r\n        this.del_puschase = this.del_puschase.bind(this);\r\n        this.state.pid = this.props.app.state.pid;\r\n        //this.state.new_pid_name = this.props.app.state.new_pid_name;\r\n        this.get_purchase_info = this.get_purchase_info.bind(this);\r\n\t    this.modalBack = () => {\r\n\t      this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n\t    };\r\n    }\r\n\r\n    del_puschase()\r\n    {\r      \tvar datain = {\r\n\t\t    action: \"del_puschase\",\r\n\t\t    pid: this.props.app.state.pid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\t};\r\n\t\tthis.props.app.connect_to_bd(datain);\r\n\t\tthis.props.app.set_catalog_search_default();\r\n\r\n\t\tthis.props.app.setState({ LK_purchases_array: []  });\r\n\t\tthis.props.app.setState({pid:''});\r\n\t\t//this.props.app.setState({pid:''});\r\n\t\tthis.props.app.setState({new_pid_name:''});\r\n\t\tthis.props.app.setState({ activePanel: 'PurchasesPanel', activeStory: 'LkPanel' });\r\n\r\r    }\r\n\r\n  get_purchase_info()\r\n  {\r\t\t//Проверка на подписку в группу++\r\n\t\tconst self = this;\r\n\r\n\r\n\t\tvar datain = {\r\n\t\t    action: \"get_purchase_info\",\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t    pid: this.props.app.state.pid,\r\n\t\t};\r\n\t\t//console.log(\"debug datain\",datain);\r\n\r\n\t\tvar data = new FormData();\r\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\r\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t    method: 'POST',\r\n\t\t\t    body: data\r\n\t\t\t  })\r\n\t\t  .then(\r\n\t\t    function(response) {\r\n\t\t      if (response.status !== 200) {\r\n\t\t        //console.log('response N: ', response);\r\n\t\t        return;\r\n\t\t      }\r\n\t\t      response.json().then(function(data) {\r\n\t\t\t\tif (data.success==\"Y\")\r\n\t\t\t\t{\r\n\r\n\r\n\t\t\t\t\t//self.setState({ items_array: data.items })\r\n\t\t\t\t\tself.setState({ albums_array: data.albums_array })\r\n\t\t\t\t\tself.props.app.setState({ org_included: (data.org_included>0 ? true : false) })\r\n\t\t\t\t\tself.props.app.setState({ org_sbor: data.org_sbor })\r\n\t\t\t\t\tself.props.app.setState({ save_descr_pid: data.descr })\r\n\t\t\t\t\tself.setState({ orders_array: data.orders_array })\r\n\t\t\t\t\tself.setState({main_array: data});\r\n\t\t\t\t\tself.props.app.setState({ PE_new_albums_array: data.albums_array })\r\n\t\t\t\t\tself.props.app.setState({new_pid_name:data.name});\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tself.setState({ purchases_array: data.purchases })\r\n\t\t\t\t\t//console.log(\"debug data.\",data);\r\n        \t\t\t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\r\n        \t\t\t//self.setState({ purchases_array: purchases_list  })\r\n        \t\t\t//console.log('data.purchases1: ', data);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tself.setState({ popout:\r\n\t\t\t\t\t      <Alert\r\n\t\t\t\t\t        actions={[{\r\n\t\t\t\t\t          title: 'OK',\r\n\t\t\t\t\t          autoclose: true,\r\n\t\t\t\t\t        }]}\r\n\t\t\t\t\t        onClose={self.closePopout}\r\n\t\t\t\t\t      >\r\n\t\t\t\t\t        <h2>Ошибка!</h2>\r\n\t\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t\t      </Alert>\r\n\t\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t      });\r\n\t\t    }\r\n\t\t  );\r\n\t\t//Проверка на подписку в группу--\r\n\r  }\r\n  componentDidMount()\r\n  {\r\t\tthis.props.app.setState({AE_main_array:[]});\r\n\t\tthis.props.app.setState({AE_album_url:''});\r\n\t\tthis.get_purchase_info();\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \tconst purchases_array = []; //Array.from(this.state.purchases_array);\r\n  \tconst new_albums_array = [];// Array.from(this.props.app.state.new_albums_array);\r\n  \tconst items_array = Array.from(this.state.items_array);\r\n  \t//const albums_array = Array.from(this.state.albums_array);\r\n  \tconst albums_array = Array.from(this.props.app.state.PE_new_albums_array);\r\n  \tconst orders_array = Array.from(this.state.orders_array);\r\n  \t//console.log(\"debug orders_array\",orders_array);\r\n\r\n  \t//const  albums_list = albums_array.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\r\n\r\n\r\n    return (\r\n    <Panel  id={this.props.id}>\r\n    \t<PanelHeader\r\n\t\t\tleft={<HeaderButton\r\n\t\t\t\t\t//onClick={this.props.go}\r\n\t\t\t\t\tonClick={(e) => this.props.app.setState({ activePanel: \"PurchasesPanel\", fetchedUser:this.props.app.state.fetchedUser, pid:'', new_pid_name:''})}\r\n\t\t\t\t\tdata-to=\"main\" >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t\t\t</HeaderButton>}\r\n          >\r\n\r\n    \tУправление закупкой</PanelHeader>\r\n\t\t\t    <HorizontalScroll>\r\n\r\n\t\t            <Group title=\"Управление закупкой\" >\r\n\t\t              <Tabs type=\"buttons\">\r\n\t\t                <HorizontalScroll>\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.props.app.setState({ activeTabPE: 'pid_orders' })}\r\n\t\t                    selected={this.props.app.state.activeTabPE === 'pid_orders'}\r\n\t\t                  >\r\n\t\t                    Заказы\r\n\t\t                  </TabsItem>\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.props.app.setState({ activeTabPE: 'pid_albums' })}\r\n\t\t                    selected={this.props.app.state.activeTabPE === 'pid_albums'}\r\n\t\t                  >\r\n\t\t                    Альбомы\r\n\t\t                  </TabsItem>\r\n\r\n\t\t                  <TabsItem\r\n\t\t                  \tstyle={{display:\"none\"}}\r\n\t\t                    onClick={() => this.props.app.setState({ activeTabPE: 'pid_items' })}\r\n\t\t                    selected={this.props.app.state.activeTabPE === 'pid_items'}\r\n\t\t                  >\r\n\t\t                    Товары\r\n\t\t                  </TabsItem>\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.props.app.setState({ activeTabPE: 'pid_settings' })}\r\n\t\t                    selected={this.props.app.state.activeTabPE === 'pid_settings'}\r\n\t\t                  >\r\n\t\t                    Настройки\r\n\t\t                  </TabsItem>\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.props.app.setState({ activeTabPE: 'pid_actions' })}\r\n\t\t                    selected={this.props.app.state.activeTabPE === 'pid_actions'}\r\n\t\t                  >\r\n\t\t                    Действия\r\n\t\t                  </TabsItem>\r\n\t\t                </HorizontalScroll>\r\n\t\t              </Tabs>\r\n\t\t            </Group>\r\n\t\t      </HorizontalScroll>\r\n\r\n\r\n              {this.props.app.state.activeTabPE === 'pid_items' &&\r\n\t\t\t    <Group title=\"Список товаров\">\r\n\t\t\t      <CellButton before={<Icon24Add />}\r\n\t\t\t      \t//onClick={ (e) => this.setActiveModal(MODAL_CARD_ABOUT) }\r\n\t\t\t      \tonClick={() => this.setActiveModal(MODAL_PAGE_ADD_ALBUM)}\r\n\t\t\t      >\r\n\t\t\t      \tДобавить товар\r\n\t\t\t      </CellButton>\r\n\r\n                  {//console.log(\"new_albums_array\",new_albums_array)\r\n                  }\r\n\t\t\t      {albums_array &&\r\n\t\t\t          <List>\r\n\t\t\t            {items_array.map((item) => {\r\n\t\t\t              return (\r\n\t\t\t                <CellButton\r\n\r\n\t\t\t                //onClick={(e) => this.add_album_to_purchase_save(value.id, e)}\r\n\r\n\r\n\t\t\t                before={<img src={item.photo_url_catalog}  size={80} className=\"img-fluid80\" />}\r\n\t\t\t                onClick={(e) => this.props.app.openitempanelCatalog(item.id,'LkPanel','ItemPanelFromLkPanel')}\r\n\r\n\t\t\t                >{item.name + ' '+ item.vkphotoid}</CellButton>\r\n\t\t\t              );\r\n\t\t\t            })}\r\n\t\t\t          </List>\r\n\t\t          }\r\n\t\t\t    </Group>\r\n              }\r\n\r\n              {this.props.app.state.activeTabPE === 'pid_albums' &&\r\n\t\t\t    <Group title=\"Список альбомов\">\r\n\t\t\t      <CellButton before={<Icon24Add />}\r\n\t\t\t      \t//onClick={ (e) => this.setActiveModal(MODAL_CARD_ABOUT) }\r\n\t\t\t      \tonClick={() => this.props.app.setActiveModal(MODAL_PAGE_ADD_ALBUM)}\r\n\t\t\t      >\r\n\t\t\t      \tДобавить альбом\r\n\t\t\t      </CellButton>\r\n\r\n                  {//console.log(\"new_albums_array\",new_albums_array)\r\n                  }\r\n\t\t\t      {albums_array &&\r\n\t\t\t          <List>\r\n\t\t\t            {albums_array.map((album,i) => {\r\n\t\t\t              return (\r\n\r\n\t\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\t\tasideContent={<Link onClick={ ()=> this.props.app.setState({ activePanel: 'AlbumEdit', LK_edit_album_id: album.id , GoBackPanel:this.props.id }) }>Управление</Link>}\r\n\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tonClick={ ()=> this.props.app.setState({ activePanel: 'AlbumEdit', LK_edit_album_id: album.id , GoBackPanel:this.props.id }) }\r\n\t\t\t\t\t\t\t\t>{(album.name ? album.name : album.url)}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</Cell>\r\n\r\n\t\t\t                /*\r\n\t\t\t                <CellButton\r\n\r\n\t\t\t                //onClick={(e) => this.add_album_to_purchase_save(value.id, e)}\r\n\t\t\t                onClick={ ()=> this.props.app.setState({ activePanel: 'AlbumEdit', edit_album_id: album.id , GoBackPanel:this.props.id }) }\r\n\r\n\t\t\t                >{album.url}</CellButton>\r\n\t\t\t                */\r\n\t\t\t              );\r\n\t\t\t            })}\r\n\t\t\t          </List>\r\n\t\t          }\r\n\t\t\t    </Group>\r\n              }\r\n              {this.props.app.state.activeTabPE === 'pid_orders'  &&\r\n\t\t\t    <Group title=\"Список заказов\">\r\n\t\t\t      <CellButton\r\n\t\t\t      \tstyle={{display:'none'}}\r\n\t\t\t      \tbefore={<Icon24Add />}\r\n\t\t\t      \tonClick={() => this.setActiveModal(MODAL_PAGE_ADD_ORDER)}\r\n\t\t\t      >\r\n\t\t\t      \tДобавить заказ\r\n\t\t\t      </CellButton>\r\n\r\n\t\t\t      {orders_array &&\r\n\t\t\t          <List>\r\n\t\t\t            {orders_array.map((order) => {\r\n\t\t\t              return (\r\n\t\t\t                <Cell\r\n\t\t\t\t\t\t\tphoto={order.photo_url_catalog}\r\n\t\t\t\t\t\t\tonClick={(e)=> this.props.app.setState({activePanel:\"OrderEditPanel\", OEP_orderid:order.id, GoBackPanel:\"PurchaseEdit\"})}\r\n\t\t\t\t\t\t\tbefore={<img src={order.photo_url_catalog}  size={80} className=\"img-fluid80\" />}\r\n\t\t\t\t\t\t\t//description=\"descr\"\r\n\t\t\t\t\t\t\tsize=\"l\">\r\n\r\n\r\n\t\t\t\t\t\t\t\tЗаказ №: {order.id}<br/>\r\n\t\t\t\t\t\t\t\tИмя: {order.fio}<br/>\r\n\t\t\t\t\t\t\t\tТел: {order.phone}<br/>\r\n\t\t\t\t\t\t\t\tАдрес:  {order.adress} <br/>\r\n\t\t\t\t\t\t\t\tСтатус:  {order.status} <br/>\r\n\r\n\t\t\t                </Cell>\r\n\t\t\t              );\r\n\t\t\t            })}\r\n\t\t\t          </List>\r\n\t\t          }\r\n\t\t\t    </Group>\r\n              }\r\n\r\n              {this.props.app.state.activeTabPE === 'pid_actions' &&\r\n\t\t\t   \t <div>\r\n\t              <Group title=\"Действия\">\r\n\t\t\t\t    <Div>\r\n\t\t       \t\t\t<Button  level=\"destructive\" onClick={this.del_puschase }> Удалить закупку </Button>\r\n\t\t     \t\t</Div>\r\n\r\n\t              </Group>\r\n\t              <Group title=\"Статистика по товарам\">\r\n\t\t     \t\t<Div>\r\n\r\n\t\t     \t\t\tВсего загружено: {this.state.main_array.all_items} шт.\r\n\t\t     \t\t</Div>\r\n\t\t     \t\t<Div>\r\n\t\t     \t\t\tИз них отображается в каталоге: {this.state.main_array.items_in_catalog} шт.\r\n\t\t     \t\t</Div>\r\n\t\t     \t\t<Div>\r\n\t\t     \t\t\t* - не отображаются товары у которых не определена цена\r\n\t\t     \t\t</Div>\r\n\t              </Group>\r\n\t            </div>\r\n              }\r\n              {this.props.app.state.activeTabPE === 'pid_settings' &&\r\n\t\t\t    <Group title=\"Настройки закупки\">\r\n\t\t\t      <List>\r\n\t\t\t        <Cell expandable before={<Icon24Article />}\r\n\t\t\t        title=\"Название закупки\"\r\n\t\t\t        onClick={ ()=> this.props.app.setActiveModal(MODAL_PAGE_ADD_PURCHASE)}\r\n\t\t\t        >\r\n\t\t\t\t\t\t<InfoRow title=\"Название закупки\">\r\n\t\t\t\t\t\t\t{this.props.app.state.new_pid_name}\r\n\t\t\t\t\t\t</InfoRow>\r\n\t\t\t        </Cell>\r\n\t\t\t        <Cell expandable before={<Icon24Reorder />}\r\n\r\n\t\t\t        title=\"Описание закупки\"\r\n\t\t\t        onClick={() => this.props.app.setActiveModal(MODAL_PAGE_EDIT_DESCR_PID)}\r\n\t\t\t        //onClick={this.setState({activePanel: \"Edit_Descr_PID\"})}\r\n\t\t\t        >\r\n\t\t\t\t\t\t<InfoRow title=\"Описание закупки\">\r\n\t\t\t\t\t\t\t{this.props.app.state.save_descr_pid.slice(0, 50)}\r\n\t\t\t\t\t\t</InfoRow>\r\n\t\t\t        </Cell>\r\n\t\t\t        <Cell expandable before={<Icon24Coins />}\r\n\t\t\t        title=\"Настройка орг. сбора\"\r\n\t\t\t        onClick={() => this.props.app.setActiveModal(MODAL_PAGE_EDIT_ORG_SBOR)}\r\n\r\n\t\t\t        >\r\n\t\t\t\t\t\t<InfoRow title=\"Организационный сбор\">\r\n\t\t\t\t\t\t\t{this.props.app.state.org_sbor ? this.props.app.state.org_sbor+\"% \" : \"\"}\r\n\t\t\t\t\t\t\t{this.props.app.state.org_included ? 'Орг. сбор включен в стоимость' : 'Орг. сбор не включен в стоимость'}\r\n\t\t\t\t\t\t</InfoRow>\r\n\t\t\t        </Cell>\r\n\t\t\t      </List>\r\n\t\t\t    </Group>\r\n              }\r\n\r\n\t</Panel>\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default PurchaseEdit;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass AlbumEdit extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n            categories_array: [],\r\n            activeTabAE: 'settings',\r\n            all_items: 0,\r\n            //album_settings: [],\r\n            //album_name: '',\r\n        };\r\n        this.groups_by_ids = [];\r\n        this.aplly_changes = this.aplly_changes.bind(this);\r\n        this.load_items = this.load_items.bind(this);\r\n        this.del_items_from_db = this.del_items_from_db.bind(this);\r\n        this.del_album = this.del_album.bind(this);\r\n        this.get_album_settings = this.get_album_settings.bind(this);\r\n        //this.handleInputChange = this.handleInputChange.bind(this);\r\n        //this.state = this.props.app.state;\r\n    }\r\n\r\n  del_items_from_db()\r\n  {\r      \tvar datain = {\r\n\t\t    action: \"del_items_from_db\",\r\n\t\t    albumid: this.props.app.state.LK_edit_album_id,\r\n\t\t    pid: this.props.app.state.pid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\t};\r\n\t\tthis.props.app.connect_to_bd(datain);\r\n\t\tthis.props.app.set_catalog_search_default();\r\n\t\tthis.get_album_settings();\r\n\t\tvar datain = {\r\n\t\t    action: \"get_album_settings\",\r\n\t\t    albumid: this.props.app.state.LK_edit_album_id,\r\n\t\t    pid: this.props.app.state.pid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n\t\t//this.props.app.connect_to_bd(datain);\r\n\r  }\r\n  del_album()\r\n  {\r      \tvar datain = {\r\n\t\t    action: \"del_album\",\r\n\t\t    albumid: this.props.app.state.LK_edit_album_id,\r\n\t\t    pid: this.props.app.state.pid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\t};\r\n\t\tthis.props.app.connect_to_bd(datain);\r\n\t\tthis.props.app.set_catalog_search_default();\r\n\t\tthis.props.app.setState({ activePanel: \"PurchaseEdit\"  });\r\n\t\t//this.get_album_settings();\r\n  }\r\n  load_items()\r\n  {\r      \tvar datain = {\r\n\t\t    action: \"load_items_from_album\",\r\n\t\t    albumid: this.props.app.state.LK_edit_album_id,\r\n\t\t    pid: this.props.app.state.pid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\t};\r\n\t\tthis.props.app.connect_to_bd(datain);\r\n\t\tthis.props.app.set_catalog_search_default();\r\n\r\n\r\n\r  }\r\n  aplly_changes()\r\n  {\r      \tvar datain = {\r\n\t\t    action: \"set_album_settings\",\r\n\t\t    albumid: this.props.app.state.LK_edit_album_id,\r\n\t\t    pid: this.props.app.state.pid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n            album_name: this.props.app.state.AE_album_name,\r\n            ps_strrow_name: this.props.app.state.AE_ps_strrow_name,\r\n            ps_default_name: this.props.app.state.AE_ps_default_name,\r\n            ps_strrow_price: this.props.app.state.AE_ps_strrow_price,\r\n            ps_default_price: this.props.app.state.AE_ps_default_price,\r\n            ps_set_default_name: this.props.app.state.AE_ps_set_default_name,\r\n            categories_selected_to_album: this.props.app.state.AE_categories_selected_to_album,\r\n\t\t\t};\r\n\t\tthis.props.app.connect_to_bd(datain);\r\n\t\t//this.props.app.setState({AE_album_url:''})\r\n\t\t//this.props.app.setState({ activePanel: this.props.app.state.GoBackPanel, activeStory: this.props.app.state.activeStory });\r\n\r\r\r  }\r\n  get_album_settings()\r\n  {\r\t\tconst self = this;\r\n\t\t//alert(\"1\");\r\n\t\t//this.props.app.setState({AE_main_array:[]});\r\n\t\tvar datain = {\r\n\t\t    action: \"get_album_settings\",\r\n\t\t    albumid: this.props.app.state.LK_edit_album_id,\r\n\t\t    pid: this.props.app.state.pid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n\r\n\t\tvar data = new FormData();\r\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\r\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t    method: 'POST',\r\n\t\t\t    body: data\r\n\t\t\t  })\r\n\t\t  .then(\r\n\t\t    function(response) {\r\n\t\t      if (response.status !== 200) {\r\n\t\t        //console.log('response N: ', response);\r\n\t\t        return;\r\n\t\t      }\r\n\t\t      response.json().then(function(data) {\r\n\t\t      \t//console.log('debug this.props.app.state.AE_main_array.all_items', self.props.app.state.AE_main_array.all_items);\r\n\t\t\t\tif (data.success==\"Y\")\r\n\t\t\t\t{\r\n\r\n            \t\tself.props.app.setState({ AE_album_name: data.album_settings.name })\r\n            \t\tself.props.app.setState({ AE_album_url: data.album_settings.url })\r\n\r\n            \t\tself.props.app.setState({ AE_ps_strrow_name: data.album_settings.ps_strrow_name })\r\n            \t\tself.props.app.setState({ AE_ps_default_name: data.album_settings.ps_default_name })\r\n\r\n            \t\tself.props.app.setState({ AE_ps_strrow_price: data.album_settings.ps_strrow_price })\r\n            \t\tself.props.app.setState({ AE_ps_default_price: data.album_settings.ps_default_price })\r\n            \t\tself.props.app.setState({ AE_ps_set_default_name: data.album_settings.ps_set_default_name })\r\n            \t\tself.props.app.setState({ AE_categories_selected_to_album: data.album_settings.categories_selected_to_album })\r\n\r\n            \t\tself.props.app.setState({ AE_main_array: data.album_settings })\r\n            \t\tself.setState({ all_items: data.album_settings.all_items })\r\n            \t\t//alert(data.album_settings.all_items);\r\n\r\n\r\n\r\n\r\n                    //self.setState({ album_settings: data.album_settings })\r\n\t\t\t\t\t//console.log('debug categories_array: ', data.categories);\r\n\t\t\t\t\t//console.log('item_array: 2', self.props.app.state);\r\n        \t\t\t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\r\n        \t\t\t//self.setState({ purchases_array: purchases_list  })\r\n        \t\t\t//console.log('data.purchases1: ', data);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tself.setState({ popout:\r\n\t\t\t\t\t      <Alert\r\n\t\t\t\t\t        actions={[{\r\n\t\t\t\t\t          title: 'OK',\r\n\t\t\t\t\t          autoclose: true,\r\n\t\t\t\t\t        }]}\r\n\t\t\t\t\t        onClose={self.closePopout}\r\n\t\t\t\t\t      >\r\n\t\t\t\t\t        <h2>Ошибка!</h2>\r\n\t\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t\t      </Alert>\r\n\t\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t      });\r\n\t\t    }\r\n\t\t  );\r  }\r\n  componentDidMount() {\r  //alert(this.props.app.state.LK_edit_album_id);\r\n  \tconst self = this;\r\n  \tif (this.props.app.state.AE_main_array.length===0)\r\n  \t{\r\n     \tthis.get_album_settings();\r\n\t}\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \t//const item_array = Array.from(this.state.item_array);\r\n  \t//console.log('debug all_items', this.state.all_items);\r\n  \t//console.log(\"debug this.props.app.state.AE_main_array\",this.props.app.state.AE_main_array);\r\n  \t//const  categories = this.state.categories_array.map((value, i) => {return ( <Checkbox key={i} checked={value.checked} onClick={(e) => this.select_cat(e,value.id)} >{value.name}</Checkbox> ) } )\r\n    return (\r\n\r\n\t<Panel id={this.props.id} >\r\n    \t<PanelHeader\r\n\t\t\tleft={<HeaderButton  onClick={(e)=>this.props.app.setState({ activePanel: this.props.app.state.GoBackPanel, activeStory: this.props.app.state.activeStory }) }  >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t\t\t</HeaderButton>}\r\n          >Редактирование альбома</PanelHeader>\r\n\t\t   <Group>\r\n\r\n\t\t           <HorizontalScroll>\r\n\t\t              <Tabs type=\"buttons\">\r\n\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.setState({ activeTabAE: 'settings' })}\r\n\t\t                    selected={this.state.activeTabAE === 'settings'}\r\n\t\t                  >\r\n\t\t                    Настройки\r\n\t\t                  </TabsItem>\r\n\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.setState({ activeTabAE: 'actions' })}\r\n\t\t                    selected={this.state.activeTabAE === 'actions'}\r\n\t\t                  >\r\n\t\t                    Действия\r\n\t\t                  </TabsItem>\r\n\t\t              </Tabs>\r\n                    </HorizontalScroll>\r\n\r\n\t\t   </Group>\r\n\r\n\r\n           {this.state.activeTabAE === 'settings' &&\r\n              <div>\r\n\t\t\t\t<Group title=\"Настройки загрузки товаров из альбома\">\r\n\t\t\t\t\t<Div>\r\n\t\t\t\t\t\tУкажите название альбома:\r\n\t\t\t\t\t\t<Input type=\"text\" placeholder=\"название\"\r\n\t\t\t\t\t\tname=\"AE_album_name\"\r\n\t\t\t\t\t\tvalue={this.props.app.state.AE_album_name}\r\n\t\t\t\t\t\tonChange={this.props.app.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\tАльбом <a href={this.props.app.state.AE_album_url} target=\"_blank\">{this.props.app.state.AE_album_url}</a>\r\n\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t</Group>\r\n\t\t\t\t<Group title=\"Настройка загрузки названия товара\">\r\n\r\n\t\t\t\t\t<Div>\r\n\t\t\t\t\t\tНомер строки из которой брать название товара(по умолчанию 1-ая строка в описании):\r\n\t\t\t\t\t\t<Input type=\"number\" placeholder=\"1\"\r\n\t\t\t\t\t\tname=\"AE_ps_strrow_name\"\r\n\t\t\t\t\t\tvalue={this.props.app.state.AE_ps_strrow_name}\r\n\t\t\t\t\t\tonChange={this.props.app.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t</Div>\r\n\t\t\t   \t\t<Div>\r\n\t\t\t\t\t\t\tВведите название товара по умолчанию. Если название не удалось загрузить, то будет установлено это название:\r\n\t\t\t\t\t\t\t<Input type=\"text\" placeholder=\"название товара по умолчанию\"\r\n\t\t\t\t\t\t\tname=\"AE_ps_default_name\"\r\n\t\t\t\t\t\t\tvalue={this.props.app.state.AE_ps_default_name}\r\n\t\t\t\t\t\t\tonChange={this.props.app.handleInputChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t        <Checkbox\r\n\t\t\t\t\t\t\t\tname=\"AE_ps_set_default_name\"\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tchecked={(this.props.app.state.AE_ps_set_default_name>0 ? true : false )}\r\n\t\t\t\t\t\t\t\tonChange={this.props.app.handleInputChange}\r\n\t\t\t\t\t        >\r\n\t\t\t\t\t        Проставлять всем товарам название по умолчанию\r\n\t\t\t\t\t        </Checkbox>\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t</Group>\r\n\t\t\t\t<Group title=\"Номер строки из которой брать цену товара\">\r\n\r\n\t\t\t\t\t<Div>\r\n\t\t\t\t\t\tНомер строки из которой брать цену товара:\r\n\t\t\t\t\t\t<Input type=\"number\" placeholder=\"2\"\r\n\t\t\t\t\t\tname=\"AE_ps_strrow_price\"\r\n\t\t\t\t\t\tvalue={this.props.app.state.AE_ps_strrow_price}\r\n\t\t\t\t\t\tonChange={this.props.app.handleInputChange}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t</Div>\r\n\t\t\t   \t\t<Div>\r\n\t\t\t\t\t\t\tВведите цену товара по умолчанию, если цену не удалось загрузить:\r\n\t\t\t\t\t\t\t<Input type=\"text\" placeholder=\"Цена товара по умолчанию\"\r\n\t\t\t\t\t\t\tname=\"AE_ps_default_price\"\r\n\t\t\t\t\t\t\tvalue={this.props.app.state.AE_ps_default_price}\r\n\t\t\t\t\t\t\tonChange={this.props.app.handleInputChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t* - товары с ценой 0 не отображаются в каталоге!\r\n\t\t\t\t\t</Div>\r\n\t               </Group>\r\n\t\t\t\t<Group title=\"Категория товара\">\r\n\r\n\t\t\t   \t\t<Div>\r\n\t\t\t   \t\t    {//console.log(\"debug categories_array_save_to_album\",this.props.app.state.categories_array_save_to_album)\r\n\t\t\t   \t\t    }\r\n\t\t                <SelectMimicry\r\n\t\t                  top=\"Выберите категорию товара\"\r\n\t\t                  //placeholder={this.state.placeholder_cat_filter}\r\n\t\t                  //onClick={() => this.props.app.setState({ activeFilter: 'catalog_filter' })}\r\n\t\t                  onClick={() => this.props.app.setState({ activePanel: 'FilterpanelAlbum', activeStory: \"LkPanel\" }) }\r\n\t\t                >{ (this.props.app.state.AE_categories_selected_to_album!='' ? this.props.app.state.AE_categories_selected_to_album : 'Выберите категорию товара' ) }\r\n\t\t                </SelectMimicry>\r\n\t\t\t\t\t</Div>\r\n\r\n\t\t\t\t</Group>\r\n\t\t\t    <Div>\r\n\t       \t\t\t<Button size=\"xl\" onClick={this.aplly_changes } >Применить</Button>\r\n\t     \t\t</Div>\r\n\t     \t</div>\r\n           }\r\n\t\t   {this.state.activeTabAE === 'actions' &&\r\n\t\t   \t <div>\r\n              <Group title=\"Действия\">\r\n\t\t\t    <Div>\r\n\t       \t\t\t<Button  level=\"secondary\" onClick={this.load_items }> Загрузить товары </Button>\r\n\r\n\t     \t\t</Div>\r\n\t\t\t    <Div>\r\n\t       \t\t\t<Button  level=\"secondary\" onClick={this.del_items_from_db }> Удалить товары </Button>\r\n\r\n\t     \t\t</Div>\r\n\r\n\t\t\t    <Div>\r\n\t       \t\t\t<Button  level=\"destructive\" onClick={this.del_album }> Удалить альбом </Button>\r\n\t     \t\t</Div>\r\n\r\n              </Group>\r\n              <Group title=\"Статистика по товарам\">\r\n\t     \t\t<Div>\r\n\t     \t\t\tВсего загружено: {this.props.app.state.AE_main_array.all_items} шт.\r\n\t     \t\t</Div>\r\n\t     \t\t<Div>\r\n\t     \t\t\tИз них отображается в каталоге: {this.props.app.state.AE_main_array.items_in_catalog} шт.\r\n\t     \t\t</Div>\r\n\t     \t\t<Div>\r\n\t     \t\t\t* - не отображаются товары у которых не определена цена\r\n\t     \t\t</Div>\r\n              </Group>\r\n            </div>\r\n           }\r\n\r\n\t  </Panel>\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default AlbumEdit;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass OrdersPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n\r\n        };\r\n        this.groups_by_ids = [];\r\n\r\n    }\r\n\r\n\r\n  componentDidMount() {\r\n\t\t//Проверка на подписку в группу++\r\n\t\tvar datain = {\r\n\t\t    action: \"get_org_orders\",\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n\t\tthis.props.app.connect_to_bd(datain);\r\n\r\n\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \t//const item_array = Array.from(this.state.item_array);\r\n  \tconsole.log(\"debug OP_orders_list\",this.props.app.state.OP_orders_list);\r\n    return (\r\n\r\n\t<Panel id={this.props.id} >\r\n    \t<PanelHeader\r\n\t\t\tleft={<HeaderButton  onClick={this.props.go} data-to=\"main\" >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t\t\t</HeaderButton>}\r\n          >Панель заказов</PanelHeader>\r\n          <Group>\r\n\r\n\t\t\t      {this.props.app.state.OP_orders_list &&\r\n\t\t\t          <List>\r\n\t\t\t            {this.props.app.state.OP_orders_list.map((order) => {\r\n\t\t\t              return (\r\n\t\t\t                <Cell\r\n\t\t\t\t\t\t\tphoto={order.photo_url_catalog}\r\n\t\t\t\t\t\t\tonClick={(e)=> this.props.app.setState({activePanel:\"OrderEditPanel\", OEP_orderid:order.id, GoBackPanel:\"OrdersPanel\"})}\r\n\t\t\t\t\t\t\tbefore={<img src={order.photo_url_catalog}  size={80} className=\"img-fluid80\" />}\r\n\t\t\t\t\t\t\t//description=\"descr\"\r\n\t\t\t\t\t\t\tsize=\"l\">\r\n\r\n\r\n\t\t\t\t\t\t\t\tЗаказ №: {order.id}<br/>\r\n\t\t\t\t\t\t\t\tИмя: {order.fio}<br/>\r\n\t\t\t\t\t\t\t\tТел: {order.phone}<br/>\r\n\t\t\t\t\t\t\t\tАдрес:  {order.adress} <br/>\r\n\t\t\t\t\t\t\t\tСтатус:  <b>{order.status} </b><br/>\r\n\r\n\t\t\t                </Cell>\r\n\t\t\t              );\r\n\t\t\t            })}\r\n\t\t\t          </List>\r\n\t\t          }\r\n\t\t    </Group>\r\n\r\n\r\n\r\n\t  </Panel>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default OrdersPanel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass OrderEditPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r        \torginfo:[],\r\n        \tphone: '',\r\n        \t//ORDER_clientFIO: '',\r\n        \t//ORDER_itemcount: 1,\r\n        \t//ORDER_amount: 1,\r\n        \t//ORDER_saleprice: 1,\r\n        \t//ORDER_saleprice2: 1,\r\n        \tactiveTabOE: 'ordermain'\r\n\r\n        };\r\n        this.groups_by_ids = [];\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.propshandleInputChange = this.propshandleInputChange.bind(this);\r\n        this.SaveChange = this.SaveChange.bind(this);\r\n        this.CancelOrder = this.CancelOrder.bind(this);\r\n        this.UpdateInfo = this.UpdateInfo.bind(this);\r\n\r\n    }\r\n\r\n   CancelOrder()\r\n   {\r\t\tvar datain = {\r\n\t\t    action: \"cancel_order\",\r\n\t\t    orderid: this.props.app.state.OEP_orderid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n  \t    this.props.app.connect_to_bd(datain);\r\n  \t    this.UpdateInfo();\r\n\r   }\r\n   UpdateInfo()\r\n   {\r  \t    if (this.props.app.state.OEP_cancel_order==\"success\")\r\n  \t    {\r\n\t\t\tvar datain = {\r\n\t\t\t    action: \"get_order_info_client\",\r\n\t\t\t    orderid: this.props.app.state.OEP_orderid,\r\n\t\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\t};\r\n\t  \t    this.props.app.connect_to_bd(datain);\r\n\t\t  \tvar datain = {\r\n\t\t\t    action: \"get_user_info_list\",\r\n\t\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\r\n\t\t  \t};\r\n\t  \t  \tthis.props.app.connect_to_bd(datain);\r\n\t  \t  \tthis.props.app.setState({OEP_cancel_order:\"\"});\r\n  \t  \t}\r   }\r\n   SaveChange()\r\n   {\r\r\n\t\tvar datain = {\r\n\t\t    action: \"save_order_info\",\r\n\t\t    orderinfo: this.props.app.state.OEP_get_order_info_client_orderinfo,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n  \t    this.props.app.connect_to_bd(datain);\r\n\r   }\r\n   handleInputChange(event) {\r\n\t\t//alert(target.name);\r\n\t    const target = event.target;\r\n\t    const value = target.type === 'checkbox' ? target.checked : target.value;\r\n\t    const name = target.name;\r\n\r\n\t    this.setState({\r\n\t      [name]: value\r\n\t    });\r\n\t    if ([name] == \"ORDER_itemcount\") this.setState({ ORDER_amount : value*this.state.ORDER_saleprice})\r\n\t    if ([name] == \"ORDER_saleprice\") this.setState({ ORDER_amount : this.state.ORDER_itemcount*value})\r\n\t    //console.log(\"debug new_album\", this.state.new_pid_name);\r\n\t}\r\n   propshandleInputChange(event) {\r\n\t    const target = event.target;\r\n\t    const value = target.type === 'checkbox' ? target.checked : target.value;\r\n\t    const name = target.name;\r\n\r\n\t    if (name==\"fio\" && value.length>30) return true;\r\n\t    if (name==\"adress\" && value.length>60) return true;\r\n\t    if (name==\"comment\" && value.length>1024) return true;\r\n\t    if (name==\"count\" && value>1000) return true;\r\n\t    if (name==\"saleprice\" && value>100000) return true;\r\n\t    //const phone = \"\";\r\n\t    //const self = this;\r\n        //console.log(\"debug OEP_get_order_info_client_orderinfo\",this.props.app.state.OEP_get_order_info_client_orderinfo);\r\n        //console.log(\"debug [name]\",name);\r\n        var OEP_get_order_info_client_orderinfo = (this.props.app.state.OEP_get_order_info_client_orderinfo);\r\n\r\n        if (name == \"count\") OEP_get_order_info_client_orderinfo[\"amount\"]=value*OEP_get_order_info_client_orderinfo[\"saleprice\"]; //this.props.app.setState({ ORDER_amount : value*this.state.ORDER_saleprice})\r\n        if (name == \"saleprice\") OEP_get_order_info_client_orderinfo[\"amount\"]=value*OEP_get_order_info_client_orderinfo[\"count\"];\r\n        if (name == \"phone\") OEP_get_order_info_client_orderinfo[name]=this.props.app.checkphone(value);\r\n        \telse if (name==\"fio\") OEP_get_order_info_client_orderinfo[name]=this.props.app.checkFIO(value);\r\n        \telse OEP_get_order_info_client_orderinfo[name]=value;\r\n\r\n        /*\r\n        Object.keys(OEP_get_order_info_client_orderinfo).forEach(key =>\r\n        \t{\r\n        \t\tif (key == name ) OEP_get_order_info_client_orderinfo[key]=value;\r\n\r\n        \t})\r\n        \t*/\r\n\r\n        this.props.app.setState({ OEP_get_order_info_client_orderinfo : OEP_get_order_info_client_orderinfo})\r\n\r\n\t}\r\n\r\n\r\n  componentDidMount()\r\n  {\r\n\t\tvar datain = {\r\n\t\t    action: \"get_order_info_client\",\r\n\t\t    orderid: this.props.app.state.OEP_orderid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n  \t    this.props.app.connect_to_bd(datain);\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n\r\n    /*\r\n    const orginfo1 = Object.assign({}, this.props.app.state.OEP_get_order_info_client.orginfo);\r\n    const orginfo = new Map(Object.entries(orginfo1));\r\n\r\n    const zakupkainfo1 = Object.assign({}, this.props.app.state.OEP_get_order_info_client.zakupkainfo);\r\n    const zakupkainfo = new Map(Object.entries(zakupkainfo1));\r\n\r\n    const item1 = Object.assign({}, this.props.app.state.OEP_get_order_info_client.item);\r\n    const item = new Map(Object.entries(item1));\r\n\r\n    console.log(\"debug OEP_get_order_info_client\", item);\r\n    item.map((val)=>{\r\t\tconsole.log(\"debug OEP_get_order_info_client\", val);\r    })\r\n    */\r\n\r\n    //const orginfo1 = Object.assign({}, this.props.app.state.OEP_get_order_info_client.orginfo);\r\n    //const orginfo = Object.getOwnPropertyNames(orginfo1);\r\n\r\n\t//const iteminfo = Array.from(this.props.app.state.OEP_get_order_info_client);\r\n\t//const iteminfo = Array.from(this.props.app.state.OEP_get_order_info_client);\r\n\t//const iteminfo = this.props.app.state.OEP_get_order_info_client.valueOf();\r\n\r\n\r\n//\tObject.entries(orginfo).map(([key, value]) => {\r//\t\tconsole.log(\"debug OEP_get_order_info_client_k\", key);\r\n\t//console.log(\"debug iteminfo\", iteminfo[0].find('photo_url_catalog'));\r\n\r\n//\t            })\r\n\r\n\r\n    this.UpdateInfo();\r\n    return (\r\n\r\n\t<Panel id={this.props.id} >\r\n    \t<PanelHeader\r\n\t\t\t//left={<HeaderButton  onClick={this.props.go}  >\r\n\t\t\tleft={<HeaderButton onClick={(e)=>this.props.app.setState({ activePanel: this.props.app.state.GoBackPanel, activeStory: this.props.app.state.activeStory }) }  >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t\t\t</HeaderButton>}\r\n          >Заказ</PanelHeader>\r\n       {\r\n       \t//console.log(\"debug OEP_get_order_info_client_orderinfo\",this.props.app.state.OEP_get_order_info_client_orderinfo)\r\n\r\n       \t}\r\n       \t{ (this.props.app.state.fetchedUser.id == this.props.app.state.OEP_get_order_info_client_zakupkainfo.vkid ) &&\r\n       \t <div>\r\n\t\t   <Group>\r\n\r\n\t\t           <HorizontalScroll>\r\n\t\t              <Tabs type=\"buttons\">\r\n\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.setState({ activeTabOE: 'ordermain' })}\r\n\t\t                    selected={this.state.activeTabOE === 'ordermain'}\r\n\t\t                  >\r\n\t\t                    Заказ\r\n\t\t                  </TabsItem>\r\n\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.setState({ activeTabOE: 'edit', ORDER_clientFIO:this.props.app.state.OEP_get_order_info_client_item.fio, ORDER_itemcount:this.props.app.state.OEP_get_order_info_client_item.count })}\r\n\t\t                    selected={this.state.activeTabOE === 'edit'}\r\n\t\t                  >\r\n\t\t                    Редактирование\r\n\t\t                  </TabsItem>\r\n\t\t              </Tabs>\r\n                    </HorizontalScroll>\r\n\r\n\t\t   </Group>\r\n\r\n       \t </div>\r\n       \t}\r\n       \t{this.state.activeTabOE === 'edit' &&\r\n       \t\t<div>\r\n       \t\t\t<Group title={\"Редактирование заказа № \"+this.props.app.state.OEP_get_order_info_client_item.id}>\r\n\r\n       \t\t\t</Group>\r\n\t\t\t\t<Group title=\"Статус заказа\">\r\n\t\t\t\t\t<Div>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tname=\"status\"\r\n\t\t\t\t\t\tonChange={this.propshandleInputChange}\r\n\t\t\t\t\t\tvalue={this.props.app.state.OEP_get_order_info_client_orderinfo.status}\r\n\r\n\t\t\t\t\t>\r\n\r\n\t\t\t\t\t   <option>Ожидает</option>\r\n\t\t\t\t\t   <option>Принят</option>\r\n\t\t\t\t\t   <option>Отправлен</option>\r\n\t\t\t\t\t   <option>Отменен</option>\r\n\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t\t<Group title=\"Товар\">\r\n\r\n\r\n\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\t\tphoto={this.props.app.state.OEP_get_order_info_client_item.photo_url_catalog}\r\n\t\t\t\t\t\t\t\tbefore={<img src={this.props.app.state.OEP_get_order_info_client_item.photo_url_catalog}  size={80} className=\"img-fluid80\" />}\r\n\t\t\t\t\t\t\t\t//description={\"Итого: \"+this.props.app.state.OEP_get_order_info_client_item.amount+\" \"+this.props.app.state.OEP_get_order_info_client_item.currency}\r\n\t\t\t\t\t\t\t\tsize=\"l\">\r\n\t\t\t\t\t\t\t\t<b>Название:</b>{\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.itemname}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Цена на 1шт:</b>{\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.saleprice+\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.currency}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Кол-во:</b>{\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.count}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Итого:</b>{\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.amount+\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.currency}\r\n\t\t\t\t\t\t</Cell>\r\n\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\t<div className=\"container_order_table\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t\tЦена за 1шт.:&nbsp;\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\t                            <div>\r\n\t\t\t\t\t\t\t\t\t<Input type=\"number\" placeholder=\"Цена за единицу товара\"\r\n\t\t\t\t\t\t\t\t\tname=\"saleprice\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.props.app.state.OEP_get_order_info_client_orderinfo.saleprice}\r\n\t\t\t\t\t\t\t\t\tonChange={this.propshandleInputChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t                        </Div>\r\n\t                        <Div>\r\n\t\t\t\t\t\t\t<div className=\"container_order_table\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\tКол-во:&nbsp;\r\n\t\t\t\t\t\t\t\t</div>\r\n\t                            <div>\r\n\t\t\t\t\t\t\t\t\t<Input type=\"number\" placeholder=\"Количество единиц товара\"\r\n\r\n\t\t\t\t\t\t\t\t\tname=\"count\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.props.app.state.OEP_get_order_info_client_orderinfo.count}\r\n\t\t\t\t\t\t\t\t\tonChange={this.propshandleInputChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t                        </Div>\r\n\t                        <Div>\r\n\t\t\t\t\t\t\t<div className=\"container_order_table\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\tИтого:&nbsp;\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t{this.props.app.state.OEP_get_order_info_client_orderinfo.amount}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t                        </Div>\r\n\t\t\t\t\t\t</Div>\r\n\t\t\t\t\t\t<Group title=\"Контактные данные получателя\">\r\n\t                        <Div>\r\n\t\t\t\t\t\t\t\t<div className=\"container_order_table\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\tФИО получателя:&nbsp;\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t                            <div>\r\n\t\t\t\t\t\t\t\t\t\t<Input type=\"text\" placeholder=\"ФИО\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"fio\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.app.state.OEP_get_order_info_client_orderinfo.fio}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.propshandleInputChange}\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t                        </Div>\r\n\t                        <Div>\r\n\t\t\t\t\t\t\t\t<div className=\"container_order_table\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\tКонтактный тел.:&nbsp;\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t                            <div>\r\n\t\t\t\t\t\t\t\t\t\t<Input type=\"text\" placeholder=\"Телефон\"\r\n\r\n\t\t\t\t\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.app.state.OEP_get_order_info_client_orderinfo.phone}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.propshandleInputChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t                        </Div>\r\n\t                        <Div>\r\n\t\t\t\t\t\t\t\t<div className=\"container_order_table\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\tАдрес доставки:&nbsp;\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t                            <div>\r\n\t\t\t\t\t\t\t\t\t\t<Input type=\"text\" placeholder=\"Адрес доставки\"\r\n\r\n\t\t\t\t\t\t\t\t\t\tname=\"adress\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.app.state.OEP_get_order_info_client_orderinfo.adress}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.propshandleInputChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t                        </Div>\r\n\t                        <Div>\r\n\t\t\t\t\t\t\t\t<div className=\"container_order_table\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t                            <div>\r\n\t\t                            \t<a href={\"https://vk.me/id\"+this.props.app.state.OEP_get_order_info_client_orderinfo.clvkid} target=\"_blanl\"><Button>Написать клиенту</Button></a>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t                        </Div>\r\n\t\t\t\t\t\t\t\t<Group title=\"Комментарий\">\r\n\t\t\t\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\t\t\t<Textarea top=\"Комментарий\" placeholder=\"Комментарий (будет виден клиенту)\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.props.app.state.OEP_get_order_info_client_orderinfo.comment}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.propshandleInputChange}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t {this.props.app.state.OEP_get_order_info_client_item.comment}\r\n\r\n\t\t\t\t\t\t\t\t\t</Textarea>\r\n\t\t\t\t\t\t\t\t\t</Div>\r\n\r\n\t\t\t\t\t\t\t</Group>\r\n                           </Group>\r\n\r\n\t\t\t\t\t\t</Group>\r\n\r\n\t\t\t\t    <Div>\r\n\t\t       \t\t\t<Button size=\"xl\" onClick={this.SaveChange} >Применить</Button>\r\n\t\t     \t\t</Div>\r\n\r\n\t\t\t\t</Group>\r\n\r\n       \t    </div>\r\n       \t}\r\n       \t{this.state.activeTabOE === 'ordermain' &&\r\n\r\n\t\t       <div>\r\n\r\n\t\t\t\t<Group title={\"ЗАКАЗ № \"+this.props.app.state.OEP_get_order_info_client_orderinfo.id}>\r\n\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t<Cell>\r\n\t\t\t\t\t\t\t{\"Заказ № \"+this.props.app.state.OEP_get_order_info_client_orderinfo.id+\" от \"+this.props.app.state.OEP_get_order_info_client_orderinfo.date }\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t{\"Закупка: \"+this.props.app.state.OEP_get_order_info_client_zakupkainfo.name }\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t          target=\"_blank\"\r\n\t\t\t\t\t          href={\"https://vk.com/im?media=&sel=\"+this.props.app.state.OEP_get_order_info_client_orderinfo.orgvkid}\r\n\t\t\t\t\t\t\t>{\"Организатор: \"+this.props.app.state.OEP_get_order_info_client_item.org_fio }</Link>\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t{\"Получатель: \"+this.props.app.state.OEP_get_order_info_client_orderinfo.fio }\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t{\"Контактный тел: \"+this.props.app.state.OEP_get_order_info_client_orderinfo.phone }\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t{\"Адрес доставки: \"+this.props.app.state.OEP_get_order_info_client_orderinfo.adress }\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\tСтатус заказа: <b>{this.props.app.state.OEP_get_order_info_client_orderinfo.status }</b>\r\n                            <br/>\r\n\t\t\t\t\t\t\t{this.props.app.state.OEP_get_order_info_client_orderinfo.status!=\"Отменен\" &&\r\n\t\t\t\t\t\t\t<Button level=\"destructive\" onClick={this.CancelOrder}>Отменить заказ</Button>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Cell>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t\t{this.props.app.state.OEP_get_order_info_client_orderinfo.comment &&\r\n\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t{\"Комментарий: \"} <br/>\r\n\t\t\t\t\t\t{this.props.app.state.OEP_get_order_info_client_orderinfo.comment }\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Group>\r\n\t\t\t\t<Group title=\"Товар\">\r\n\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\tphoto={this.props.app.state.OEP_get_order_info_client_item.photo_url_catalog}\r\n\t\t\t\t\t\t\tbefore={<img src={this.props.app.state.OEP_get_order_info_client_item.photo_url_catalog}  size={80} className=\"img-fluid80\" />}\r\n\t\t\t\t\t\t\t//description={\"Итого: \"+this.props.app.state.OEP_get_order_info_client_item.amount+\" \"+this.props.app.state.OEP_get_order_info_client_item.currency}\r\n\t\t\t\t\t\t\tsize=\"l\">\r\n\t\t\t\t\t\t\t<b>Название:</b>{\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.itemname}\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t<b>Цена на 1шт:</b>{\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.saleprice+\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.currency}\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t<b>Кол-во:</b>{\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.count}\r\n\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t<b>Итого:</b>{\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.amount+\" \"+this.props.app.state.OEP_get_order_info_client_orderinfo.currency}\r\n\t\t\t\t\t</Cell>\r\n\t\t\t\t</Group>\r\n\t\t\t\t<Group title=\"Организатор\">\r\n\t\t\t\t    <Cell\r\n\t\t\t          photo={this.props.app.state.OEP_get_order_info_client_item.org_photo_200}\r\n\t\t\t          description={this.props.app.state.OEP_get_order_info_client_item.org_fio}\r\n\t\t\t          before={<Avatar src={this.props.app.state.OEP_get_order_info_client_item.org_photo_200} size={80}/>}\r\n\t\t\t          size=\"l\"\r\n\t\t\t          target=\"_blank\"\r\n\t\t\t          href={\"https://vk.com/im?media=&sel=\"+this.props.app.state.OEP_get_order_info_client_orderinfo.orgvkid}\r\n\t\t\t        >\r\n\r\n\t\t\t          Написать сообщение\r\n\t\t\t          <br/><br/>\r\n\r\n\t\t\t          <Button>Написать</Button>\r\n\r\n\t\t\t        </Cell>\r\n\t\t\t\t</Group>\r\n\t\t\t</div>\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t  </Panel>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default OrderEditPanel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\nimport Icon24ShareExternal from '@vkontakte/icons/dist/24/share_external';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\n//import { Select, Div, FormLayout, FormLayoutGroup, Button, Input, Textarea  } from '@vkontakte/vkui';\r\nconst MODAL_PAGE_ADD_PURCHASE = 'add_purchase';\r\nconst MODAL_PAGE_IMAGE_VIEW = 'modal_page_image_view';\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass ItemPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n        \t//item_array: [],\r\n        \t//orgingo_array: [],\r\n            active_img: '',\r\n            big_active_img: '',\r\n            med_active_img: '',\r\n            activeTab2: 'descr'\r\n        };\r\n        this.groups_by_ids = [];\r\n\r\n    }\r\n\r\n\r\n  copyToClipboard()\r\n  {\r\t  /* Get the text field */\r\n\t  var copyText = document.getElementById(\"itemlink\");\r\n\t  //const self2 = this;\r\n\t  //var copyText = \"https://vk.com/photo-\";//+self.state.item_array.owner_id2 + \"_\" + self.state.item_array.vkphotoid;\r\n\r\n\t  /* Select the text field */\r\n\t  copyText.select();\r\n\r\n\t  /* Copy the text inside the text field */\r\n\t  document.execCommand(\"copy\");\r\r  }\r\n\r\n  componentDidMount() {\r\n\r\n\r\n\r\n\t\tif (this.props.app.state.active_itemid != this.props.app.state.activeitemid)\r\n\t\t{\r\n\t\t//console.log(\"debug this.props.app.state.activeitemid\",this.props.app.state.activeitemid);\r\n\t\t//console.log(\"debug this.props.app.state.active_itemid\",this.props.app.state.active_itemid);\r\n\t\t\t//Проверка на подписку в группу++\r\n\r\n\t\t\tconst self = this;\r\n\t\t\tconst Storynow = this.props.app.state.activeStory;\r\n\r\n            self.props.app.setState({ activeStory: 'spinner'  });\r\n\t\t\tvar datain = {\r\n\t\t\t    action: \"get_item_info\",\r\n\t\t\t    itemid: this.props.app.state.activeitemid,\r\n\t\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\t};\r\n\r\n\t\t\tvar data = new FormData();\r\n\t\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\r\n\t\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t\t    method: 'POST',\r\n\t\t\t\t    body: data\r\n\t\t\t\t  })\r\n\t\t\t  .then(\r\n\t\t\t    function(response) {\r\n\t\t\t      if (response.status !== 200) {\r\n\t\t\t        //console.log('response N: ', response);\r\n\t\t\t        return;\r\n\t\t\t      }\r\n\t\t\t      response.json().then(function(data) {\r\n\t\t\t\t\tself.props.app.setState({ activeStory: Storynow  });\r\n\t\t\t\t\tif (data.success==\"Y\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//self.setState({ didmountdone: true })\r\n\t\t\t\t\t\tself.props.app.setState({ item_array: data.iteminfo })\r\n\t\t\t\t\t\tself.props.app.setState({ orgingo_array: data.orginfo })\r\n\t\t\t\t\t\tself.props.app.setState({ zakupkainfo_array: data.zakupkainfo })\r\n\t\t\t\t\t\t{//console.log(\"debug\",this.props.app.state.zakupkainfo_array)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.setState({ active_img: data.iteminfo.photo_url_catalog })\r\n\t\t\t\t\t\tself.setState({ big_active_img: data.iteminfo.big_photo_url_catalog })\r\n\t\t\t\t\t\tself.setState({ med_active_img: data.iteminfo.med_photo_url_catalog })\r\n\t\t\t\t\t\tself.props.app.setState({ active_itemid: data.iteminfo.id })\r\n\r\n\t\t\t\t\t\t//console.log('data.iteminfo: ', data.iteminfo.photo_url_catalog);\r\n\t\t\t\t\t\t//console.log('item_array: 2', self.props.app.state);\r\n\t        \t\t\t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\r\n\t        \t\t\t//self.setState({ purchases_array: purchases_list  })\r\n\t        \t\t\t//console.log('data.purchases1: ', data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.setState({ popout:\r\n\t\t\t\t\t\t      <Alert\r\n\t\t\t\t\t\t        actions={[{\r\n\t\t\t\t\t\t          title: 'OK',\r\n\t\t\t\t\t\t          autoclose: true,\r\n\t\t\t\t\t\t        }]}\r\n\t\t\t\t\t\t        onClose={self.closePopout}\r\n\t\t\t\t\t\t      >\r\n\t\t\t\t\t\t        <h2>Ошибка!</h2>\r\n\t\t\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t\t\t      </Alert>\r\n\t\t\t\t\t\t    });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t      });\r\n\t\t\t    }\r\n\t\t\t  );\r\n\t\t\t//Проверка на подписку в группу--\r\n\t\t}\r\n\r\n    //this.handleChange = this.handleChange.bind(this);\r\n    //this.props.app.setState({ activeStory: \"CatalogPanelMain\"});\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \t//const item_array = Array.from(this.state.item_array);\r\n  \t//console.log(\"debug this.props.id\",this.props.id);\r\n  \t//this.setState({ activePanel: \"CatalogPanelMain\"});\r\n    return (\r\n\r\n\r\n\r\n\t<Panel id={this.props.id} >\r\n    \t<PanelHeader\r\n\t\t\tleft={<HeaderButton  onClick={this.props.go}  >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t\t\t</HeaderButton>}\r\n          >{this.props.app.state.item_array.name} за {this.props.app.state.item_array.price}</PanelHeader>\r\n\n        {//console.log(\"debug from Item\",this.state.item_array)\r\n        }\r\n\r\n\t\t<Group title={this.props.app.state.item_array.cat_name}>\r\n\t\t\t<Div style={{textAlign: 'center'}}>\r\n\r\n\r\n\r\n\t\t\t\t<a onClick={ ()=> this.props.app.setState({ activePanel: 'Imgview', active_img:this.props.app.state.item_array.big_photo_url_catalog, GoBackPanel:this.props.id }) }  >\r\n\t\t\t\t\t<img class=\"cover_img_med\" src={this.props.app.state.item_array.med_photo_url_catalog}/>\r\n\t\t\t\t</a>\r\n\t        </Div>\r\n\t        <Div>\r\n\t        \t<span class=\"price-preview\">{this.props.app.state.item_array.name} за {this.props.app.state.item_array.price}</span>\r\n\t        </Div>\r\n\t  \t</Group>\r\n        <Group title=\"Подробности\">\r\n        \t<HorizontalScroll>\r\n\t          <Tabs type=\"buttons\">\r\n\t            <TabsItem\r\n\t              onClick={() => this.setState({ activeTab2: 'descr' })}\r\n\t              selected={this.state.activeTab2 === 'descr'}\r\n\t              //after={<Counter>48</Counter>}\r\n\t            >\r\n\t              Описание\r\n\r\n\t            </TabsItem>\r\n\t            <TabsItem\r\n\t              onClick={() => this.setState({ activeTab2: 'additional_info' })}\r\n\t              selected={this.state.activeTab2 === 'additional_info'}\r\n\t              //after={<Counter>32</Counter>}\r\n\t            >\r\n\t              Информация по закупке\r\n\t            </TabsItem>\r\n\t          </Tabs>\r\n\t\t\t</HorizontalScroll>\r\n\r\n\t\t\t{this.state.activeTab2 === 'descr'&&\r\n\r\n\t\t\t  <Div style={{display: 'grid'}}>\r\n\t\t\t     <div class=\"item_link_container\">\r\n\t\t\t        <div class=\"share_icon\">\r\n\t\t\t\t  \t  <a href={\"https://vk.com/share.php?url=\"+\"https://vk.com/photo-\"+this.props.app.state.item_array.owner_id2 + \"_\" + this.props.app.state.item_array.vkphotoid}>\r\n\t\t\t\t  \t\t<Icon24ShareExternal style={{color:'#2975cc'}}/>\r\n\t\t\t\t  \t  </a>\r\n\t\t\t\t  \t</div>\r\n\r\n\t\t\t\t\t  <Cell\r\n\t\t\t\t\t  id=\"itemlink\"\r\n\t\t\t\t\t  expandable\r\n\t\t\t          target=\"_blank\"\r\n\t\t\t          indicator=\"Перейти\"\r\n\t\t\t          href={\"https://vk.com/photo-\"+this.props.app.state.item_array.owner_id2 + \"_\" + this.props.app.state.item_array.vkphotoid}\r\n\t\t\t          //onClick={this.copyToClipboard}\r\n\t\t\t\t\t  >\r\n\t\t\t\t\t     ID: <b>{this.props.app.state.item_array.owner_id2 + \"_\" + this.props.app.state.item_array.vkphotoid}</b>\r\n\t\t\t\t\t  </Cell>\r\n\t\t\t\t </div>\r\n\r\n\t\t\t\t  <Div style={{ whiteSpace: 'pre-wrap' }}>\r\n\t\t\t\t      {this.props.app.state.item_array.descr}\r\n\t\t\t\t  </Div>\r\n\t\t\t  </Div>\r\n\t\t\t}\r\n\t\t\t{this.state.activeTab2 === 'additional_info'&&\r\n\t\t\t\t<Div>\r\n\t\t\t\t\t{//console.log(\"debug \",this.props.app.state.zakupkainfo_array.descr)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<b>{this.props.app.state.zakupkainfo_array.name}</b><br/>\r\n\t\t\t\t\t{this.props.app.state.zakupkainfo_array.descr}\r\n\r\n\r\n\t\t\t\t</Div>\r\n\t\t\t}\r\n\r\n        </Group>\r\n\n\t  \t<Group title=\"Организатор\">\r\n\t  \t{//console.log(\"this.state.item_array\",this.state.orgingo_array.photo_200 )\r\n\t  \t}\n\t    <Cell\n          photo={this.props.app.state.orgingo_array.photo_200}\n          description={this.props.app.state.orgingo_array.name + \" \" + this.props.app.state.orgingo_array.last_name}\n          before={<Avatar src={this.props.app.state.orgingo_array.photo_200} size={80}/>}\n          size=\"l\"\r\n          target=\"_blank\"\r\n          href={\"https://vk.com/im?media=&sel=\"+this.props.app.state.orgingo_array.vkid}\n        >\n\r\n          Принимаю заказы\r\n          <br/><br/>\r\n\r\n          <Button>Написать</Button>\r\n\n        </Cell>\r\n\t  \t</Group>\r\n\t  \t<Div style={{ height: 60, padding:0 }}></Div>\n\r\n\t\t  <FixedLayout vertical=\"bottom\">\n\t\t  \t<Div>\n\r\n       \t\t   <Button\r\n       \t\t   size=\"xl\"\r\n       \t\t   onClick={ ()=> this.props.app.setState({ activePanel: 'OrderPanel', active_img:this.props.app.state.item_array.photo_url_catalog, GoBackPanel:this.props.id }) }\r\n       \t\t   >Купить</Button>\r\n\n\t\t     </Div>\n\t\t  </FixedLayout>\n\n\t  </Panel>\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default ItemPanel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\n//import { Select, Div, FormLayout, FormLayoutGroup, Button, Input, Textarea  } from '@vkontakte/vkui';\r\nconst MODAL_PAGE_ADD_PURCHASE = 'add_purchase';\r\nconst MODAL_PAGE_IMAGE_VIEW = 'modal_page_image_view';\r\nconst osname = platform();\r\n/*\r\n\t\t\t\t\t\t        Я подтверждаю, что ознакомлен и согласен с условиями\r\n\t\t\t\t\t\t        <Link style={{ color: '#42648b' }} onClick={ this.onStoryChange } selected={this.state.activeStory === 'oferta'} data-story=\"oferta\"> пользовательского соглашения </Link>\r\n\t\t\t\t\t\t        и обработкой персональных данных\r\n*/\r\n\r\n\r\n\r\nclass OrderPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        \titem_array: [],\r\n        \torgingo_array: [],\r\n            active_img: '',\r\n            phoneFocused: 0,\r\n            count_item_ordered: 1,\r\n            phoneid: '',\r\n            adress: '',\r\n            city: this.props.app.state.fetchedUser.city.title,\r\n            allowoferta: false,\r\n            fetchedUserFIO: this.props.app.state.fetchedUser.first_name+\" \"+this.props.app.state.fetchedUser.last_name,\r\n        };\r\n\r\n        this.handleChangePhone = this.handleChangePhone.bind(this);\r\n        this.handleChangeAdress = this.handleChangeAdress.bind(this);\r\n        this.handleFocusPhone = this.handleFocusPhone.bind(this);\r\n        this.handleBlurPhone = this.handleBlurPhone.bind(this);\r\n        this.handleChangefetchedUser = this.handleChangefetchedUser.bind(this);\r\n        this.handleChangeOferta = this.handleChangeOferta.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleChangeCity = this.handleChangeCity.bind(this);\r\n\r\n    }\r\n\r\n\thandleChangeCity(event)\r\n\t{\r\t\tthis.setState({ city: event.target.value });\r\t}\r\n\thandleSubmit(event) {\r\n    const self = this;\r\n    //console.log(\"self.state:\",self.state.fetchedUserFIO);\r\n    //return true;\r\n\r\n    var err = [];\r\n    if (self.state.city==\"\") err[1] = \"Нужно выбрать город\";\r\n    if (!self.state.fetchedUserFIO.match(/[А-Яа-яЁёA-Za-z]/g)) err[3] =  \"Имя указано некорректно\";\r\n    \telse\r\n    \t{\r\n    \t\tvar matches = self.state.fetchedUserFIO.match(/[А-Яа-яЁёA-Za-z]/g);\r\n    \t\tif ( matches.length<3 ) err[3] =  \"Имя указано некорректно\";\r\n    \t}\r\n\r\n    if ( self.state.phoneid.length>0)\r\n    {\r\n    \tif (self.state.phoneid[1]==\"3\" && self.state.phoneid[2]==\"7\" && self.state.phoneid[3]==\"5\")\r\n    \t{\r\n    \t\tif (self.state.phoneid.length!=19) err[2] = \"Неверно указан телефон\";\r\n    \t}\r\n    \telse if ( self.state.phoneid[1]==\"7\")\r\n    \t{\r\n    \t\tif (self.state.phoneid.length!=18) err[2] = \"Неверно указан телефон\";\r\n    \t}\r\n    \telse err[4] = \"Неверно указан телефон\";\r\n\r\n    }\r\n    if (self.state.phoneid==\"\") err[2] =  \"Нужно указать телефон\";\r\n    if (self.state.fetchedUserFIO.length<2) err[3] =  \"Нужно указать имя\";\r\n\r\n    //if ( !(event.target.phoneid.value.length==18 || event.target.phoneid.value.length==19) && event.target.phoneid.value.length>0) err[4] = \"Неверно указан телефон\";\r\n    //if (!this.state.allowoferta) err = err + \"Нужно согласиться с офертой\\n\\n\";\r\n    if (self.state.allowofertahidden!='1') err[5] = \"Нужно принять соглашение\";\r\n\r\n    if ( err.length>0 )\r\n    {\r\n    \t//alert(err);\r\n    \t//document.getElementById('warning_mess').innerHTML = err;\r\n\r\n\t\tthis.props.app.setState({ popout:\r\n\t\t      <Alert\r\n\t\t        actions={[{\r\n\t\t          title: 'OK',\r\n\t\t          autoclose: true,\r\n\t\t        }]}\r\n\t\t        onClose={this.props.app.closePopout}\r\n\t\t      >\r\n\t\t        { err.map(value => {return ( <h2> {value}</h2> ) } ) }\r\n\r\n\t\t      </Alert>\r\n\t\t    });\r\n    \t//this.setState.activeStory = \"warning\";\r\n    \t//alert(err);\r\n    }\r\n    else\r\n    {\r\n\t\t//SUCCESS++\r\n\t\tvar d = new Date();\r\n\r\n\t\tvar datain = {\r\n\t\t    action: \"add_order\",\r\n\t\t    phone: self.state.phoneid,\r\n\t\t    fio: self.state.fetchedUserFIO,\r\n\t\t    city: self.state.city,\r\n\t\t    adress: self.state.adress,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\titemid: this.state.item_array.id,\r\n\t\t\tcount: this.state.count_item_ordered\r\n\t\t    //vkidhash: self.state.vkidhash,\r\n\t\t    //date_time: d.getFullYear()+\"-\"+(\"0\" + (1+d.getMonth())).slice(-2)+\"-\"+(\"0\" + d.getDate()).slice(-2)+\" \"+d.toLocaleTimeString()\r\n\r\n\t\t};\r\n\r\n\t\tvar data = new FormData();\r\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t    method: 'POST',\r\n\t\t\t    body: data\r\n\t\t\t  })\r\n\t        .then(response => response.json())\r\n\t        \t//.then(data => self.setState({ order_list: data[] })\r\n\t\t\t.then(function(data) {\r\n\t\t    //self.setState({ order_list: JSON.stringify(data.out) });\r\n\t\t\t//self.setState({ Cyties: data.arCityes });\r\n\t\t\tif (data.success==\"Y\")\r\n\t\t\t{\r\n\t\t\t\tself.props.app.setState({ popout:\r\n\t\t\t\t      <Alert\r\n\t\t\t\t        actions={[{\r\n\t\t\t\t          title: 'OK',\r\n\t\t\t\t          autoclose: true,\r\n\t\t\t\t        }]}\r\n\t\t\t\t        onClose={self.props.app.closePopout}\r\n\t\t\t\t      >\r\n\t\t\t\t        <h2>Ваш заказ успешно принят!</h2>\r\n\t\t\t\t      </Alert>\r\n\t\t\t\t    });\r\n\t\t\t\t    //setTimeout(function() { document.location.reload(true);}, 0);\r\n\r\n                    //self.openlk();\r\n\r\n\t\t\t\t\t//let order_list = self.props.app.state.order_list;\r\n\t\t\t\t\t//var order_list_new = [];\r\n\t\t\t\t\t//console.log(\"debug data.orders_list\",data.orders_list);\r\n\r\n\t\t\t\t\tself.props.app.setState({LK_order_list: data.orders_list});\r\n\t\t\t\t\tself.props.app.setState({ activePanel: 'LkPanel', activeStory: 'LkPanel' });\r\n\t\t\t\t\twindow.scrollTo(0, 0);\r\n\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//console.log(\"dump\",data.dump);\r\n\t\t\t\tself.props.app.setState({ popout:\r\n\t\t\t\t      <Alert\r\n\t\t\t\t        actions={[{\r\n\t\t\t\t          title: 'OK',\r\n\t\t\t\t          autoclose: true,\r\n\t\t\t\t        }]}\r\n\t\t\t\t        onClose={self.props.app.closePopout}\r\n\t\t\t\t      >\r\n\t\t\t\t        <h2>Ошибка добавления заказа:</h2>\r\n\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t      </Alert>\r\n\t\t\t\t    });\r\n\t\t\t    //setTimeout(function() { document.location.reload(true);}, 3000);\r\n\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t  \t}\r\n\t     );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t//SUCCESS--\r\n    }\r\n\r\n    event.preventDefault();\r\n  }\r\n\r\n  handleChangeOferta(event)\r\n  {\r\n    const target = event.target;\r\n    const value = target.type === 'checkbox' ? target.checked : target.value;\r\n    const name = target.name;\r\n    if (value==true)\tthis.setState({ allowofertahidden: '1' });\r\n    \telse this.setState({ allowofertahidden: '0' });\r\n\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  handleChangeAdress(event)\r\n  {\r\n  \tthis.setState({ adress: event.target.value });\r\n  }\r\n\r\n  handleChangefetchedUser(event)\r\n  {\r\n  \tvar fio = event.target.value;\r\n  \tfio = fio.replace(/\\s+/g, ' ');\r\n  \tfio = fio.replace('--', '-');\r\n  \tfio = fio.replace(' - -', ' -');\r\n  \tfio = fio.replace('- - ', '- ');\r\n  \tfio = fio.replace(/[^А-Яа-яЁёA-Za-z -]/g, '');\r\n\r\n\r\n  \tif (event.target.value.length<=25) this.setState({ fetchedUserFIO: fio });\r\n  }\r\n\r\n  handleBlurPhone(event)\r\n  {\r\n\tthis.setState({ phoneFocused: 1 });\r\n  }\r\n  handleFocusPhone(event)\r\n  {\r\n  \tconst self = this;\r\n  \tif ( self.state.phoneFocused!=1 )\r\n  \t{\r\n  \t\t//alert(\"allow phone?\");\r\n  \t\t//alert(self.state.phoneFocused);\r\n  \t\tself.setState({ phoneFocused: 1 });\r\n  \t\t//this.setState({ phoneFocused: 1 });\r\n\r\n\r\n\t\tvar datain = {\r\n\t\t    action: \"get_info_vk\",\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n\r\n\t\tvar data = new FormData();\r\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t    method: 'POST',\r\n\t\t\t    body: data\r\n\t\t\t  })\r\n\t        .then(response => response.json())\r\r\n\t\t\t.then(function(data) {\r\n\r\n\t\t\tif (data.success==\"Y\")\r\n\t\t\t{\r\n            \tself.setState({ phoneid: self.checkphone(data.phone) });\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\r\n\t\t\t\tconnect.send(\"VKWebAppGetPhoneNumber\", {\r\n\t\t\t\t        \"method\": \"users.get\",\r\n\t\t\t\t        \"params\": {} });\r\n\t\t\t\tconnect.subscribe(function(e) {\r\n\t\t\t\t        if (e.detail.type === \"VKWebAppGetPhoneNumberResult\")\r\n\t\t\t\t        {\r\n\t\t                    self.setState({ phoneid: self.checkphone(e.detail.data.phone_number) });\r\n\t\t\t\t        }\r\n\t\t\t\t        else\r\n\t\t\t\t        {\r\n\t\t\t\t\t  \t\t//const phone = \"+\";\r\n\t\t\t\t\t  \t\t//self.setState({ phoneid: phone });\r\n\t\t\t\t        }\r\n\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t  \t}\r\n\t     );\r\n\r\n\r\n\r\n\r\n\r\n  \t}\r\n\r\n  \treturn false;\r\n  }\r\n\r\n  handleChangePhone(event)\r\n  {\r\n  \tconst self = this;\r\n  \tself.setState({ phoneid: self.checkphone(event.target.value) });\r\n  }\r\n\r\n  checkphone(phonein)\r\n  {\r\n\r\n\t\tvar phone_sav = phonein.replace(/[^\\d]/g, '');;\r\n\t\tvar output = '';\r\n\r\n        for (var i = 0; i < phone_sav.length; i++){\r\n\r\n\t\t\tvar curstr = phone_sav[i];\r\n\t\t\tif (phone_sav[0]==\"3\")\r\n\t\t\t{\r\n\t            //Belarus\r\n\t            //+375(29)898-66-00\r\n\t            if (i == 0){\r\n\t                output += \"+\";\r\n\t            } else if (i == 3){\r\n\t                output += ' (';\r\n\t            } else if (i == 5){\r\n\t                output += ') ';\r\n\t            } else if (i == 8){\r\n\t                output += \"-\";\r\n\t            } else if (i == 10) {\r\n\t            output += \"-\";\r\n\t            }else if (i == 12){\r\n\t                break;\r\n\t            } ;\r\n\t        } else\r\n\t        {\r\n\t            //Russia\r\n\t            if (i == 0){\r\n\t                output += \"+\";\r\n\t            } else if (i == 1){\r\n\t                output += ' (';\r\n\t            } else if (i == 4){\r\n\t                output += ') ';\r\n\t            } else if (i == 7){\r\n\t                output += \"-\";\r\n\t            } else if (i == 9) {\r\n\t            output += \"-\";\r\n\t            }else if (i == 11){\r\n\t                break;\r\n\t            } ;\r\n\t        }\r\n            output += curstr;\r\n        };\r\n        return output;\r\n\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n\t\t//Проверка на подписку в группу++\r\n\t\tconst self = this;\r\n\t\tvar datain = {\r\n\t\t    action: \"get_item_info\",\r\n\t\t    itemid: this.props.app.state.activeitemid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n\r\n\t\tvar data = new FormData();\r\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\r\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t    method: 'POST',\r\n\t\t\t    body: data\r\n\t\t\t  })\r\n\t\t  .then(\r\n\t\t    function(response) {\r\n\t\t      if (response.status !== 200) {\r\n\t\t        //console.log('response N: ', response);\r\n\t\t        return;\r\n\t\t      }\r\n\t\t      response.json().then(function(data) {\r\n\t\t\t\tif (data.success==\"Y\")\r\n\t\t\t\t{\r\n\t\t\t\t\t//self.setState({ didmountdone: true })\r\n\t\t\t\t\tself.setState({ item_array: data.iteminfo })\r\n\t\t\t\t\tself.setState({ orgingo_array: data.orginfo })\r\n\r\n\t\t\t\t\tself.setState({ active_img: data.iteminfo.photo_url_catalog })\r\n\t\t\t\t\t//console.log('data.iteminfo: ', data.iteminfo.photo_url_catalog);\r\n\t\t\t\t\t//console.log('item_array: 2', self.props.app.state);\r\n        \t\t\t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\r\n        \t\t\t//self.setState({ purchases_array: purchases_list  })\r\n        \t\t\t//console.log('data.purchases1: ', data);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tself.setState({ popout:\r\n\t\t\t\t\t      <Alert\r\n\t\t\t\t\t        actions={[{\r\n\t\t\t\t\t          title: 'OK',\r\n\t\t\t\t\t          autoclose: true,\r\n\t\t\t\t\t        }]}\r\n\t\t\t\t\t        onClose={self.closePopout}\r\n\t\t\t\t\t      >\r\n\t\t\t\t\t        <h2>Ошибка!</h2>\r\n\t\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t\t      </Alert>\r\n\t\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t      });\r\n\t\t    }\r\n\t\t  );\r\n\t\t//Проверка на подписку в группу--\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \t//const item_array = Array.from(this.state.item_array);\r\n  \t//console.log(\"this.state.item_array\",this.state.item_array.photo_url_catalog);\r\n  \t//onClick={(e)=>this.props.app.setState({ activePanel: this.props.app.state.GoBackPanel, activeStory: this.props.app.state.activeStory }) }\r\n  \t// onClick={(e) => this.props.app.setState({ activePanel: \"ItemPanel\"}) }\r\n    return (\r\n\r\n\r\n\r\n\t<Panel id={this.props.id} popout={this.props.app.state.popout}>\r\n    \t<PanelHeader\r\n\t\t\tleft={<HeaderButton onClick={(e)=>this.props.app.setState({ activePanel: this.props.app.state.GoBackPanel, activeStory: this.props.app.state.activeStory }) } app={this} >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t\t\t</HeaderButton>}\r\n          >Оформление заказа</PanelHeader>\r\n\r\n        {//console.log(\"activePanel\",this.state.item_array)\r\n\r\n        }\r\n\t\t<Group title=\"Оформление заказа\">\r\n\t\t\t<Group title=\"Контактные данные\">\r\n\t\t\t\t<Div>\r\n\t\t\t\t\t<Input type=\"text\" placeholder=\"ФИО\"\r\n\r\n\t\t\t\t\tname=\"fetchedUserFIO\"\r\n\t\t\t\t\tvalue={this.state.fetchedUserFIO}\r\n\t\t\t\t\tonChange={this.handleChangefetchedUser}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t</Div>\r\n\t\t   \t\t\t<Div>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\tplaceholder=\"+7 (900) 123-45-67\"\r\n\t\t\t\t\t\ttype=\"tel\" autocorrect=\"off\" autocomplete=\"tel\"\r\n\t\t\t\t\t\tid=\"phoneid\"\r\n\t\t\t\t\t\tname=\"phoneid\"\r\n\t\t\t\t\t\tmask=\"+7 (999) 999-99-99\"\r\n\t\t\t\t\t\tvalue={this.state.phoneid}\r\n\t\t\t\t\t\tonChange={this.handleChangePhone}\r\n\t\t\t\t\t\tonFocus={this.handleFocusPhone}\r\n\t\t\t\t\t\tonBlur={this.handleBlurPhone}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t\t<Group title=\"Адрес доставки\">\r\n\r\n\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\t<Input type=\"text\" placeholder=\"Город\"\r\n\t\t\t\t\t\t\tid=\"city\"\r\n\t\t\t\t\t\t\tname=\"city\"\r\n\t\t\t\t\t\t\tvalue={this.state.city}\r\n\t\t\t\t\t\t\tonChange={this.handleChangeCity}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t</Div>\r\n\r\n\t\t\t   \t\t\t<Div>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tplaceholder=\"Адрес\"\r\n\t\t\t\t\t\t\tid=\"adress\"\r\n\t\t\t\t\t\t\tname=\"adress\"\r\n\t\t\t\t\t\t\tvalue={this.state.adress}\r\n\t\t\t\t\t\t\tonChange={this.handleChangeAdress}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Div>\r\n\r\n\t\t\t\t\t\t<Group title=\"Ваш заказ\">\r\n\t\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<img class=\"img-fluid80\" src={this.props.app.state.active_img}/>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\tТовар: {this.state.item_array.name}<br/>\r\n\t\t\t\t\t\t\t\t\t\t\tЦена: {this.state.item_array.price}<br/>\r\n\t\t\t\t\t\t\t\t\t\t\tКол-во: {this.state.count_item_ordered}<br/>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t        </Div>\r\n\t\t\t\t\t\t\t<Div>\r\n\r\n\t\t\t\t\t\t        <Checkbox\r\n\t\t\t\t\t\t\t\t\tid=\"allowoferta\"\r\n\t\t\t\t\t\t\t\t\tname=\"allowoferta\"\r\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\tchecked={this.state.allowoferta}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChangeOferta}\r\n\t\t\t\t\t\t        >\r\n\t\t\t\t\t\t        Я даю свое согласие на обработку персональных данных\r\n\t\t\t\t\t\t        </Checkbox>\r\n\t\t\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\t\t\t<Button  level=\"1\" size=\"xl\"\r\n\t\t\t\t\t\t\t\t\tonClick={this.handleSubmit}\r\n\t\t\t\t\t\t\t\t\t>ПОДТВЕРДИТЬ</Button>\r\n\t\t\t\t\t\t\t\t</Div>\r\n\r\n\t\t\t\t\t        </Div>\r\n\t\t\t\t\t</Group>\r\n\t\t\t\t</Group>\r\n\t\t\t</Group>\r\n\r\n\t  \t</Group>\r\n\r\n\t  </Panel>\r\n    );\r\n  }\r\n}\r\nexport default OrderPanel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nimport Icon24Article from '@vkontakte/icons/dist/24/article';\r\nimport Icon24Coins from '@vkontakte/icons/dist/24/coins';\r\nimport Icon24MoneyCircle from '@vkontakte/icons/dist/24/money_circle';\r\nimport Icon24Work from '@vkontakte/icons/dist/24/work';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\n//import { Select, Div, FormLayout, FormLayoutGroup, Button, Input, Textarea  } from '@vkontakte/vkui';\r\nconst MODAL_PAGE_ADD_PURCHASE = 'add_purchase';\r\nconst MODAL_PAGE_IMAGE_VIEW = 'modal_page_image_view';\r\nconst MODAL_PAGE_ADD_ALBUM = 'add_album_to_purchase';\r\nconst MODAL_PAGE_ADD_ORDER = 'add_order';\r\nconst osname = platform();\r\nconst MODAL_PAGE_EDIT_ORG_SBOR = 'edit_org_sbor';\r\n\r\n\r\nclass LkPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n        \titem_array: [],\r\n            active_img: '',\r\n            //activeTab: 'client',\r\n            new_albums_array: [],\r\n        };\r\n        this.handleToArhiv = this.handleToArhiv.bind(this);\r\n        this.openPurchasesPanel = this.props.app.openPurchasesPanel.bind(this);\r\n    }\r\n\r\n\r\n\r\n  handleToArhiv()\r\n  {\r\r  }\r\n  componentDidMount()\r\n  {\r\t  //self.setState({ order_list: data.dataout.orders_list })\r\n\t  this.props.app.setState({new_pid_name:\"\"});\r\n\t  if (this.props.app.state.LK_order_list.length===0)\r\n\t  {\r\n\t\t  var datain = {\r\n\t\t\t    action: \"get_user_info_list\",\r\n\t\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\r\n\t\t  };\r\n\t  \t  this.props.app.connect_to_bd(datain);\r\n  \t  }\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \t//const item_array = Array.from(this.state.item_array);\r\n  \t//console.log(\"debug: Array.from(this.state.new_albums_array)\",Array.from(this.state.new_albums_array));\r\n  \t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\r\n  \tconst new_albums_array = Array.from(this.state.new_albums_array);\r\n\r\n\r\n  \tconst orderlist1 = Array.from(this.props.app.state.LK_order_list);\r\n  \t//console.log(\"debug: orderlist1\",orderlist1);\r\n  \tconst orderlist = [];\r\n  \t//orderlist1.map( (value,i) )\r\n  \t//<a href={\"https://vk.me/id\"+orderlist1[idx].orgvkid} target=\"_blank\">\r\n  \tfor (let idx = 0; idx < orderlist1.length; idx++ )\r\n  \t{\r\t\torderlist.push(\r\n\t\t<Div>\r\n\r\n\t\t\t<Cell\r\n\t\t\t\t\tonClick={(e)=> this.props.app.setState({activePanel:\"OrderEditPanel\", OEP_orderid:orderlist1[idx].id, GoBackPanel:\"LkPanel\"})}\r\n\t\t\t\t\tphoto={orderlist1[idx].photo_url_catalog}\r\n\t\t\t\t\t//photo=\"https://zakupi.club/bitrix/templates/zakupi/i/logo.png\"\r\n\t\t\t\t\tbefore={<img src={orderlist1[idx].photo_url_catalog}  size={80} className=\"img-fluid80\" />}\r\n\t\t\t\t\tdescription=\"\"\r\n\t\t\t\t\tsize=\"l\">\r\n\t\t\t\tЗаказ №: {orderlist1[idx].id+\" от \"+orderlist1[idx].date}<br/>\r\n\t\t\t\tИмя: {orderlist1[idx].fio}<br/>\r\n\t\t\t\tАдрес:  {orderlist1[idx].adress} <br/>\r\n\t\t\t\tСтатус:  <b>{orderlist1[idx].status}</b> <br/>\r\n\t\t\t\tСумма: {orderlist1[idx].amount+\" \"+orderlist1[idx].currency}<br/>\r\n\t\t\t</Cell>\r\n\t\t</Div>\r\n\t\t);\r  \t};\r\n\r\n    return (\r\n\r\n\r\n\t<Panel id={this.props.id} >\r\n    \t<PanelHeader\r\n          >Личный кабинет</PanelHeader>\r\n\t\t   <Group title=\"Режим\">\r\n\r\n\t\t           <HorizontalScroll>\r\n\t\t              <Tabs type=\"buttons\">\r\n\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.props.app.setState({ activeTabLichKab: 'client' })}\r\n\t\t                    selected={this.props.app.state.activeTabLichKab === 'client'}\r\n\t\t                  >\r\n\t\t                    Клиент\r\n\t\t                  </TabsItem>\r\n\r\n\t\t                  <TabsItem\r\n\t\t                    onClick={() => this.props.app.setState({ activeTabLichKab: 'org' })}\r\n\t\t                    selected={this.props.app.state.activeTabLichKab === 'org'}\r\n\t\t                  >\r\n\t\t                    Организатор\r\n\t\t                  </TabsItem>\r\n\t\t              </Tabs>\r\n                    </HorizontalScroll>\r\n\r\n\t\t   </Group>\r\n\r\n\t\t\t{this.props.app.state.activeTabLichKab === 'client'&&\r\n\r\n\t\t\t\t<Group title={orderlist1.length ? \"Список заказов\" : \"Список заказов пуст\"}>\r\n\r\n\t\t\t\t{orderlist1.length > 0 &&\r\n\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t{orderlist}\r\n\t\t\t\t\t</Group>\r\n\t\t\t\t}\r\n\t\t\t\t</Group>\r\n\t\t\t}\r\n\t\t\t{this.props.app.state.activeTabLichKab === 'org'&&\r\n\t\t\t//*********\r\n\t\t\t\t<div>\r\n\t\t       <Group title=\"Управление\" >\r\n\t\t       \t<List>\r\n                  <Cell\r\n                  \tbefore={<Icon24Work />}\r\n                  \tonClick={(e) => this.props.app.setState({ activePanel: \"PurchasesPanel\", fetchedUser:this.props.app.state.fetchedUser})}\r\n                  \tindicator={<Counter type=\"primary\">{this.props.app.state.LK_purchases_array.length}</Counter>}\r\n                  \t>Закупки\r\n                  </Cell>\r\n                  <Cell\r\n                  \tbefore={<Icon24MoneyCircle />}\r\n                  \tonClick={(e) => this.props.app.setState({ activePanel: \"OrdersPanel\", fetchedUser:this.props.app.state.fetchedUser})}\r\n                  \tindicator={<Counter type=\"primary\">{this.props.app.state.LK_org_order_list.length}</Counter>}\r\n                  \t>Заказы\r\n                  </Cell>\r\n\r\n\r\n\t\t\t    </List>\r\n\t\t\t   </Group>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t </div>\r\n\r\n            //*********\r\n\t\t\t}\r\n\r\n\r\n          </Panel>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default LkPanel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Placeholder, Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass Imgview extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n        \titem_array: [],\r\n        \torgingo_array: [],\r\n            active_img: '',\r\n        };\r\n        this.groups_by_ids = [];\r\n\r\n    }\r\n\r\n\r\n  componentDidMount() {\r\n\t\t//Проверка на подписку в группу++\r\n\t\tconst self = this;\r\n\t\tvar datain = {\r\n\t\t    action: \"get_items\",\r\n\t\t    itemid: this.props.app.state.activeitemid,\r\n\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t};\r\n\r\n\t\tvar data = new FormData();\r\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\r\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t    method: 'POST',\r\n\t\t\t    body: data\r\n\t\t\t  })\r\n\t\t  .then(\r\n\t\t    function(response) {\r\n\t\t      if (response.status !== 200) {\r\n\t\t        //console.log('response N: ', response);\r\n\t\t        return;\r\n\t\t      }\r\n\t\t      response.json().then(function(data) {\r\n\t\t\t\tif (data.success==\"Y\")\r\n\t\t\t\t{\r\n\t\t\t\t\t//self.setState({ didmountdone: true })\r\n\t\t\t\t\tself.setState({ item_array: data.iteminfo })\r\n\t\t\t\t\tself.setState({ orgingo_array: data.orginfo })\r\n\r\n\t\t\t\t\tself.setState({ active_img: data.iteminfo.photo_url_catalog })\r\n\t\t\t\t\t//console.log('data.iteminfo: ', data.iteminfo.photo_url_catalog);\r\n\t\t\t\t\t//console.log('item_array: 2', self.props.app.state);\r\n        \t\t\t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\r\n        \t\t\t//self.setState({ purchases_array: purchases_list  })\r\n        \t\t\t//console.log('data.purchases1: ', data);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tself.setState({ popout:\r\n\t\t\t\t\t      <Alert\r\n\t\t\t\t\t        actions={[{\r\n\t\t\t\t\t          title: 'OK',\r\n\t\t\t\t\t          autoclose: true,\r\n\t\t\t\t\t        }]}\r\n\t\t\t\t\t        onClose={self.closePopout}\r\n\t\t\t\t\t      >\r\n\t\t\t\t\t        <h2>Ошибка!</h2>\r\n\t\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t\t      </Alert>\r\n\t\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t      });\r\n\t\t    }\r\n\t\t  );\r\n\t\t//Проверка на подписку в группу--\r\n\r\n    //this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \t//const item_array = Array.from(this.state.item_array);\r\n  \t//console.log(\"this.state.item_array\",this.state.item_array.photo_url_catalog);\r\n  \t//onClick={(e) => this.setState({ activePanel: \"ItemPanel\"}) } app={this}\r\n  \t// onClick={this.props.go} data-to={this.props.app.state.activePanel, this.props.app.state.activeStory}\r\n  \t//app={this.props.app}\r\n    return (\r\n\r\n\t<Panel id={this.props.id} >\r\n    \t<PanelHeader\r\n\t\t\tleft={<HeaderButton onClick={(e)=>this.props.app.setState({ activePanel: this.props.app.state.GoBackPanel, activeStory: this.props.app.state.activeStory }) }  >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t\t\t</HeaderButton>} >\r\n\r\n\t    Просмотр фото</PanelHeader>\r\n         <Placeholder\r\n\r\n           //icon={<Icon56MessageReadOutline />}\r\n           //action={<Button size=\"l\" level=\"tertiary\">Показать все сообщения</Button>}\r\n           stretched\r\n         >\r\n           <Div class=\"container_view\" style={{textAlign: 'center'}}>\r\n           \t<br/>\r\n\r\n           \t<img class=\"container_view\" src={this.props.app.state.active_img}/>\r\n           </Div>\r\n           <Div>\r\n\t         <Button\r\n\t         onClick={(e)=>this.props.app.setState({ activePanel: this.props.app.state.GoBackPanel, activeStory: this.props.app.state.activeStory }) }\r\n\t         >Закрыть\r\n\t         </Button>\r\n         \t</Div>\r\n         </Placeholder>\r\n\r\n\r\n\r\n\t  </Panel>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default Imgview;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  Switch, Search, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\r\nimport Icon24Dropdown from '@vkontakte/icons/dist/24/dropdown';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\nimport Icon24Search from '@vkontakte/icons/dist/24/search';\r\nimport Icon24Filter from '@vkontakte/icons/dist/24/filter';\r\nimport Icon28Search from '@vkontakte/icons/dist/28/search';\r\nimport Icon24Sort from '@vkontakte/icons/dist/24/sort';\r\n//import { Select, Div, FormLayout, FormLayoutGroup, Button, Input, Textarea  } from '@vkontakte/vkui';\r\nconst MODAL_PAGE_ADD_PURCHASE = 'add_purchase';\r\nconst MODAL_PAGE_IMAGE_VIEW = 'modal_page_image_view';\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass CatalogPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n        \titem_array: [],\r\n\t\t    count_selected_filters: 0,\r\n\r\n        \titems_array: [],\r\n        \tsearch_string: '',\r\n        \tcatalog_items_array:this.props.app.state.catalog_items_array_save,\r\n        \tcatalog_items_array_save: this.props.app.state.catalog_items_array_save,\r\n            active_img: '',\r\n            search_str_len: 0,\r\n            activeTabCatalog: '',\r\n\r\n            offset: 0,\r\n        };\r\n        this.search_items = this.search_items.bind(this);\r\n        this.clearfilters = this.clearfilters.bind(this);\r\n        //this.connect_to_ajax = this.connect_to_ajax.bind(this);\r\n        //this.state = this.props.app.state;\r\n        //this.search_str = this.props.app.state.search_str;\r\n\r\n        //this.setState({ search_str : this.props.app.state.search_str });\r\n\r\n    }\r\n\r\n  clearfilters()\r\n  {\r\n  \tif (this.state.count_selected_filters==0) return true;\r\n  \tvar filters = [];\r\n  \t//alert(\"clear\");\r\n  \tvar array_items_out = this.props.app.state.orgs_array_save;\r\n\tthis.props.app.state.orgs_array_save.map((value, i) =>\r\n\t{\r\n\t\tarray_items_out[i].checked = false;\r\n\t} );\r\n\tthis.props.app.setState({orgs_array_save:array_items_out});\r\n\r\n\tvar array_items_out = this.props.app.state.categories_array_save;\r\n\tthis.props.app.state.categories_array_save.map((value, i) =>\r\n\t{\r\n\t\tarray_items_out[i].checked = false;\r\n\t} );\r\n\tthis.props.app.setState({categories_array_save:array_items_out});\r\n\r\n\r\n  \tthis.props.app.setState({filters_array_global:filters});\r\n  \tthis.setState({count_selected_filters: 0});\r\n  \tthis.connect_to_ajax(this.props.app.state.fetchedUser.id,filters,'','');\r\n  }\r\n  search_items(event)\r\n  {\r\n\r\n  \t//console.log(\"debug: this.props.app.state.search_str\", this.props.app.state.search_str);\r\n  \tthis.setState({ search_str: event });\r\n  \t//this.props.app.setState({ search_str: event });\r\n  \tvar catalog_items_array_out = [];\r\n  \tvar search_str = event.toLowerCase();\r\n  \tvar item_index_url=\"\";\r\n  \tvar item_index_urlm=\"\";\r\n  \t//var search_array = this.state.catalog_items_array;\r\n    //console.log(\"debug: search_str\", this.state.search_str);\r\n    //console.log(\"debug: event\", event);\r\n  \t//console.log(\"debug this.state.search_str_len\",this.state.search_str_len);\r\n  \t//console.log(\"debug this.state.search_str.length\",search_str.length);\r\n\r\n  \tvar item_index = '';\r\n  \t/*\r\n  \tif ( this.state.search_str_len >= search_str.length )\r\n  \t{\r\n  \t\tvar search_array = this.state.catalog_items_array_save;\r\n  \t}\r\n  \telse\r\n  \t{\r\n  \t\tvar search_array = this.state.catalog_items_array;\r\n  \t}\r\n  \tthis.setState({ search_str_len: this.props.app.state.search_str.length });\r\n  \t*/\r\n\r\n  \tif (search_str.length>0 || (search_str.length===0 && this.state.search_string.length>0) )\r\n  \t{\r  \t\tthis.setState({search_string : search_str});\r\n  \t\tthis.connect_to_ajax(this.props.app.state.fetchedUser.id,this.props.app.state.filters_array_global,this.props.app.state.CP_count,search_str);\r\n  \t}\r\n\r\n  \tvar search_array = this.props.app.state.catalog_items_array_save;\r\n\r\n\r\n\r\n  \t//if (this.state.search_str.length<=2) this.setState({ catalog_items_array: this.state.catalog_items_array_save });\r\n  \t//else //if (this.state.search_str.length>1)\r\n  \tif(1)\r\n  \t{\r\n  \t\t//alert(this.state.search_str);\r\n  \t\t//var items_array = Array.from(this.state.catalog_items_array);\r\n\r\n\t\t  for (let idx = 0; idx < search_array.length; idx++ )\r\n\t\t  {\r\n \t         \titem_index = search_array[idx].name.toLowerCase();\r\n \t         \t//16995956_458227843\r\n \t         \titem_index_url = 'https://vk.com/photo-'+search_array[idx].owner_id2+\"_\"+search_array[idx].vkphotoid;\r\n \t         \titem_index_urlm = 'https://m.vk.com/photo-'+search_array[idx].owner_id2+\"_\"+search_array[idx].vkphotoid;\r\n \t         \t//console.log(\"debug item_index\",item_index);\r\n \t         \tif (item_index.indexOf(search_str)!=-1 || item_index_url.indexOf(search_str)!=-1 || item_index_urlm.indexOf(search_str)!=-1)\r\n\t         \t{\r\n\t         \t\tcatalog_items_array_out.push(search_array[idx]);\r\n\t         \t}\r\n\t         \telse\r\n\t         \t{\r\n\t         \t\titem_index = search_array[idx].descr.toLowerCase();\r\n\t \t         \tif (item_index.indexOf(search_str)!=-1)\r\n\t\t         \t{\r\n\t\t         \t\tcatalog_items_array_out.push(search_array[idx]);\r\n\t\t         \t}\r\n\t         \t}\r\n\r\n  \t\t  }\r\n  \t\t  this.setState({ catalog_items_array: catalog_items_array_out });\r\n     }\r\n\t//items_finished\r\n\r\n\r\n\r\n  }\r\n  componentDidMount()\r\n  {\r\n\t\tconst self = this;\r\n\t\t//console.log(\"debug \",this.props.app.state.catalog_items_array_save.length);\r\n\t\tif (this.props.app.state.catalog_items_array_save.length==0)\r\n\t\t\tthis.connect_to_ajax(this.props.app.state.fetchedUser.id,this.props.app.state.filters_array_global,self.props.app.state.CP_count,this.state.search_string);\r\n\t\telse this.props.app.setState({CP_count : ( Number(this.props.app.state.CP_count) + Number(this.props.app.state.CP_count_step)) });\r\n\r\n\r\n\t\tthis.props.app.state.orgs_array_save.map((value, i) =>\r\n\t\t{\r\n\t\t\tif (value.checked) this.setState({ count_selected_filters : 1});\r\n\r\n\t\t} );\r\n\r\n\t\tthis.props.app.state.categories_array_save.map((value, i) =>\r\n\t\t{\r\n\t\t\tif (value.checked) this.setState({ count_selected_filters : 1});\r\n\r\n\t\t} );\r\n\r\n  }\r\n\r\n  connect_to_ajax(vkid,filters_array_global,count,search_string,orderby,sort)\r\n  {\r\r\n\t\tthis.props.app.setState({CP_count : count });\r\n\t\t//Проверка на подписку в группу++\r\n\t\tconst self = this;\r\n\t\tvar datain = {\r\n\t\t    action: \"get_items_for_catalog\",\r\n\t\t    count: count,\r\n\t\t    vkid: vkid,\r\n\t\t    filters_array_global: filters_array_global,\r\n\t\t    search_string:search_string,\r\n\t\t    orderby: orderby,\r\n\t\t    sort: sort,\r\n\t\t};\r\n\r\n\t\tvar data = new FormData();\r\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\r\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t    method: 'POST',\r\n\t\t\t    body: data\r\n\t\t\t  })\r\n\t\t  .then(\r\n\t\t    function(response) {\r\n\t\t      if (response.status !== 200) {\r\n\t\t        //console.log('response N: ', response);\r\n\t\t        return;\r\n\t\t      }\r\n\t\t      response.json().then(function(data) {\r\n\t\t\t\tif (data.success==\"Y\")\r\n\t\t\t\t{\r\n\t\t\t\t\t//self.setState({ didmountdone: true })\r\n\t\t\t\t\t//self.setState({ item_array: data.iteminfo })\r\n\t\t\t\t\tself.setState({ catalog_items_array: data.catalog_items_array })\r\n\t\t\t\t\tself.props.app.setState({ catalog_items_array_save: data.catalog_items_array })\r\n\t\t\t\t\tself.props.app.setState({ items_finished : data.items_finished })\r\n\r\n\t\t\t\t\t//self.props.app.update_catalog_items_array_save(data.catalog_items_array);\r\n\r\n\r\n\t\t\t\t\t//self.setState({ active_img: data.iteminfo.photo_url_catalog })\r\n\t\t\t\t\t//console.log('data.iteminfo: ', data.iteminfo.photo_url_catalog);\r\n\t\t\t\t\t//console.log('item_array: 2', self.props.app.state);\r\n        \t\t\t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\r\n        \t\t\t//self.setState({ purchases_array: purchases_list  })\r\n        \t\t\t//console.log('data.purchases1: ', data);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tself.setState({ popout:\r\n\t\t\t\t\t      <Alert\r\n\t\t\t\t\t        actions={[{\r\n\t\t\t\t\t          title: 'OK',\r\n\t\t\t\t\t          autoclose: true,\r\n\t\t\t\t\t        }]}\r\n\t\t\t\t\t        onClose={self.closePopout}\r\n\t\t\t\t\t      >\r\n\t\t\t\t\t        <h2>Ошибка!</h2>\r\n\t\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t\t      </Alert>\r\n\t\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t      });\r\n\t\t    }\r\n\t\t  );\r\n\t\t//Проверка на подписку в группу--\r\n\r\n\r  }\r\n\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \t//const item_array = Array.from(this.state.item_array);\r\n  \t//console.log(\"debug this.state.catalog_items_array\",this.state.catalog_items_array);\r\n  \t//console.log(\"debug this.props.app.state.catalog_items_array_save\",this.props.app.state.catalog_items_array_save);\r\n\r\n\tconst items_array = Array.from(this.state.catalog_items_array);\r\n\tconst catalog_items_array_out = [];\r\n\t  for (let idx = 0; idx < items_array.length; idx++ )\r\n\t  {\r\n         \tcatalog_items_array_out.push(\r\n\r\n\r\n\t\t\t<div>\r\n\t\t\t    <a onClick={(e) => this.props.app.openitempanelCatalog(items_array[idx].id, 'CatalogPanelMain', 'ItemPanelFromCatalog')} >\r\n\t\t\t    \t<img class=\"cover\" src={items_array[idx].photo_url_catalog}/>\r\n\t\t\t    </a>\r\n                   <br/>\r\n\r\n\t\t\t    <span class=\"item-preview\">{ ( items_array[idx].name.length>20 ? items_array[idx].name.slice(0, 20)+'...' : items_array[idx].name ) }<br/></span>\r\n\t\t\t    <span class=\"price-preview\">{items_array[idx].price}</span>\r\n\r\n\r\n\t\t\t</div>\r\n\r\n         \t);\r\n\t  }\r\n    return (\r\n\r\n\t  <Panel id={this.props.id} >\r\n\r\n\r\n\t\t<PanelHeader>\r\n\t\tКаталог товаров\r\n\t\t</PanelHeader>\r\n\r\n\r\n\t\t<Group>\r\n            <Group>\r\n            <FixedLayout vertical=\"top\">\r\n            <Search\r\n\t\t\t\t    theme=\"default\"\r\n\t\t\t\t    inputStyle={{backgroundColor: 'white'}}\r\n\t\t\t\t    containerStyle={{backgroundColor: 'white', borderWidth: 1, borderRadius: 5}}\r\n\t\t\t\t    placeholderTextColor={'#g5g5g5'}\r\n\r\n\t\t           \tname = \"search_str\"\r\n\t\t           \tvalue={this.state.search_str}\r\n\t\t           \tonChange={this.search_items}\r\n\r\n            />\r\n            <HorizontalScroll>\r\n             \t<div class=\"filter_container2\">\r\n\r\n\t\t\t\t\t\t<span  onClick={() => this.props.app.setState({ activePanel: 'Filterpanel', activeStory: \"CatalogPanelMain\" }) } class=\"filter_text\" style={{color: ( this.state.count_selected_filters ? '#FA8072' : 'grey')}}>Фильтры</span>\r\n\t\t\t\t\t\t<a onClick={() => this.props.app.setState({ activePanel: 'Filterpanel', activeStory: \"CatalogPanelMain\" }) }><Icon24Sort style={{color: ( this.state.count_selected_filters ? '#FA8072' : 'grey')}}/></a>\r\n\t\t\t\t\t\t<span  onClick={() => this.props.app.setState({ activePanel: 'SortPanel', activeStory: \"CatalogPanelMain\" }) }  class=\"filter_text\">\r\n\t\t\t\t\t\tСортировка</span><Icon24Dropdown onClick={() => this.props.app.setState({ activePanel: 'SortPanel', activeStory: \"CatalogPanelMain\" }) }  />\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tonClick={this.clearfilters}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon24Dismiss style={{color: ( this.state.count_selected_filters ? '#FA8072' : 'white')}}/>\r\n\t\t\t\t\t\t</Link>\r\n\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</HorizontalScroll>\r\n\t\t\t</FixedLayout>\r\n\r\n\t\t\t<Group>\r\n\t\t\t<div class=\"container\">\r\n\t\t\t\t{catalog_items_array_out}\r\n\t\t\t</div>\r\n\t\t\t<Div style={{ height: 7, padding:0 }}></Div>\r\n\t\t\t{catalog_items_array_out.length>0 && !this.props.app.state.items_finished &&\r\n\t\t\t\t<Div>\r\n\t\t\t\t\t<Button size=\"xl\"\r\n                        //this.setState({count : this.state.count + this.state.count_step });\r\n\t\t\t\t\t\tonClick={(e)=>this.connect_to_ajax(this.props.app.state.fetchedUser.id,this.props.app.state.filters_array_global,(Number(this.props.app.state.CP_count)+Number(this.props.app.state.CP_count_step)),this.state.search_string)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tПоказать еще\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Div>\r\n\t\t\t}\r\n\t\t\t{catalog_items_array_out.length===0 &&\r\n\t\t\t\t<Div>\r\n\t\t\t\t\tК сожалению ничего не нашлось.\r\n\t\t\t\t</Div>\r\n\t\t\t}\r\n\t\t\t</Group>\r\n            </Group>\r\n\t\t</Group>\r\n\r\n\r\n\t  </Panel>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default CatalogPanel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  View, Search, Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\n\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass Filterpanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n        \tcategories_array: [],\r\n        \tcategories_array_save:this.props.app.state.categories_array_save,\r\n        \tcategories_selected: '',\r\n        \tcategories_search: '',\r\n        \torgs_search: '',\r\n        \torgs_selected: '',\r\n        \torgs_array: [],\r\n        \tcount_selected_cats : 0,\r\n        \tcount_selected_orgs : 0,\r\n        \tfemale_selected:false,\r\n        \tmale_selected:false,\r\n        \tsex_selected:false,\r\n        \torgs_array_save: this.props.app.state.orgs_array_save,\r\n            activeFilter:\"\",\r\n            placeholder_cat_filter:'',\r\n            placeholder_org_filter:'',\r\n        };\r\n        //this.setState({categories_array_save: this.props.app.state.categories_array_save});\r\n        this.groups_by_ids = [];\r\n        this.search_categories = this.search_categories.bind(this);\r\n        this.select_cat = this.select_cat.bind(this);\r\n        this.search_orgs = this.search_orgs.bind(this);\r\n        this.select_orgs = this.select_orgs.bind(this);\r\n        this.aplly_filters = this.aplly_filters.bind(this);\r\n        this.apply_catalog_filter = this.apply_catalog_filter.bind(this);\r\n        this.clear_filters = this.clear_filters.bind(this);\r\n\r\n\r\n        //\r\n    }\r\n  aplly_filters(mode)\r\n  {\r  \tconst self = this;\r\n  \tvar filters = [];\r\n  \tvar categories_selected='';\r\n  \tvar orgs_selected='';\r\n\r\n\r\n\r\n\t//this.setState({categories_selected:this.state.categories_selected+\"#\"+id+\"#\"});\r\n\r\n\tthis.props.app.state.orgs_array_save.map((value, i) =>\r\n\t{\r\n\t\tif (value.checked) orgs_selected = orgs_selected + \"#\" + value.vkid + \"#\";\r\n\r\n\t} );\r\n\r\n\tthis.props.app.state.categories_array_save.map((value, i) =>\r\n\t{\r\n\t\tif (value.checked) categories_selected = categories_selected+\"#\"+value.id+\"#\";\r\n\t\t//this.setState({orgs_selected:this.state.orgs_selected+\"#\"+id+\"#\"});\r\n\t} );\r\n\r\n//\tthis.setState({ count_selected_orgs : count_selected_orgs});\r\n//\tthis.setState({ count_selected_cats : count_selected_cats});\r\n\r\n  \tfilters[0] = 'type:cats@'+categories_selected;\r\n  \tfilters[1] = 'type:orgs@'+orgs_selected;\r\n    this.props.app.setState({catalog_items_array_save:[]});\r\n    self.props.app.setState({ items_finished : false })\r\n\r\n\r\n\tif (mode!=\"FilterpanelAlbum\") this.props.app.setState({ categories_array_save: self.state.categories_array_save });\r\n\r\n\tthis.props.app.setState({ orgs_array_save: self.state.orgs_array_save });\r\n  \tif (mode!=\"FilterpanelAlbum\") this.props.app.setState({filters_array_global: filters});\r\n  \t//this.props.app.setState({filters_array_global_need_reload: true});\r\n\r\n  \t//console.log(\"debug :\",this.props.app.state.filters_array_global);\r\n\tif (mode===\"FilterpanelAlbum\")\r\n\t{\r\n\t\t//alert(mode);\r\n\t\tvar AE_categories_selected_to_album = '';\r\n\r\n\t\tthis.props.app.state.categories_array_save.map((value, i) =>\r\n\t\t{\r\n\t\t\tif (value.checked) AE_categories_selected_to_album = value.name+\"[\"+value.id+\"]\";\r\n\t\t\t//this.setState({orgs_selected:this.state.orgs_selected+\"#\"+id+\"#\"});\r\n\t\t} );\r\n\r\n\t\tthis.props.app.setState({ AE_categories_selected_to_album: AE_categories_selected_to_album });\r\n\t\tthis.clear_filters(\"catalog_filter\")\r\n\t\tthis.props.app.setState({ categories_array_save: []})\r\n\t}\r\n\r\n  \tif (mode!=\"FilterpanelAlbum\")  this.props.app.setState({ activePanel: 'CatalogPanelMain', activeStory: 'CatalogPanelMain' });\r\n\r\n\r\r  }\r\n\r\n\r\n\r\n  clear_filters(filter)\r\n  {\r  \tvar array_items_out = [];\r\n  \tif ( filter==\"org_filter\") var array_items_out = this.state.orgs_array_save;\r\n  \tif ( filter==\"catalog_filter\") var array_items_out = this.state.categories_array_save;\r\n\tarray_items_out.map((item, i) =>\r\n\t{\r\n\t\tarray_items_out[i].checked = false;\r\n\t} );\r\n  \tif ( filter==\"org_filter\")\r\n  \t{\r  \t\tthis.setState({orgs_array_save:array_items_out});\r\n  \t\tthis.setState({count_selected_orgs:0});\r\n  \t}\r\n  \tif ( filter==\"catalog_filter\")\r\n  \t{\r  \t\tthis.setState({categories_array_save:array_items_out});\r\n  \t\tthis.setState({count_selected_cats:0});\r\n  \t}\r\n\r  }\r\n  select_orgs(event,id,ii)\r\n  {\r\n\r\n  \t//console.log(\"debug select orgs:\",id);\r\n  \tconst target = event.target;\r\n  \tconst value = target.type === 'checkbox' ? target.checked : target.value;\r\n\r\n\tvar array_items_out = this.state.orgs_array_save;\r\n\r\n\tarray_items_out.map((item, i) =>\r\n\t{\r\n\r\n\t\tif (item['vkid']===id) array_items_out[i].checked = value;\r\n\r\n\t} );\r\n\r\n\tthis.setState({orgs_array_save:array_items_out});\r\n\r\n  \tif (value)\r\n  \t{\r\n  \t\t//this.setState({orgs_selected:this.state.orgs_selected+\"#\"+id+\"#\"});\r\n  \t\tthis.setState({count_selected_orgs:this.state.count_selected_orgs+1});\r\n  \t}\r\n  \telse\r\n  \t{\r\n      //this.setState({orgs_selected:this.state.orgs_selected.replace(\"#\"+id+\"#\",\"\")});\r\n      this.setState({count_selected_orgs:this.state.count_selected_orgs-1});\r\n  \t}\r\n  \t//var str = this.state.orgs_selected;\r\n\t//var count = (str.split('#').length)/2;\r\n\r\n  \t//this.setState({placeholder_org_filter : \"Выбрано \"+count});\r\n\r\n\r\n\r\n  }\r\n\r\n  search_orgs(event)\r\n  {\r\n\r\n  \tthis.setState({ orgs_search: event });\r\n  \tvar search_str = event.toLowerCase();\r\n  \tvar categories_items_array_out = [];\r\n  \tvar item_index = \"\";\r\n\r\n  \tthis.state.orgs_array_save.map((value,i) => {\r\n \t         \titem_index =  value.fio.toLowerCase();\r\n \t         \tif (item_index.indexOf(search_str)!=-1)\r\n\t         \t{\r\n\t         \t\tcategories_items_array_out.push(value);\r\n\t         \t}\r\n\r\n\r\n  \t});\r\n  \tthis.setState({ orgs_array: categories_items_array_out });\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n  select_sex(event,id)\r\n  {\r  \tconst target = event.target;\r\n  \tconst value = target.type === 'checkbox' ? target.checked : target.value;\r\n\r\n  \tvar array_items_out = this.props.app.state.categories_sex_save;\r\n  \tvar sex_selected = false;\r\n  \tvar female_selected = false;\r\n  \tvar male_selected = false;\r\n  \tvar boy_selected = false;\r\n  \tvar girl_selected = false;\r\n    //console.log(\"debug id\",id);\r\n\tarray_items_out.map((item, i) =>\r\n\t{\r\n\t\tif (item['id']===id)\r\n\t\t{\r\n\t\t\tarray_items_out[i].checked = value;\r\n\t\t\tif (array_items_out[i].sex===\"female\")\r\n\t\t\t{\r\n\t\t\t\tthis.setState({female_selected:value});\r\n\t\t\t\tfemale_selected = value;\r\n\t\t\t}\r\n\t\t\tif (array_items_out[i].sex===\"male\")\r\n\t\t\t{\r\n\t\t\t\tthis.setState({male_selected:value});\r\n\t\t\t\tmale_selected = value;\r\n\t\t\t\t//alert(male_selected);\r\n\t\t\t}\r\n\t\t\tif (array_items_out[i].sex===\"boy\")\r\n\t\t\t{\r\n\t\t\t\tboy_selected = value;\r\n\t\t\t}\r\n\t\t\tif (array_items_out[i].sex===\"girl\")\r\n\t\t\t{\r\n\t\t\t\tgirl_selected = value;\r\n\t\t\t\t//alert(male_selected);\r\n\t\t\t}\r\n\r\n\t\t\tif (value)\r\n\t\t\t{\r\t\t\t\tthis.setState({sex_selected:value});\r\n\t\t\t\tsex_selected = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t} );\r\n\tthis.props.app.setState({categories_sex_save:array_items_out});\r\n\tarray_items_out.map((item,i) =>\r\n\t{\r\t\tif (array_items_out[i].sex===\"female\") female_selected = array_items_out[i].checked;\r\n\t\tif (array_items_out[i].sex===\"male\") male_selected = array_items_out[i].checked;\r\n\t\tif (array_items_out[i].sex===\"boy\") boy_selected = array_items_out[i].checked;\r\n\t\tif (array_items_out[i].sex===\"girl\") girl_selected = array_items_out[i].checked;\r\n\t\tif (array_items_out[i].checked) sex_selected = true;\r\t});\r\n\r\n//\tvar array_items_out = this.props.state.categories_array_save;\r\n\tvar array_items_categories_out = [];\r\n\tvar need_add = false;\r\n\r\n    /*\r\n\tarray_items_out.map((item, i) =>\r\n\t{\r\n\r\n\t\tneed_add = true;\r\n\t\tif (sex_selected)\r\n\t\t{\r\t\t\tif ( item['code']===\"male\" && !male_selected) need_add = false;\r\n\t\t\tif ( (item['code']===\"female\") && !female_selected) need_add = false;\r\t\t}\r\n\t\tif (need_add) array_items_categories_out.push(item);\r\n\r\n\t} );\r\n\t*/\r\n  \tthis.state.categories_array_save.map((item,i) => {\r\n\t\tneed_add = true;\r\n\r\n\r\n\t\tif (sex_selected)\r\n\t\t{\r\n\t\t\tif ( item['sex']===\"male\" && !male_selected) need_add = false;\r\n\t\t\tif ( (item['sex']===\"female\") && !female_selected) need_add = false;\r\n\t\t\tif ( item['sex']===\"boy\" && !boy_selected) need_add = false;\r\n\t\t\tif ( (item['sex']===\"girl\") && !girl_selected) need_add = false;\r\n\t\t}\r\n       \tif (need_add)\r\n      \t{\r\n      \t\tarray_items_categories_out.push(item);\r\n      \t}\r\n\r\n\r\n  \t});\r\n\tthis.setState({ categories_array:array_items_categories_out});\r\n\r  }\r\n  select_cat(event,id)\r\n  {\r\n\r\n\r\n    //alert(id);\r\n  \tconst target = event.target;\r\n  \tconst value = target.type === 'checkbox' ? target.checked : target.value;\r\n\r\n\tvar array_items_out = this.state.categories_array_save;\r\n\r\n\tarray_items_out.map((item, i) =>\r\n\t{\r\n\t\tif (item['id']===id) array_items_out[i].checked = value;\r\n\t\tif (this.props.app.state.activePanel===\"FilterpanelAlbum\" && item['id']!=id) array_items_out[i].checked = false;\r\n\r\n\t} );\r\n\r\n\t//array_items_out[id].checked = value;\r\n\tthis.setState({categories_array_save:array_items_out});\r\n\r\n  \tif (value)\r\n  \t{\r\n  \t\t//this.setState({categories_selected:this.state.categories_selected+\"#\"+id+\"#\"});\r\n  \t\t//this.props.app.setState({filters_array_global: this.state.categories_selected});\r\n  \t\tthis.setState({count_selected_cats:this.state.count_selected_cats+1});\r\n\r\n  \t}\r\n  \telse\r\n  \t{\r\n      //this.setState({categories_selected:this.state.categories_selected.replace(\"#\"+id+\"#\",\"\")});\r\n      this.setState({count_selected_cats:this.state.count_selected_cats-1});\r\n  \t}\r\n  \t//\r\n  \t/*\r\n  \tvar str = this.state.categories_selected;\r\n\tvar count = (str.split('#').length+1)/2;\r\n\tconsole.log(\"debug count:\",str.split('#').length+1);\r\n\r\n\t*/\r\n//\tconsole.log(\"debug categories_array_save:\",this.state.categories_array_save);\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  search_categories(event)\r\n  {\r\n\r\n  \tthis.setState({ categories_search: event });\r\n  \tvar search_str = event.toLowerCase();\r\n  \tvar categories_items_array_out = [];\r\n  \tvar item_index = \"\";\r\n\r\n  \tthis.state.categories_array_save.map((value,i) => {\r\n \t         \titem_index =  value.name.toLowerCase();\r\n \t         \tif (item_index.indexOf(search_str)!=-1)\r\n\t         \t{\r\n\t         \t\tcategories_items_array_out.push(value);\r\n\t         \t}\r\n\r\n\r\n  \t});\r\n  \tthis.setState({ categories_array: categories_items_array_out });\r\n\r\n\r\n  }\r\n  componentDidMount() {\r\n\r\n         var get_all = false;\r\n         if (this.props.app.state.activePanel===\"FilterpanelAlbum\")\r\n         {\r         \tthis.clear_filters(\"catalog_filter\")\r\n         \tthis.setState({activeFilter:\"catalog_filter\"})\r\n         \tget_all = true;\r\n         }\r\n\t\t//Проверка на подписку в группу++\r\n\t\tconst self = this;\r\n\t\ttry {\r\n\t\t\tvar filters = this.props.app.state.categories_array_save.length;\r\n\t\t\tself.setState({ categories_array: this.props.app.state.categories_array_save });\r\n\t\t\tself.setState({ orgs_array: this.props.app.state.orgs_array_save });\r\n\r\n  \t\t\tvar count_selected_orgs = 0;\r\n  \t\t\tvar count_selected_cats = 0;\r\n  \t\t\tthis.props.app.state.orgs_array_save.map((value, i) =>\r\n  \t\t\t{\r\n  \t\t\t\tif (value.checked) count_selected_orgs++;\r\n\r\n  \t\t\t} );\r\n\r\n  \t\t\tthis.props.app.state.categories_array_save.map((value, i) =>\r\n  \t\t\t{\r\n  \t\t\t\tif (value.checked) count_selected_cats++;\r\n\r\n  \t\t\t} );\r\n  \t\t\tthis.setState({ count_selected_orgs : count_selected_orgs});\r\n  \t\t\tthis.setState({ count_selected_cats : count_selected_cats});\r\n\r\n\r\n\t\t}\r\n\t\tcatch(e) { var filters = 0 };\r\n        //console.log(\"debug \",this.props.app.state.categories_array_save);\r\n\t\tif (filters===0 || this.props.app.state.activePanel===\"FilterpanelAlbum\")\r\n\t\t{\r\n\t\t\tvar datain = {\r\n\t\t\t    action: \"get_filters\",\r\n\t\t\t    get_all: get_all,\r\n\t\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\t};\r\n\r\n\t\t\tvar data = new FormData();\r\n\t\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\r\n\t\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t\t    method: 'POST',\r\n\t\t\t\t    body: data\r\n\t\t\t\t  })\r\n\t\t\t  .then(\r\n\t\t\t    function(response) {\r\n\t\t\t      if (response.status !== 200) {\r\n\t\t\t        //console.log('response N: ', response);\r\n\t\t\t        return;\r\n\t\t\t      }\r\n\t\t\t      response.json().then(function(data) {\r\n\t\t\t\t\tif (data.success==\"Y\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//self.setState({ didmountdone: true })\r\n\t\t\t\t\t\tself.setState({ categories_array: data.categories })\r\n\t\t\t\t\t\tself.setState({ categories_array_save: data.categories })\r\n\t\t\t\t\t\tself.props.app.setState({ categories_array_save: data.categories })\r\n\t\t\t\t\t\tself.props.app.setState({ categories_sex_save: data.sex })\r\n\r\n\t\t\t\t\t\tself.setState({ orgs_array: data.orgs })\r\n\t\t\t\t\t\tself.setState({ orgs_array_save: data.orgs })\r\n\t\t\t\t\t\tself.props.app.setState({ orgs_array_save: data.orgs })\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.setState({ popout:\r\n\t\t\t\t\t\t      <Alert\r\n\t\t\t\t\t\t        actions={[{\r\n\t\t\t\t\t\t          title: 'OK',\r\n\t\t\t\t\t\t          autoclose: true,\r\n\t\t\t\t\t\t        }]}\r\n\t\t\t\t\t\t        onClose={self.closePopout}\r\n\t\t\t\t\t\t      >\r\n\t\t\t\t\t\t        <h2>Ошибка!</h2>\r\n\t\t\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t\t\t      </Alert>\r\n\t\t\t\t\t\t    });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t      });\r\n\t\t\t    }\r\n\t\t\t  );\r\n\t\t\t}\r\n\t\t//Проверка на подписку в группу--\r\n\r\n    //this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n  apply_catalog_filter()\r\n  {\r  \tif (this.props.app.state.activePanel!=\"FilterpanelAlbum\") this.setState({ activeFilter: '' })\r\n  \t\telse\r\n  \t\t{\r  \t\t\tthis.aplly_filters(\"FilterpanelAlbum\");\r\n  \t\t\tthis.props.app.setState({ activePanel: 'AlbumEdit', activeStory: \"LkPanel\" });\r\n  \t\t}\r\n\r  }\r\n\r\n  render() {\r\n  \t//const categories_array = Array.from(this.state.categories_array);\r\n  \t//console.log(\"debug categories_sex_save\",this.props.app.state.categories_sex_save);\r\n  \t//const categories = [];\r\n  \tconst  categories_sex = this.props.app.state.categories_sex_save.map((value, i) => {return ( <Div>{value.name.slice(0,3)+'.'}<Checkbox style={{padding:'0px'}} key={i} checked={value.checked} onClick={(e) => this.select_sex(e,value.id)} ></Checkbox></Div> ) } )\r\n  \tconst  categories = this.state.categories_array.map((value, i) => {return ( <Checkbox key={i} checked={value.checked} onClick={(e) => this.select_cat(e,value.id)} >{value.name}</Checkbox> ) } )\r\n  \tconst  orgs_array_list = this.state.orgs_array.map((value, i) => {return ( <Checkbox key={i}  checked={value.checked} onClick={(e) => this.select_orgs(e,value.vkid,i)} >{value.fio}</Checkbox> ) } )\r\n  \tconst placeholder_cat_filter = ( this.state.count_selected_cats ? \"Выбрано \" + this.state.count_selected_cats + '' : 'Выберите категории');\r\n    const placeholder_org_filter = ( this.state.count_selected_orgs ? \"Выбрано \" + this.state.count_selected_orgs + '': 'Выберите организаторов');\r\n  \t/*\r\n  \tcategories_array.map((value,i)=>{\r  \t\tcategories.push(\r\n\r  \t\t<Checkbox key={value.id}>{value.name}</Checkbox>\r\n\r\n  \t\t};\r  \t});\r\n    */\r\n    return (\r\n\r\n\t<Panel id={this.props.id} >\r\n    \t<PanelHeader\r\n\r\n\t\t\tleft={ (!this.state.activeFilter ) &&\r\t\t\t\t<HeaderButton  onClick={this.props.go} data-to=\"CatalogPanelMain\" >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t</HeaderButton>}\r\n          >\r\n          {(!this.state.activeFilter )  &&    'Панель фильтров' }\r\n          { this.state.activeFilter===\"org_filter\" &&    'Выберите организатора' }\r\n          { this.state.activeFilter===\"catalog_filter\" &&    'Выберите категорию' }\r\n\r\n          </PanelHeader>\r\n\r\n\r\n\r\n            <Group title={(!this.state.activeFilter ) &&    \"Фильтры каталога\" }>\r\n            {(!this.state.activeFilter )&&\r\n\r\n              <FormLayout>\r\n              \t  {this.state.activeFilter!==\"org_filter\" &&\r\n\t                <SelectMimicry\r\n\t                  top=\"Выберите категорию товара\"\r\n\t                  placeholder={this.state.placeholder_cat_filter}\r\n\t                  onClick={() => this.setState({ activeFilter: 'catalog_filter' })}\r\n\t                >{placeholder_cat_filter}\r\n\t                </SelectMimicry>\r\n                }\r\n\r\n                {//console.log(\"debug this.props.app.activePane\",this.props.app.state.activePanel)\r\n                }\r\n                {this.state.activeFilter!==\"catalog_filter\"  &&\r\n\r\n\t                <SelectMimicry\r\n\t                  top=\"Выберите организатора\"\r\n\t                  placeholder={placeholder_org_filter}\r\n\t                  onClick={() => this.setState({ activeFilter: 'org_filter' })}\r\n\t                 > {placeholder_org_filter}\r\n\t                 </SelectMimicry>\r\n\r\n                }\r\n\r\n\r\n              \t</FormLayout>\r\n              }\r\n              {///console.log(\"debug \",this.state.activeFilter)\r\n              }\r\n\r\n              {this.state.activeFilter===\"org_filter\" &&\r\n              \t<span>\r\n\t\t           <Search theme=\"default\"\r\n\t\t           \t//theme=\"header\"\r\n\t\t           \tname = \"search_str\"\r\n\t\t           \tvalue={this.state.orgs_search}\r\n\t\t           \tonChange={this.search_orgs}\r\n\t\t           />\r\n\t\t            <List>\r\n                       {orgs_array_list}\r\n\t\t            </List>\r\n\t\t           <Cell><br/></Cell>\r\n\t\t\t\t   <FixedLayout vertical=\"bottom\" >\r\n\r\n\r\n\t\t\t\t    <Div style={{display: 'flex' }} >\r\n\r\n\t\t\t\t       <Button size=\"l\" stretched style={{ marginRight: 8 }} onClick={() => this.setState({ activeFilter: '' })}>Ок</Button>\r\n\r\n\t\t\t\t\t   <Button size=\"l\" stretched level=\"secondary\" onClick={() => this.clear_filters(\"org_filter\")}>Сбросить</Button>\r\n\r\n\r\n\t\t\t\t    </Div>\r\n\r\n\t\t\t\t  </FixedLayout>\r\n\r\n\t\t        </span>\r\n\t           }\r\n              {(this.state.activeFilter===\"catalog_filter\") &&\r\n              \t<span>\r\n\t\t           <Search theme=\"default\"\r\n\t\t           \tvalue={this.state.categories_search}\r\n\t\t           \tonChange={this.search_categories}\r\n\t\t           />\r\n\t\t           <Group title=\"Раздел каталога\">\r\n\t\t            <div class=\"filter_container3\">\r\n\t\t              {categories_sex}\r\n\t\t            </div>\r\n\t\t           </Group>\r\n\r\n\t\t            <List>\r\n\t\t              {categories}\r\n\t\t            </List>\r\n\r\n\r\n\t\t           <Cell><br/></Cell>\r\n\t\t\t\t   <FixedLayout vertical=\"bottom\" style={{ background: 'white' }}>\r\n\r\n\t\t\t\t    <Div style={{display: 'flex',background: 'white' }}>\r\n\r\n\t\t\t\t       <Button size=\"l\" stretched style={{ marginRight: 8 }} onClick={() => this.apply_catalog_filter() }>Ок</Button>\r\n\t\t\t\t       <Button size=\"l\" stretched level=\"secondary\" onClick={() => this.clear_filters(\"catalog_filter\")}>Сбросить</Button>\r\n\t\t\t\t    </Div>\r\n\t\t\t\t  </FixedLayout>\r\n\r\n\t\t        </span>\r\n\t           }\r\n\t           {this.state.activeFilter===\"\" &&\r\n\t\t\t\t   <FixedLayout vertical=\"bottom\">\r\n\t\t\t\t\t  <Div>\r\n\t\t\t       \t\t<Button size=\"xl\" onClick={this.aplly_filters } >Применить</Button>\r\n\t\t\t     \t</Div>\r\n\t\t\t\t  </FixedLayout>\r\n\t           }\r\n\r\n\r\n            </Group>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t  </Panel>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default Filterpanel;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport Gallery from '@vkontakte/vkui/dist/components/Gallery/Gallery';\r\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\r\n//import {Panel, PanelHeader, HeaderButton, platform, IOS, Alert} from '@vkontakte/vkui';\r\nimport {  View, Search, Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\n\r\nconst osname = platform();\r\n\r\n\r\n\r\nclass SortPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.props.app.state;\r\n        this.state = {\r\n        \tcategories_array: [],\r\n        \tcategories_array_save:this.props.app.state.categories_array_save,\r\n        \tcategories_selected: '',\r\n        \tcategories_search: '',\r\n        \torgs_search: '',\r\n        \torgs_selected: '',\r\n        \torgs_array: [],\r\n        \tcount_selected_cats : 0,\r\n        \tcount_selected_orgs : 0,\r\n        \torgs_array_save: this.props.app.state.orgs_array_save,\r\n            activeFilter:\"\",\r\n            placeholder_cat_filter:'',\r\n            placeholder_org_filter:'',\r\n        };\r\n        //this.setState({categories_array_save: this.props.app.state.categories_array_save});\r\n        this.groups_by_ids = [];\r\n        this.search_categories = this.search_categories.bind(this);\r\n        this.select_cat = this.select_cat.bind(this);\r\n        this.search_orgs = this.search_orgs.bind(this);\r\n        this.select_orgs = this.select_orgs.bind(this);\r\n        this.aplly_filters = this.aplly_filters.bind(this);\r\n        this.sortbyprice = this.sortbyprice.bind(this);\r\n\r\n        //\r\n    }\r\n  aplly_filters()\r\n  {\r\n  \tconst self = this;\r\n  \tvar filters = [];\r\n  \tvar categories_selected='';\r\n  \tvar orgs_selected='';\r\n\r\n\r\n\r\n\t//this.setState({categories_selected:this.state.categories_selected+\"#\"+id+\"#\"});\r\n\r\n\tthis.props.app.state.orgs_array_save.map((value, i) =>\r\n\t{\r\n\t\tif (value.checked) orgs_selected = orgs_selected + \"#\" + value.vkid + \"#\";\r\n\r\n\t} );\r\n\r\n\tthis.props.app.state.categories_array_save.map((value, i) =>\r\n\t{\r\n\t\tif (value.checked) categories_selected = categories_selected+\"#\"+value.id+\"#\";\r\n\t\t//this.setState({orgs_selected:this.state.orgs_selected+\"#\"+id+\"#\"});\r\n\t} );\r\n\r\n//\tthis.setState({ count_selected_orgs : count_selected_orgs});\r\n//\tthis.setState({ count_selected_cats : count_selected_cats});\r\n\r\n  \tfilters[0] = 'type:cats@'+categories_selected;\r\n  \tfilters[1] = 'type:orgs@'+orgs_selected;\r\n\r\n\r\n\tthis.props.app.setState({ categories_array_save: self.state.categories_array_save });\r\n\tthis.props.app.setState({ orgs_array_save: self.state.orgs_array_save });\r\n  \tthis.props.app.setState({filters_array_global: filters});\r\n  \t//console.log(\"debug :\",this.props.app.state.filters_array_global);\r\n  \tthis.props.app.setState({ activePanel: 'CatalogPanelMain', activeStory: 'CatalogPanelMain' });\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n  clear_filters(filter)\r\n  {\r\n  \tvar array_items_out = [];\r\n  \tif ( filter==\"org_filter\") var array_items_out = this.state.orgs_array_save;\r\n  \tif ( filter==\"catalog_filter\") var array_items_out = this.state.categories_array_save;\r\n\tarray_items_out.map((item, i) =>\r\n\t{\r\n\t\tarray_items_out[i].checked = false;\r\n\t} );\r\n  \tif ( filter==\"org_filter\")\r\n  \t{\r\n  \t\tthis.setState({orgs_array_save:array_items_out});\r\n  \t\tthis.setState({count_selected_orgs:0});\r\n  \t}\r\n  \tif ( filter==\"catalog_filter\")\r\n  \t{\r\n  \t\tthis.setState({categories_array_save:array_items_out});\r\n  \t\tthis.setState({count_selected_cats:0});\r\n  \t}\r\n\r\n  }\r\n  select_orgs(event,id,ii)\r\n  {\r\n\r\n  \tconsole.log(\"debug select orgs:\",id);\r\n  \tconst target = event.target;\r\n  \tconst value = target.type === 'checkbox' ? target.checked : target.value;\r\n\r\n\tvar array_items_out = this.state.orgs_array_save;\r\n\r\n\tarray_items_out.map((item, i) =>\r\n\t{\r\n\r\n\t\tif (item['vkid']===id) array_items_out[i].checked = value;\r\n\r\n\t} );\r\n\r\n\tthis.setState({orgs_array_save:array_items_out});\r\n\r\n  \tif (value)\r\n  \t{\r\n  \t\t//this.setState({orgs_selected:this.state.orgs_selected+\"#\"+id+\"#\"});\r\n  \t\tthis.setState({count_selected_orgs:this.state.count_selected_orgs+1});\r\n  \t}\r\n  \telse\r\n  \t{\r\n      //this.setState({orgs_selected:this.state.orgs_selected.replace(\"#\"+id+\"#\",\"\")});\r\n      this.setState({count_selected_orgs:this.state.count_selected_orgs-1});\r\n  \t}\r\n  \t//var str = this.state.orgs_selected;\r\n\t//var count = (str.split('#').length)/2;\r\n\r\n  \t//this.setState({placeholder_org_filter : \"Выбрано \"+count});\r\n\r\n\r\n\r\n  }\r\n\r\n  search_orgs(event)\r\n  {\r\n\r\n  \tthis.setState({ orgs_search: event });\r\n  \tvar search_str = event.toLowerCase();\r\n  \tvar categories_items_array_out = [];\r\n  \tvar item_index = \"\";\r\n\r\n  \tthis.state.orgs_array_save.map((value,i) => {\r\n \t         \titem_index =  value.fio.toLowerCase();\r\n \t         \tif (item_index.indexOf(search_str)!=-1)\r\n\t         \t{\r\n\t         \t\tcategories_items_array_out.push(value);\r\n\t         \t}\r\n\r\n\r\n  \t});\r\n  \tthis.setState({ orgs_array: categories_items_array_out });\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n  select_cat(event,id)\r\n  {\r\n\r\n\r\n    //alert(id);\r\n  \tconst target = event.target;\r\n  \tconst value = target.type === 'checkbox' ? target.checked : target.value;\r\n\r\n\tvar array_items_out = this.state.categories_array_save;\r\n\r\n\tarray_items_out.map((item, i) =>\r\n\t{\r\n\t\tif (item['id']===id) array_items_out[i].checked = value;\r\n\r\n\t} );\r\n\r\n\t//array_items_out[id].checked = value;\r\n\tthis.setState({categories_array_save:array_items_out});\r\n\r\n  \tif (value)\r\n  \t{\r\n  \t\t//this.setState({categories_selected:this.state.categories_selected+\"#\"+id+\"#\"});\r\n  \t\t//this.props.app.setState({filters_array_global: this.state.categories_selected});\r\n  \t\tthis.setState({count_selected_cats:this.state.count_selected_cats+1});\r\n\r\n  \t}\r\n  \telse\r\n  \t{\r\n      //this.setState({categories_selected:this.state.categories_selected.replace(\"#\"+id+\"#\",\"\")});\r\n      this.setState({count_selected_cats:this.state.count_selected_cats-1});\r\n  \t}\r\n  \t//\r\n  \t/*\r\n  \tvar str = this.state.categories_selected;\r\n\tvar count = (str.split('#').length+1)/2;\r\n\tconsole.log(\"debug count:\",str.split('#').length+1);\r\n\r\n\t*/\r\n//\tconsole.log(\"debug categories_array_save:\",this.state.categories_array_save);\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  search_categories(event)\r\n  {\r\n\r\n  \tthis.setState({ categories_search: event });\r\n  \tvar search_str = event.toLowerCase();\r\n  \tvar categories_items_array_out = [];\r\n  \tvar item_index = \"\";\r\n\r\n  \tthis.state.categories_array_save.map((value,i) => {\r\n \t         \titem_index =  value.name.toLowerCase();\r\n \t         \tif (item_index.indexOf(search_str)!=-1)\r\n\t         \t{\r\n\t         \t\tcategories_items_array_out.push(value);\r\n\t         \t}\r\n\r\n\r\n  \t});\r\n  \tthis.setState({ categories_array: categories_items_array_out });\r\n\r\n\r\n  }\r\n  sortbyprice(type)\r\n  {\r  \t\t//this.props.app.tariffsfiltered.sort(( a, b ) => b.ramvalue - a.ramvalue);\r\n  \t\t//const items_array = Array.from(this.props.app.state.catalog_items_array);\r\n  \t\tconst items_array = this.props.app.state.catalog_items_array_save;\r\n  \t\t//console.log(\"debug items_array\",items_array);\r\n  \t\tif (type==\"highttolow\")  items_array.sort(( a, b ) => b.digprice - a.digprice);\r\n  \t\tif (type==\"lowtohight\")  items_array.sort(( a, b ) => a.digprice - b.digprice);\r\n\r\n  \t\tthis.props.app.setState({ catalog_items_array_save: items_array });\r\n  \t\tthis.props.app.setState({ activePanel: 'CatalogPanelMain', activeStory: 'CatalogPanelMain' });\r  }\r\n\r\n  componentDidMount() {\r\n\r\n\r\n\t\t//Проверка на подписку в группу++\r\n\t\tconst self = this;\r\n\t\ttry {\r\n\t\t\tvar filters = this.props.app.state.categories_array_save.length;\r\n\t\t\tself.setState({ categories_array: this.props.app.state.categories_array_save });\r\n\t\t\tself.setState({ orgs_array: this.props.app.state.orgs_array_save });\r\n\r\n  \t\t\tvar count_selected_orgs = 0;\r\n  \t\t\tvar count_selected_cats = 0;\r\n  \t\t\tthis.props.app.state.orgs_array_save.map((value, i) =>\r\n  \t\t\t{\r\n  \t\t\t\tif (value.checked) count_selected_orgs++;\r\n\r\n  \t\t\t} );\r\n\r\n  \t\t\tthis.props.app.state.categories_array_save.map((value, i) =>\r\n  \t\t\t{\r\n  \t\t\t\tif (value.checked) count_selected_cats++;\r\n\r\n  \t\t\t} );\r\n  \t\t\tthis.setState({ count_selected_orgs : count_selected_orgs});\r\n  \t\t\tthis.setState({ count_selected_cats : count_selected_cats});\r\n\r\n\r\n\t\t}\r\n\t\tcatch(e) { var filters = 0 };\r\n        //console.log(\"debug \",this.props.app.state.categories_array_save);\r\n\t\tif (filters===0)\r\n\t\t{\r\n\t\t\tvar datain = {\r\n\t\t\t    action: \"get_filters\",\r\n\t\t\t    vkid: this.props.app.state.fetchedUser.id,\r\n\t\t\t};\r\n\r\n\t\t\tvar data = new FormData();\r\n\t\t\tdata.append( \"json\", JSON.stringify( datain ) )\r\n\r\n\r\n\t\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\r\n\t\t\t\t    method: 'POST',\r\n\t\t\t\t    body: data\r\n\t\t\t\t  })\r\n\t\t\t  .then(\r\n\t\t\t    function(response) {\r\n\t\t\t      if (response.status !== 200) {\r\n\t\t\t        //console.log('response N: ', response);\r\n\t\t\t        return;\r\n\t\t\t      }\r\n\t\t\t      response.json().then(function(data) {\r\n\t\t\t\t\tif (data.success==\"Y\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//self.setState({ didmountdone: true })\r\n\t\t\t\t\t\tself.setState({ categories_array: data.categories })\r\n\t\t\t\t\t\tself.setState({ categories_array_save: data.categories })\r\n\t\t\t\t\t\tself.props.app.setState({ categories_array_save: data.categories })\r\n\r\n\t\t\t\t\t\tself.setState({ orgs_array: data.orgs })\r\n\t\t\t\t\t\tself.setState({ orgs_array_save: data.orgs })\r\n\t\t\t\t\t\tself.props.app.setState({ orgs_array_save: data.orgs })\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tself.setState({ popout:\r\n\t\t\t\t\t\t      <Alert\r\n\t\t\t\t\t\t        actions={[{\r\n\t\t\t\t\t\t          title: 'OK',\r\n\t\t\t\t\t\t          autoclose: true,\r\n\t\t\t\t\t\t        }]}\r\n\t\t\t\t\t\t        onClose={self.closePopout}\r\n\t\t\t\t\t\t      >\r\n\t\t\t\t\t\t        <h2>Ошибка!</h2>\r\n\t\t\t\t\t\t        <h2>{data.errors}</h2>\r\n\t\t\t\t\t\t      </Alert>\r\n\t\t\t\t\t\t    });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t      });\r\n\t\t\t    }\r\n\t\t\t  );\r\n\t\t\t}\r\n\t\t//Проверка на подписку в группу--\r\n\r\n    //this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.props.onChange(e.target.value);\r\n  }\r\n\r\n  render() {\r\n  \t//const categories_array = Array.from(this.state.categories_array);\r\n  \t//console.log(\"this.state.item_array\",this.state.item_array.photo_url_catalog);\r\n  \t//const categories = [];\r\n  \tconst  categories = this.state.categories_array.map((value, i) => {return ( <Checkbox key={i} checked={value.checked} onClick={(e) => this.select_cat(e,value.id)} >{value.name}</Checkbox> ) } )\r\n  \tconst  orgs_array_list = this.state.orgs_array.map((value, i) => {return ( <Checkbox key={i}  checked={value.checked} onClick={(e) => this.select_orgs(e,value.vkid,i)} >{value.fio}</Checkbox> ) } )\r\n  \tconst placeholder_cat_filter = ( this.state.count_selected_cats ? \"Выбрано \" + this.state.count_selected_cats + '' : 'Выберите категории');\r\n    const placeholder_org_filter = ( this.state.count_selected_orgs ? \"Выбрано \" + this.state.count_selected_orgs + '': 'Выберите организаторов');\r\n  \t/*\r\n  \tcategories_array.map((value,i)=>{\r\n  \t\tcategories.push(\r\n\r\n  \t\t<Checkbox key={value.id}>{value.name}</Checkbox>\r\n\r\n  \t\t};\r\n  \t});\r\n    */\r\n    return (\r\n\r\n\t<Panel id={this.props.id} >\r\n    \t<PanelHeader\r\n\r\n\t\t\tleft={ (!this.state.activeFilter ) &&\r\n\t\t\t\t<HeaderButton  onClick={this.props.go} data-to=\"CatalogPanelMain\" >\r\n\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t\t</HeaderButton>}\r\n          >Сортировка\r\n          </PanelHeader>\r\n\r\n              <Group>\r\n                <List>\r\n                  <Cell\r\n\r\n                  \tonClick={ ()=>this.sortbyprice(\"lowtohight\") }\r\n                    //onClick={() => this.setState({ country: 'Россия', activeView: 'profile' })}\r\n                    //asideContent={this.state.country === 'Россия' ? <Icon24Done fill=\"var(--accent)\" /> : null}\r\n                  >\r\n                    По цене (от дешевых к дорогим)\r\n                  </Cell>\r\n                  <Cell\r\n                  \tonClick={ ()=>this.sortbyprice(\"highttolow\") }\r\n                    //onClick={() => this.setState({ country: 'Италия', activeView: 'profile' })}\r\n                    //asideContent={this.state.country === 'Россия' ? <Icon24Done fill=\"var(--accent)\" /> : null}\r\n\r\n                  >\r\n                    По цене (от дорогих к дешевым)\r\n                  </Cell>\r\n\r\n\r\n                </List>\r\n              </Group>\r\n\r\n\r\n\r\n\r\n\t  </Panel>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\nexport default SortPanel;\r\n","//https://vkcom.github.io/icons/\nimport ModalPageHeader from '@vkontakte/vkui/dist/components/ModalPageHeader/ModalPageHeader';\nimport { IS_PLATFORM_ANDROID, IS_PLATFORM_IOS } from '@vkontakte/vkui/dist/lib/platform';\n\n//import React from 'react';\n\nimport React, { useState, useEffect } from 'react';\n\nimport connect from '@vkontakte/vk-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {  Placeholder,Gallery,Switch, UsersStack, ModalCard, SelectMimicry, Radio, FormLayoutGroup, ModalRoot, ModalPage, CellButton, HorizontalScroll, Tabs, TabsItem, Spinner, Header, PanelHeaderContent, Counter, Alert, Textarea, platform, IOS, HeaderButton, Checkbox, Link, List, FormLayout, InfoRow, Cell, Epic, Tabbar, TabbarItem, Select, Input, Panel, Button, Group, Div, Avatar, PanelHeader } from '@vkontakte/vkui';\nimport PropTypes from 'prop-types';\n//import KeyboardSpacer from 'react-native-keyboard-spacer';\n//import KeyboardSpace from 'react-native-keyboard-space';\n\nimport PurchasesPanel  from \"./panels/Purchase\";\nimport PurchaseEdit  from \"./panels/PurchaseEdit\";\nimport AlbumEdit  from \"./panels/AlbumEdit\";\n\n\n\nimport OrdersPanel from \"./panels/OrdersPanel\";\nimport OrderEditPanel from \"./panels/OrderEditPanel\";\n//import Orders from \"./panels/Orders\";\nimport ItemPanel from \"./panels/Item\";\nimport OrderPanel from \"./panels/Order\";\nimport LkPanel from \"./panels/LichKab\";\nimport CatalogPanel from \"./panels/Catalog\";\nimport Imgview from \"./panels/ImgView\";\nimport Filterpanel from \"./panels/FilterPanel\";\nimport SortPanel from \"./panels/SortPanel\";\n\n\n//import Main from \"./panels/Orders\";\n\nimport Icon24Search from '@vkontakte/icons/dist/24/search';\nimport Icon24Coins from '@vkontakte/icons/dist/24/coins';\nimport Icon24MarketOutline from '@vkontakte/icons/dist/24/market_outline';\nimport Icon24User from '@vkontakte/icons/dist/24/user';\nimport Icon24Home from '@vkontakte/icons/dist/24/home';\nimport Icon24Phone from '@vkontakte/icons/dist/24/phone';\nimport Icon24MoneyCircle from '@vkontakte/icons/dist/24/money_circle';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Favorite from '@vkontakte/icons/dist/24/favorite';\nimport Icon28User from '@vkontakte/icons/dist/28/user';\nimport Icon24Newsfeed from '@vkontakte/icons/dist/24/newsfeed';\nimport Icon24Play from '@vkontakte/icons/dist/24/play';\nimport Icon28Play from '@vkontakte/icons/dist/28/play';\nimport Icon32Poll from '@vkontakte/icons/dist/32/poll';\nimport Icon24Poll from '@vkontakte/icons/dist/24/poll';\nimport Icon24Market from '@vkontakte/icons/dist/24/market';\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport Icon56NotificationOutline from '@vkontakte/icons/dist/56/notification_outline';\nimport Icon56InfoOutline from '@vkontakte/icons/dist/56/info_outline';\nimport Icon24Article from '@vkontakte/icons/dist/24/article';\nimport Icon24Privacy from '@vkontakte/icons/dist/24/privacy';\n\nimport Icon24Education from '@vkontakte/icons/dist/24/education';\nimport Icon24Message from '@vkontakte/icons/dist/24/message';\nimport Icon24Users from '@vkontakte/icons/dist/24/users';\nimport Icon24Settings from '@vkontakte/icons/dist/24/settings';\nimport Icon24Help from '@vkontakte/icons/dist/24/help';\nimport Icon24Discussions from '@vkontakte/icons/dist/24/discussions';\n\n//import Img from 'react-image'\n//import icon_isk from './img/isk_150x150.png';\nimport './css/my.css';\nimport './css/main.min.css';\n\nconst MODAL_PAGE_FILTERS = 'filters';\nconst MODAL_PAGE_COUNTRIES = 'countries';\nconst MODAL_PAGE_ADD_PURCHASE = 'add_purchase';\nconst MODAL_PAGE_ADD_ORDER = 'add_order';\nconst MODAL_PAGE_EDIT_ORG_SBOR = 'edit_org_sbor';\nconst MODAL_PAGE_EDIT_DESCR_PID = 'edit_descr_pid';\n\nconst MODAL_PAGE_ADD_PURCHASE_OLD = 'add_purchase_old';\nconst MODAL_PAGE_ADD_ALBUM = 'add_album_to_purchase';\nconst MODAL_PAGE_IMAGE_VIEW = 'modal_page_image_view';\nconst MODAL_PAGE_STORY_FEEDBACK = 'story-feedback';\nconst MODAL_PAGE_USER_INFO = 'user-info';\n\nconst MODAL_CARD_MONEY_SEND = 'money-send';\nconst MODAL_CARD_APP_TO_MENU = 'app-to-menu';\nconst MODAL_CARD_ERRS = 'errors_modal_card';\nconst MODAL_CARD_ABOUT = 'say-about';\nconst MODAL_CARD_NOTIFICATIONS = 'notifications';\nconst MODAL_CARD_CHAT_INVITE = 'chat-invite';\n\nconst osname = platform();\n//import './css/bootstrap.min.css';\n\n//import Home from './panels/Home';\n//import Picture from './panels/Picture';\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\n\t\t\tactiveTabLichKab: 'client',\n\t\t\tactiveTabPE: 'pid_orders',\n            CP_count:60,\n            CP_count_step:60,\n\n            AE_main_array: [],\n            AE_album_name: '',\n            AE_album_url: '',\n            AE_ps_strrow_name: '',\n            AE_ps_default_name: '',\n            AE_ps_strrow_price: false,\n            AE_ps_default_price: 0,\n            AE_ps_set_default_name: false,\n            AE_categories_selected_to_album:'',\n\n            PE_new_albums_array:[],\n\n            OEP_get_order_info_client_item:[],\n            OEP_get_order_info_client_orderinfo:[],\n            OEP_get_order_info_client_orginfo:[],\n            OEP_get_order_info_client_zakupkainfo:[],\n            OEP_phone:'',\n            OEP_cancel_order:'',\n\n\n\n\t\t\tkeyboardH: 200,\n\t\t    activeModal: null,\n\t\t    catalog_items_array_save: [],\n\t\t    items_finished: false,\n\t\t    //filters_array_global_need_reload: false,\n\t\t    categories_array_save:[],\n\n\t\t    categories_sex_save: [],\n\n\t\t    orgs_array_save: [],\n\t\t    filters_array_global: [],\n\t\t    search_str: '',\n\t\t    modalHistory: [],\n\t\t    item_array: [],\n\t\t    orgingo_array: [],\n\t\t    zakupkainfo_array: [],\n\t\t\tactivePanel: 'main',\n\t\t\tGoBackPanel: 'main',\n\t\t\tvkid: '',\n\n\t\t\tLK_order_list: [],\n\t\t\tLK_org_order_list: [],\n\t\t\tLK_purchases_array: [],\n\t\t\tLK_edit_album_id:0,\n\n\t\t\tOP_orders_list:[],\n\n\t\t\torg_sbor: 0,\n\t\t\tnew_album: '',\n\t\t\tnew_pid_name: '',\n\t\t\tnew_albums: [],\n\n\t\t\tdatain_array: [],\n\t\t\thot_items_array: [],\n\n\t\t\tpid: '',\n\t\t\tsave_descr_pid: '',\n\t\t\terrors: '',\n\t\t\tback_page_after_err: MODAL_PAGE_ADD_ALBUM,\n\t\t\torg_included: false,\n\t\t\tactiveitemid:5,\n\t\t\tactive_img: '',\n\t\t\tactive_itemid: 0,\n\n\n\n\t\t\t//victorina: 'Искусствовед',\n\t\t\t//victorinacode: 'isk_bot',\n\t\t\t//victorinadesc: 'Викторина \"Исскуствовед\" - это превосходная возможность изучить мировые картины и их авторов в игровой форме',\n\t\t\tvictorina: '',\n\t\t\tvictorinacode: 'isk_bot',\n\t\t\tvictorinadesc: '',\n\t\t\tanswer_hash: '',\n\t\t\tneed_check : true,\n\t\t\tcnt_check : 0,\n\n\t\t\ticonsarr: [],\n\t\t\ticonsnamearr: [],\n\t\t\ticonscodearr: [],\n\t\t\ticonsdescarr: [],\n\t\t\tpadding: 10,\n\t\t\ttop_list: '',\n\t\t\tself_top: 0,\n\t\t\tself_place: 0,\n\n\t\t\tquestion: '',\n\t\t\tdidmountdone: false,\n\t\t\tgamestarted: 1,\n\n\t\t\tanswers: '',\n\t\t\tcur_answer: '',\n\t\t\tcur_header: '',\n\t\t\tscore: '',\n\t\t\tfirststart: 'Y',\n\t\t\tcolor_var1 : '',\n\t\t\tcolor_var2 : '',\n\t\t\tcolor_var3 : '',\n\t\t\tcolor_var4 : '',\n\t\t\tvar1: '',\n\t\t\tvar2: '',\n\t\t\tvar3: '',\n\t\t\tvar4: '',\n\t\t\tupdatetop: 'N',\n\t\t\thash_var1: '',\n\t\t\thash_var2: '',\n\t\t\thash_var3: '',\n\t\t\thash_var4: '',\n\t\t\tmain_hash: '',\n\t\t\tfetchedUser: null,\n\t\t\tactiveStory: 'main',\n\t\t\timg_pic: \"\",\n\t\t\tq_type: \"\",\n\t\t\ttime: {},\n\t\t\tseconds: 0,\n\t\t\tshowseconds: true,\n\t\t\tuseringroup: false,\n\t\t\tuseringroupcnt: 0,\n\t\t};\n\t    this.timer = 0;\n\t    this.timer2 = 0;\n\n\t    this.add_album_to_purchase = this.add_album_to_purchase.bind(this);\n\t    this.add_album_to_purchase_save = this.add_album_to_purchase_save.bind(this);\n\t    this.add_new_purchase = this.add_new_purchase.bind(this);\n\n//\t    this.handleChangeVictorina = this.handleChangeVictorina.bind(this);\n\t    this.check_answer_recieved = this.check_answer_recieved.bind(this);\n\t    this.handleInputChange = this.handleInputChange.bind(this);\n\n\t\tthis.onStoryChange = this.onStoryChange.bind(this);\n\t\tthis.getKeybordH = this.getKeybordH.bind(this);\n//\t\tthis.checkvar = this.checkvar.bind(this);\n\t\tthis.closePopout = this.closePopout.bind(this);\n\t\tthis.closePopoutNewQ = this.closePopoutNewQ.bind(this);\n\t\tthis.set_catalog_search_default = this.set_catalog_search_default.bind(this);\n\t\t//this.setState({img_pic: img});\n\t    this.modalBack = () => {\n\t      this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\n\t    };\n\t}\n\t//FUNCTIONS++\n\n\tcheckFIO(fioin)\n\t{\n\t  \tvar fio = fioin;\n\t  \tfio = fio.replace(/\\s+/g, ' ');\n\t  \tfio = fio.replace('--', '-');\n\t  \tfio = fio.replace(' - -', ' -');\n\t  \tfio = fio.replace('- - ', '- ');\n\t  \tfio = fio.replace(/[^А-Яа-яЁёA-Za-z -]/g, '');\n\t  \tif (fioin.length<=30) return fio;\n\t}\n\tcheckphone(phonein)\n\t{\n\n\t\tvar phone_sav = phonein.replace(/[^\\d]/g, '');;\n\t\tvar output = '';\n\n        for (var i = 0; i < phone_sav.length; i++){\n\n\t\t\tvar curstr = phone_sav[i];\n\t\t\tif (phone_sav[0]==\"3\")\n\t\t\t{\n\t            //Belarus\n\t            //+375(29)898-66-00\n\t            if (i == 0){\n\t                output += \"+\";\n\t            } else if (i == 3){\n\t                output += ' (';\n\t            } else if (i == 5){\n\t                output += ') ';\n\t            } else if (i == 8){\n\t                output += \"-\";\n\t            } else if (i == 10) {\n\t            output += \"-\";\n\t            }else if (i == 12){\n\t                break;\n\t            } ;\n\t        } else\n\t        {\n\t            //Russia\n\t            if (i == 0){\n\t                output += \"+\";\n\t            } else if (i == 1){\n\t                output += ' (';\n\t            } else if (i == 4){\n\t                output += ') ';\n\t            } else if (i == 7){\n\t                output += \"-\";\n\t            } else if (i == 9) {\n\t            output += \"-\";\n\t            }else if (i == 11){\n\t                break;\n\t            } ;\n\t        }\n            output += curstr;\n        };\n        return output;\n\n\n  }\n\n\n    set_catalog_search_default()\n    {\n    \tthis.setState({categories_array_save:[]});\n    \tthis.setState({catalog_items_array_save:[]});\n    \tthis.setState({items_finished:false});\n    \tthis.setState({categories_sex_save:[]});\n    \tthis.setState({orgs_array_save:[]});\n    \tthis.setState({filters_array_global:[]});\n    \tthis.setState({search_str:''});\n\n    }\n\n\tconnect_to_bd(datain)\n\t{\n\t\t//connect bd++\n\t\tconst self = this;\n\n\n\t\tvar data = new FormData();\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\n\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\n\t\t\t    method: 'POST',\n\t\t\t    body: data\n\t\t\t  })\n\t\t  .then(\n\t\t    function(response) {\n\t\t      if (response.status !== 200) {\n\t\t        //console.log('response N: ', response);\n\t\t        return;\n\t\t      }\n\t\t      response.json().then(function(data) {\n\t\t      \t//console.log('debug categories_array: ', data);\n\t\t\t\tif (data.success==\"Y\")\n\t\t\t\t{\n                    //self.setState({ album_settings: data.album_settings })\n                    //console.log(\"debug data.dataout.client_orders_list\",data.dataout.client_orders_list);\n                    //self.setState({ LK_order_list: data.dataout.client_orders_list });\n                    try{\n\t                    \tif (data.del_puschase==\"success\")\n\t                    \t{\n\t\t\t\t\t\t\t\t//alert(\"del_puschase\");\n\t\t\t\t\t\t\t\tself.setState({ LK_purchases_array: data.purchases_list });\n\t\t\t\t\t\t\t\tthis.setState({pid:''});\n\t\t\t\t\t\t\t\tthis.setState({new_pid_name:''});\n\t                    \t}\n                    \t}\n                    catch(e){}\n\n                    try{if (data.dataout.client_orders_list) self.setState({ LK_order_list: data.dataout.client_orders_list })} catch(e){}\n                    try{if (data.dataout.orgs_orders_list) self.setState({ LK_org_order_list: data.dataout.orgs_orders_list })} catch(e){}\n                    try{if (data.dataout.purchases_list) self.setState({ LK_purchases_array: data.dataout.purchases_list })} catch(e){}\n                    try{if (data.album_settings) self.setState({ AE_main_array: data.album_settings })} catch(e){}\n                    try{if (data.OP_orders_list) self.setState({ OP_orders_list: data.OP_orders_list })} catch(e){}\n\n                    try{if (data.OEP_cancel_order) self.setState({ OEP_cancel_order: data.OEP_cancel_order })} catch(e){}\n\n\n                    try{\n                    \t\tif (data.get_order_info_client)\n                    \t\t{\n                    \t\t\tself.setState({ OEP_get_order_info_client_item: data.item })\n                    \t\t\tself.setState({ OEP_get_order_info_client_orginfo: data.orginfo })\n                    \t\t\tself.setState({ OEP_get_order_info_client_zakupkainfo: data.zakupkainfo })\n                    \t\t\tself.setState({ OEP_get_order_info_client_orderinfo: data.orderinfo })\n                    \t\t}\n                    //console.log(\"debug OEP_get_order_info_client\",data);\n                    } catch(e){}\n\n\n                    try\n                    {\n\t                   \tif(data.mess_to_display)\n\t                   \t{\n\t\t\t\t\t\tself.setState({ popout:\n\t\t\t\t\t\t      <Alert\n\t\t\t\t\t\t        actions={[{\n\t\t\t\t\t\t          title: 'OK',\n\t\t\t\t\t\t          autoclose: true,\n\t\t\t\t\t\t        }]}\n\t\t\t\t\t\t        onClose={self.closePopout}\n\t\t\t\t\t\t      >\n\t\t\t\t\t\t        <h2>{data.mess_to_display}</h2>\n\t\t\t\t\t\t      </Alert>\n\t\t\t\t\t\t    });\n\t                   \t }\n                    }\n                    catch(e) {}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tself.setState({ popout:\n\t\t\t\t\t      <Alert\n\t\t\t\t\t        actions={[{\n\t\t\t\t\t          title: 'OK',\n\t\t\t\t\t          autoclose: true,\n\t\t\t\t\t        }]}\n\t\t\t\t\t        onClose={self.closePopout}\n\t\t\t\t\t      >\n\t\t\t\t\t        <h2>Ошибка!</h2>\n\t\t\t\t\t        <h2>{data.errors}</h2>\n\t\t\t\t\t      </Alert>\n\t\t\t\t\t    });\n\t\t\t\t}\n\n\t\t      });\n\t\t    }\n\t\t  );\n\t\t//connect bd--\n\n\t}\n    getKeybordH()\n    {\n\n    \t//const innerHeight = window.innerHeight;\n    \t//alert(innerHeight);\n    \t//alert(e.endCoordinates.height);\n\t\t//document.body.style.height = innerHeight + 'px';\n\t\t//document.documentElement.style.height = innerHeight + 'px';\n\t\t//this.setState({keyboardH:innerHeight});\n\t\t//window.scrollTo(0, 0);\n    }\n\t  update_catalog_items_array_save(data)\n\t  {\n  \t this.setState({ catalog_items_array_save: data });\n  \t //console.log(\"debug 2this.props.app.state.catalog_items_array_save\",data);\n\t  }\n\t  connect_to_ajax_get_items_for_catalog(vkid,filters_array_global,count,search_string)\n\t  {\n\n\t\tthis.setState({count : count });\n\t\t//Проверка на подписку в группу++\n\t\tconst self = this;\n\t\tvar datain = {\n\t\t    action: \"get_items_for_catalog\",\n\t\t    count: count,\n\t\t    vkid: vkid,\n\t\t    filters_array_global: filters_array_global,\n\t\t    search_string:search_string\n\t\t};\n\n\t\tvar data = new FormData();\n\t\tdata.append( \"json\", JSON.stringify( datain ) )\n\n\n\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\n\t\t\t    method: 'POST',\n\t\t\t    body: data\n\t\t\t  })\n\t\t  .then(\n\t\t    function(response) {\n\t\t      if (response.status !== 200) {\n\t\t        //console.log('response N: ', response);\n\t\t        return;\n\t\t      }\n\t\t      response.json().then(function(data) {\n\t\t\t\tif (data.success==\"Y\")\n\t\t\t\t{\n\t\t\t\t\tself.setState({ catalog_items_array_save: data.catalog_items_array })\n\t\t\t\t\tself.setState({ items_finished : data.items_finished })\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tself.setState({ popout:\n\t\t\t\t\t      <Alert\n\t\t\t\t\t        actions={[{\n\t\t\t\t\t          title: 'OK',\n\t\t\t\t\t          autoclose: true,\n\t\t\t\t\t        }]}\n\t\t\t\t\t        onClose={self.closePopout}\n\t\t\t\t\t      >\n\t\t\t\t\t        <h2>Ошибка!</h2>\n\t\t\t\t\t        <h2>{data.errors}</h2>\n\t\t\t\t\t      </Alert>\n\t\t\t\t\t    });\n\t\t\t\t}\n\n\t\t      });\n\t\t    }\n\t\t  );\n\t\t//Проверка на подписку в группу--\n\n\n  }\n\n\thandleInputChange(event) {\n\t\t//alert(target.name);\n\t    const target = event.target;\n\t    const value = target.type === 'checkbox' ? target.checked : target.value;\n\t    const name = target.name;\n\n\t    this.setState({\n\t      [name]: value\n\t    });\n\t    //console.log(\"debug new_album\", this.state.new_pid_name);\n\t}\n\tadd_album_to_purchase(event)\n\t{\n\t\t//console.log(\"debug event\", event);\n\t\tthis.setState({ new_album: event.target.value });\n\t}\n\tview_active_img(url)\n\t{\n\t\t//console.log(\"debug event\", event);\n\t\tthis.setState({ active_img: url });\n\t\t//view_img\n\t\tthis.setState({ activePanel: 'view_img', activeStory: 'main' });\n\t\t//this.setActiveModal(MODAL_PAGE_IMAGE_VIEW);\n\t}\n\topenitempanel(id)\n\t{\n\n\t\t//console.log(\"debug activePanel\",this.state.activePanel);\n\t\t//console.log(\"debug activeStory\",this.state.activeStory);\n\t\tthis.setState({ activeitemid: id })\n\t\tthis.setState({ activePanel: 'ItemPanel', activeStory: this.state.activeStory })\n\t\t//this.setState({ activePanel: this.state.activePanel, activeStory: this.state.activeStory })\n\t}\n\topenPurchasesPanel()\n\t{\n\n\t\t//console.log(\"debug activePanel\",this.state.activePanel);\n\t\t//console.log(\"debug activeStory\",this.state.activeStory);\n\t\t//this.setState({ activeitemid: id })\n\t\tthis.props.app.setState({ activePanel: 'PurchasesPanel', activeStory: 'LkPanel' });\n\t\t//this.setState({ activePanel: this.state.activePanel, activeStory: this.state.activeStory })\n\t}\n\topenPurchasePanel(pid)\n\t{\n\n\t\t//console.log(\"debug activePanel\",this.state.activePanel);\n\t\t//console.log(\"debug activeStory\",this.state.activeStory);\n\t\tthis.setState({ pid: pid })\n\t\tthis.setState({ activePanel: 'PurchaseEdit', activeStory: 'LkPanel' });\n\t\t//this.setState({ activePanel: this.state.activePanel, activeStory: this.state.activeStory })\n\t}\n\n\topenitempanelCatalog(id,story,panel)\n\t{\n\t\t//ItemPanelFromCatalog Panel\n\t\tvar backstory = story;\n\t\tvar backpanel = panel;\n\t\tif (!backstory) backstory='CatalogPanelMain';\n\t\tif (!backpanel) backpanel='ItemPanelFromCatalog';\n\t\t//if (gotobackpanel)  backpanel=gotobackpanel;\n\n\n\t\tthis.setState({ activeitemid: id })\n\t\t//this.setState({ activePanel: this.state.activePanel, activeStory: this.state.activeStory })\n\t\tthis.setState({ activePanel: backpanel });\n\t\tthis.setState({ activeStory: backstory });\n\t}\n\n\tadd_album_to_purchase_save(pid,event)\n\t{\n\n\n        //alert(pid);\n        if (1)\n        {\n\t\t\tconst self = this;\n\t\t\t//console.log(\"debug activeStory\", self.state.activeStory);\n\t\t\t//console.log(\"debug pid\", pid);\n\t\t\t//self.setState({ activeStory: 'spinner'  });\n\t\t\tvar datain = {\n\t\t\t    action: \"add_album_to_purchase\",\n\t\t\t    vkid: self.state.vkid,\n\t\t\t    new_album: self.state.new_album,\n\t\t\t    pid: pid\n\n\t\t\t};\n\n\t\t\tvar data = new FormData();\n\t\t\tdata.append( \"json\", JSON.stringify( datain ) )\n\n\n\t\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\n\t\t\t\t    method: 'POST',\n\t\t\t\t    body: data\n\t\t\t\t  })\n\t\t\t  .then(\n\t\t\t    function(response) {\n\t\t\t      if (response.status !== 200) {\n\t\t\t        //console.log('response N: ', response);\n\t\t\t        return;\n\t\t\t      }\n\n\t\t\t      // Examine the text in the response\n\t\t\t      response.json().then(function(data) {\n\t\t\t        //console.log(\"toplist_array_aj\",data.top.vk);\n\n\n\t\t\t\t\t//console.log(\"response Y\",data.answers[0].var1);\n\n\t\t\t\t\tif (data.success==\"Y\")\n\t\t\t\t\t{\n\t        \t\t\t//self.setState({ answers: data.answers });\n\t        \t\t\tself.setState({pid: data.pid});\n\t        \t\t\tself.setState({PE_new_albums_array: data.urls});\n\t        \t\t\tself.setActiveModal(null);\n\t        \t\t\t//self.setState({ activeStory: 'top'  });\n\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t                \t//self.setState({ activeStory: 'top'  });\n\n\t                \tself.setState({errors: data.errors});\n\t                \t//MODAL_PAGE_ADD_PURCHASE\n        \t\t\t\t//MODAL_PAGE_ADD_ALBUM\n\t                \tself.setState({back_page_after_err: MODAL_PAGE_ADD_ALBUM});\n\n\t                \tself.setActiveModal(MODAL_CARD_ERRS);\n\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tself.setState({ popout:\n\t\t\t\t\t\t      <Alert\n\t\t\t\t\t\t        actions={[{\n\t\t\t\t\t\t          title: 'OK',\n\t\t\t\t\t\t          autoclose: true,\n\t\t\t\t\t\t        }]}\n\t\t\t\t\t\t        onClose={self.closePopout}\n\t\t\t\t\t\t      >\n\t\t\t\t\t\t        <h2>Ошибка!</h2>\n\t\t\t\t\t\t        <h2>{data.errors}</h2>\n\t\t\t\t\t\t      </Alert>\n\t\t\t\t\t\t    });\n\t\t\t\t\t\t    */\n\n\n\t\t\t\t\t}\n\n\n\t\t\t      });\n\t\t\t    }\n\t\t\t  );\n\t\t\t  //self.setState({updatetop : 'N'})\n\t\t  }\n\n\n\n\t}\n\n\tadd_new_purchase(event)\n\t{\n\t\tconst self = this;\n\t\t//console.log(\"debug pid\", self.state.new_pid_name);\n\t\tif ( self.state.new_pid_name === \"\" )\n\t\t{\n          \tself.setState({errors: 'Ошибка: пустое название закупки!'});\n        \t//MODAL_PAGE_ADD_PURCHASE\n\t\t\t//MODAL_PAGE_ADD_ALBUM\n        \tself.setState({back_page_after_err: MODAL_PAGE_ADD_PURCHASE });\n          \tthis.setActiveModal(MODAL_CARD_ERRS);\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\t//console.log(\"debug activeStory\", self.state.activeStory);\n\t\t\t//console.log(\"debug pid\", self.state.pid);\n\t\t\t//self.setState({ activeStory: 'spinner'  });\n\t\t\tvar datain = {\n\t\t\t    action: \"add_new_purchase\",\n\t\t\t    new_pid_name: self.state.new_pid_name,\n\t\t\t    vkid: self.state.vkid,\n\t\t\t    pid: self.state.pid,\n\t\t\t    org_sbor: self.state.org_sbor,\n\t\t\t    org_sbor_included: self.state.org_included,\n\t\t\t    descr: self.state.save_descr_pid,\n\n\t\t\t};\n\t\t\t//console.log(\"debug \",datain);\n\n\t\t\tvar data = new FormData();\n\t\t\tdata.append( \"json\", JSON.stringify( datain ) )\n\n\n\t\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\n\t\t\t\t    method: 'POST',\n\t\t\t\t    body: data\n\t\t\t\t  })\n\t\t\t  .then(\n\t\t\t    function(response) {\n\t\t\t      if (response.status !== 200) {\n\t\t\t        //console.log('response N: ', response);\n\t\t\t        return;\n\t\t\t      }\n\t\t\t      // Examine the text in the response\n\t\t\t      response.json().then(function(data) {\n\t\t\t\t\tif (data.success==\"Y\")\n\t\t\t\t\t{\n\t        \t\t\t//self.setState({ answers: data.answers });\n\t        \t\t\tself.setState({LK_purchases_array:data.purchases_list});\n\t        \t\t\tif (data.added_new_one==\"Y\") self.setState({new_pid_name:\"\"});\n\t        \t\t\t//self.setState({pid: data.pid});\n\t        \t\t\t//self.setState({ purchases_array: data.purchases })\n\t        \t\t\t//console.log('data.purchases2: ', data);\n\t        \t\t\t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\n\t        \t\t\t//self.setState({ purchases_array: purchases_list  })\n\t        \t\t\tself.setActiveModal(null);\n\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t                \tself.setState({errors: data.errors});\n\t                \tself.setState({back_page_after_err: MODAL_PAGE_ADD_PURCHASE });\n\t                \tself.setActiveModal(MODAL_CARD_ERRS);\n\t\t\t\t\t}\n\t\t\t      });\n\t\t\t    }\n\t\t\t  );\n        }\n\t}\n\n\tsetActiveModal(activeModal) {\n\n\t    //console.log(\"activeModal\", activeModal);\n\t    activeModal = activeModal || null;\n\t    let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\n\n\t    if (activeModal === null) {\n\t      modalHistory = [];\n\t    } else if (modalHistory.indexOf(activeModal) !== -1) {\n\t      modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\n\t    } else {\n\t      modalHistory.push(activeModal);\n\t    }\n\n\t    this.setState({\n\t      activeModal,\n\t      modalHistory\n\t    });\n\t};\n\n\n\tGoToURL(url)\n\t{\n\t\t//<a href=\"https://vk.com/public185027673\" target=\"_blank\">\n\t\t//window.location.assign('https://vk.com/public185027673');\n\t\t//window.open(url,'_blank');\n\t\twindow.location.replace(url,'_blank');\n\t\treturn null;\n\t}\n\n  \tclosePopout () {\n    \tthis.setState({ popout: null });\n  \t}\n  \tclosePopoutNewQ () {\n    \tthis.setState({ popout: null });\n    \tthis.setState({ seconds: 0 });\n    \t   //this.get_question();\n    \t//this.checkvar(\"timeout\");\n  \t}\n\n  \tcheckingroup_DEL(vkidch)\n  \t{\n\t\t//alert(vkidch);\n\t\tconst self = this;\n\t\tself.setState({useringroupcnt: self.state.useringroupcnt+1});\n\t\t//alert(self.state.useringroupcnt);\n\t\tif (self.state.useringroup===false && self.state.useringroupcnt>2)\n\t\t{\n\t\t\tself.setState({useringroupcnt: 1});\n\t\t\t//Проверка на подписку в группу++\n\t\t\tvar datain = {\n\t\t\t    action: \"check_user_in_group\",\n\t\t\t    vkid: vkidch,\n\t\t\t};\n\n\t\t\tvar data = new FormData();\n\t\t\tdata.append( \"json\", JSON.stringify( datain ) )\n\n\n\t\t\tfetch('https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php',{\n\t\t\t\t    method: 'POST',\n\t\t\t\t    body: data\n\t\t\t\t  })\n\t\t\t  .then(\n\t\t\t    function(response) {\n\t\t\t      if (response.status !== 200) {\n\t\t\t        //console.log('response N: ', response);\n\t\t\t        return;\n\t\t\t      }\n\t\t\t      response.json().then(function(data) {\n\t\t\t\t\tif (data.success==\"Y\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (data.in_group==\"N\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//184431774\n\t\t\t\t\t\t\tconnect.send(\"VKWebAppJoinGroup\", {\"group_id\": data.group_id});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.setState({useringroup: true});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tself.setState({ popout:\n\t\t\t\t\t\t      <Alert\n\t\t\t\t\t\t        actions={[{\n\t\t\t\t\t\t          title: 'OK',\n\t\t\t\t\t\t          autoclose: true,\n\t\t\t\t\t\t        }]}\n\t\t\t\t\t\t        onClose={self.closePopout}\n\t\t\t\t\t\t      >\n\t\t\t\t\t\t        <h2>Ошибка!</h2>\n\t\t\t\t\t\t        <h2>{data.errors}</h2>\n\t\t\t\t\t\t      </Alert>\n\t\t\t\t\t\t    });\n\t\t\t\t\t}\n\n\t\t\t      });\n\t\t\t    }\n\t\t\t  );\n\t\t\t//Проверка на подписку в группу--\n\t\t}\n\n  \t}\n  \tgettop(status)\n  \t{\n\n\n        if (status=='Y')\n        {\n\t\t\tconst self = this;\n\t\t\tself.setState({ activeStory: 'spinner'  });\n\t\t\tvar datain = {\n\t\t\t    action: \"get_top\",\n\t\t\t    vkid: this.state.vkid,\n\t\t\t    victorinacode: self.state.victorinacode\n\n\t\t\t};\n\n\t\t\tvar data = new FormData();\n\t\t\tdata.append( \"json\", JSON.stringify( datain ) )\n\n\n\t\t\tfetch('https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php',{\n\t\t\t\t    method: 'POST',\n\t\t\t\t    body: data\n\t\t\t\t  })\n\t\t\t  .then(\n\t\t\t    function(response) {\n\t\t\t      if (response.status !== 200) {\n\t\t\t        //console.log('response N: ', response);\n\t\t\t        return;\n\t\t\t      }\n\n\t\t\t      // Examine the text in the response\n\t\t\t      response.json().then(function(data) {\n\t\t\t        //console.log(\"toplist_array_aj\",data.top.vk);\n\n\n\t\t\t\t\t//console.log(\"response Y\",data.answers[0].var1);\n\n\t\t\t\t\tif (data.success==\"Y\")\n\t\t\t\t\t{\n\t        \t\t\t//self.setState({ answers: data.answers });\n\t        \t\t\tself.setState({top_list: data.top.vk});\n\t        \t\t\tself.setState({self_top: data.top.self_top});\n\t        \t\t\tself.setState({self_place: data.top.self_place});\n\t        \t\t\tself.setState({ activeStory: 'top'  });\n\n\t\t\t\t\t} else\n\t\t\t\t\t{\n\t                \tself.setState({ activeStory: 'top'  });\n\n\t\t\t\t\t\tself.setState({ popout:\n\t\t\t\t\t\t      <Alert\n\t\t\t\t\t\t        actions={[{\n\t\t\t\t\t\t          title: 'OK',\n\t\t\t\t\t\t          autoclose: true,\n\t\t\t\t\t\t        }]}\n\t\t\t\t\t\t        onClose={self.closePopout}\n\t\t\t\t\t\t      >\n\t\t\t\t\t\t        <h2>Ошибка!</h2>\n\t\t\t\t\t\t        <h2>{data.errors}</h2>\n\t\t\t\t\t\t      </Alert>\n\t\t\t\t\t\t    });\n\n\n\t\t\t\t\t}\n\n\n\t\t\t      });\n\t\t\t    }\n\t\t\t  );\n\t\t\t  self.setState({updatetop : 'N'})\n\t\t  }\n\n  \t}\n\n\tHrefVkUset(vkid)\n\t{\n\t\tvar userlink = 'https://vk.com/id' + vkid;\n\t\twindow.open(userlink,'_blank');\n\t}\n\n\tcheck_answer_recieved(v)\n\t{\n\n\t}\n\n\tcheckvar(v,e)\n\t{\n\n\t}\n\n\n\tonStoryChange (e)\n\t{\n\n        const self = this;\n\n        if (e.currentTarget.dataset.story===\"top\")\n        {\n        \t//self.gettop();\n        \t//self.setState({updatetop : 'Y'})\n        }\n        if (e.currentTarget.dataset.story===\"game\")\n        {\n        \t//self.gettop();\n        \t//self.checkingroup(self.state.vkid);\n        \t//if ( self.state.gamestarted === 1 ) self.setState({gamestarted : 2});\n        \t//if ( self.state.victorina!=='' && self.state.firststart === \"Y\" ) self.get_question();\n        \t//if (self.state.firststart===\"Y\" && self.state.question===\"\" && self.state.victorina!=='') self.get_question();\n        \t//self.setState({firststart : 'N'})\n        }\n\n\t\tthis.setState({ activeStory: e.currentTarget.dataset.story });\n\t\tif (e.currentTarget.dataset.story!=\"top\") window.scrollTo(0, 0)\n\t\tif (e.currentTarget.dataset.story==\"lk \") window.scrollTo(0, 0);\n\n\n\t}\n\n\tcheckInternet = () =>\n\t  {\n\n\t\tlet status = this.state.status;\n\t\tstatus = window.navigator.onLine ? 'online' : 'offline';\n\t\tthis.setState({ status: status });\n\t\tif (status === 'offline')\n\t\t{\n\t\t\tthis.setState({ activePanel: 'off', activeStory: 'off' })\n\t\t}\n\t\telse if (status === 'online')\n\t\t{\n\t\t\tif (this.state.activePanel === 'off')\n\t\t\t{\n\t\t\t\t//тут перемещение на главную страницу\n\t\t\t\tthis.setState({ activePanel: 'main', activeStory: 'main' })\n\t\t\t}\n\t\t}\n\n\t  }\n\n\n\t  menu (e)\n\t\t{\n\t\t\t//перехват системной кнопки назад++\n\t\t\tconst self = this;\n\t\t\t//console.log(\"e.state\",e.state);\n\n\t\t\tif (this.state.activeStory!==\"main\")\n\t\t\t{\n\n\n\t\t\t\tif (this.state.activeStory===\"rules\")\n\t\t\t\t{\n\t\t\t\t\tself.setState({ activeStory: 'settings' });\n\t\t\t\t\t//self.setState({ activePanel: 'settings', activeStory: 'settings' , search: '' });\n\t\t\t\t\twindow.history.pushState({ panel: 'settings'},`settings`);\n\t\t\t\t}\n\t\t\t\telse if (this.state.activeStory===\"mission\")\n\t\t\t\t{\n\t\t\t\t\tself.setState({ activeStory: 'settings' });\n\t\t\t\t\twindow.history.pushState({ panel: 'settings'},`settings`);\n\t\t\t\t}\n\t\t\t\telse if (e.state)\n\t\t\t\t{\n\t\t\t\t\t//alert(e.state.panel);\n\t\t\t\t\tself.setState({ activePanel: e.state.panel, activeStory: e.state.panel });\n\t\t\t\t\twindow.history.pushState({ panel: e.state.panel},`e.state.panel`);\n\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tself.setState({ activePanel: 'main', activeStory: 'main' , search: '' });\n\t\t\t\t\twindow.history.pushState({ panel: 'main'},`main`);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t    }\n\n\t\t    //перехват системной кнопки назад--\n\t}\n\n\n\n\n\tcomponentDidMount() {\n\t\tconst self = this;\n\t\tconst Storynow = this.state.activeStory;\n\t\tself.setState({ activeStory: 'spinner'  });\n\t    //let timeLeftVar = this.secondsToTime(this.state.seconds);\n\t    let timeLeftVar = (this.state.seconds);\n\t    this.setState({ time: timeLeftVar });\n\n\t\twindow.setInterval(this.checkInternet, 600);\n\t\t//перехват системной кнопки назад++\n\n\t\twindow.addEventListener('popstate', e => e.preventDefault() & self.menu(e));\n\t\twindow.history.pushState( {panel: 'main'}, `main` );\n\n\t    //перехват системной кнопки назад--\n\n\n\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\t//добавление темной темы++\n\t\t\t\tcase 'VKWebAppUpdateConfig':\n\t\t\t\t\t//this.setState({ theme: e.detail.data.scheme });\n\t\t\t\t\tlet schemeAttribute = document.createAttribute('scheme');\n\t\t\t\t\tschemeAttribute.value = e.detail.data.scheme ? e.detail.data.scheme : 'client_light';\n\t\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t\t\tbreak;\n\t\t\t\t//добавление темной темы--\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tself.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\t//this.props.app.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\tself.setState({ vkid: e.detail.data.id });\n\t\t\t        self.setState({ fetchedUserName: e.detail.data.first_name + \" \" + e.detail.data.last_name });\n\t\t            self.setState({ fetchedUserPhoto: e.detail.data.photo_100 });\n\n\t\t\t\t\t//self.checkvar(\"start\");\n\t\t\t\t\t//Проверка на подписку в группу++\n\t\t\t\t\tvar datain = {\n\t\t\t\t\t    action: \"check_user_in_group\",\n\t\t\t\t\t    vkid: e.detail.data.id,\n\t\t\t\t\t};\n\n\t\t\t\t\tvar data = new FormData();\n\t\t\t\t\tdata.append( \"json\", JSON.stringify( datain ) )\n\n\n\t\t\t\t\tfetch('https://zakupi.club/telegram_bot/zakupi_helper/ajax_zhelper.php',{\n\t\t\t\t\t\t    method: 'POST',\n\t\t\t\t\t\t    body: data\n\t\t\t\t\t\t  })\n\t\t\t\t\t  .then(\n\t\t\t\t\t    function(response) {\n\t\t\t\t\t      if (response.status !== 200) {\n\t\t\t\t\t        //console.log('response N: ', response);\n\t\t\t\t\t        return;\n\t\t\t\t\t      }\n\t\t\t\t\t      response.json().then(function(data) {\n\t\t\t\t\t      \tself.setState({ activeStory: Storynow  });\n\t\t\t\t\t\t\tif (data.success==\"Y\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (data.in_group==\"N\")\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//184431774\n\t\t\t\t\t\t\t\t\tconnect.send(\"VKWebAppJoinGroup\", {\"group_id\": data.group_id});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tself.setState({useringroup: true});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tself.setState({ didmountdone: true })\n\t\t\t\t\t\t\t\t//self.setState({ purchases_array: data.purchases })\n\t\t\t\t\t\t\t\tself.setState({ hot_items_array: data.dataout.hot_items })\n\t\t\t\t\t\t\t\t//self.setState({ order_list: data.dataout.orders_list })\n\n\n\n\n\t\t\t        \t\t\t//const  purchases_list = data.purchases.map((value, i) => {return ( <CellButton key={i} onClick={(e) => self.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\n\t\t\t        \t\t\t//self.setState({ purchases_array: purchases_list  })\n\t\t\t        \t\t\t//console.log('datain_array: ', self.state.datain_array);\n\n\n\n\n\n\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tself.setState({ popout:\n\t\t\t\t\t\t\t\t      <Alert\n\t\t\t\t\t\t\t\t        actions={[{\n\t\t\t\t\t\t\t\t          title: 'OK',\n\t\t\t\t\t\t\t\t          autoclose: true,\n\t\t\t\t\t\t\t\t        }]}\n\t\t\t\t\t\t\t\t        onClose={self.closePopout}\n\t\t\t\t\t\t\t\t      >\n\t\t\t\t\t\t\t\t        <h2>Ошибка!</h2>\n\t\t\t\t\t\t\t\t        <h2>{data.errors}</h2>\n\t\t\t\t\t\t\t\t      </Alert>\n\t\t\t\t\t\t\t\t    });\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t      });\n\t\t\t\t\t    }\n\t\t\t\t\t  );\n\t\t\t\t\t//Проверка на подписку в группу--\n\t\t\t\t\t//self.get_question(\"start\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//console.log(e.detail.type);\n\t\t\t}\n\t\t});\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t\t//connect.send(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": 1, \"key\": \"dBuBKe1kFcdemzB\"});\n\t\t//184431774\n\n\t\t//connect.send(\"VKWebAppAllowMessagesFromGroup\", {\"group_id\": 1, \"key\": \"dBuBKe1kFcdemzB\"});\n\t}\n\n\tgo = (e) => {\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to })\n\t\t//перехват системной кнопки назад++\n\t\t//console.log(\"e.currentTarget.\",e.currentTarget.dataset.to);\n\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to, activeStory: e.currentTarget.dataset.to});\n\t\twindow.history.pushState( {panel: e.currentTarget.dataset.to }, `${e.currentTarget.dataset.to}` );\n\n\t\t//перехват системной кнопки назад--\n\n\t};\n\t//const [activePanel, setActivePanel] = useState('main');\n\tgopanel2 = (e) => {\n\t\tuseState(e.currentTarget.dataset.to);\n\t};\n\tgopanel(panel)\n\t{\n\t\tuseState(panel);\n\t};\n\n\n\trender() {\n\t\t//const answers_array = Array.from(this.state.answers);\n\t\t//console.log(\"answers_array\",answers_array);\n\t\t//var answ1 = JSON.parse(answers_array[0]);\n\t\t//answers_array[0].map( value => console.log(value.var1));\n\t\t//const listItems =\n\t\t//const toplist_array = Array.from(this.state.top_list);\n\t\t//const purchases_array = Array.from(this.state.purchases_array);\n\t\t//const new_albums_array = []; //Array.from(this.state.new_albums_array);\n\t\tconst hot_items_array = Array.from(this.state.hot_items_array);\n\t\tconst hot_items_array2 = [];\n\t\t  for (let idx = 0; idx < hot_items_array.length; idx++ )\n\t\t  {\n          \thot_items_array2.push(\n\n\t\t\t\t<div key={idx} style={{ padding: 5 }}>\n\t\t\t\t    <a onClick={(e) => this.openitempanel(hot_items_array[idx].id, e)} >\n\t\t\t\t    \t<img className=\"cover\" src={hot_items_array[idx].photo_url_catalog}/>\n\t\t\t\t    </a>\n                    <br/>\n\t\t\t\t    <span className=\"item-preview\">{hot_items_array[idx].name}<br/></span>\n\t\t\t\t    <span className=\"price-preview\">{hot_items_array[idx].price}</span>\n\n\t\t\t\t</div>\n\n          \t);\n\t\t  }\n\n\n\n/*\n\t\t     hot_items_array2.push(\n\t                    \t\t<div className=\"grid__xs-full-4 \">\n\t\t\t\t\t\t\t\t    <div className=\"c-preview\">\n\n\t\t\t\t\t\t\t\t            <a onClick={(e) => this.openitempanel(hot_items_array[idx].id, e)} className=\"c-preview__img\">\n\t\t\t\t\t\t\t\t                <img src={hot_items_array[idx].photo_url_catalog}/>\n\t\t\t\t\t\t\t\t            </a>\n\t\t\t\t\t\t\t     \t\t\t<Cell\n\t\t\t\t\t\t\t     \t\t\tstyle={{display:\"none\"}}\n\t\t\t\t\t\t\t     \t\t\tkey={idx}\n\t\t\t\t\t\t\t     \t\t\tbottomContent={<Button>Купить</Button>}\n\t\t\t\t\t\t\t     \t\t\tphoto={hot_items_array[idx].photo_url_catalog}\n\t\t\t\t\t\t\t     \t\t\t//description={hot_items_array[idx].price}\n\t\t\t\t\t\t\t     \t\t\t//before={<Avatar src={hot_items_array[idx].photo_url_catalog} size={80}/>}\n\t\t\t\t\t\t\t     \t\t\tsize=\"l\"\n\t\t\t\t\t\t\t     \t\t\tonClick={(e) => this.openitempanel(hot_items_array[idx].id, e)}\n\t\t\t\t\t\t\t     \t\t\t>{//hot_items_array[idx].name\n\t\t\t\t\t\t\t     \t\t\t}</Cell>\n\n\t\t\t\t\t\t\t\t            <Div>\n\t\t\t\t\t\t\t\t\t            <Div style={{display: 'flex'}} style={{display:\"none\"}}>\n\t\t\t\t\t\t\t\t\t            <span className=\"c-preview__title\">\n\t\t\t\t\t\t\t\t\t            \t{hot_items_array[idx].name}\n\t\t\t\t\t\t\t\t\t            </span>\n\t\t\t\t\t\t\t\t\t            </Div>\n\n\n\t\t\t\t\t\t\t\t            <div className=\"c-preview__text\">\n\t\t\t\t\t\t\t\t\t\t         <Cell before={<Icon24MoneyCircle />} description={hot_items_array[idx].price}\n\t\t\t\t\t\t\t\t\t\t         onClick={(e) => this.openitempanel(hot_items_array[idx].id, e)}\n\t\t\t\t\t\t\t\t\t\t         >\n\t\t\t\t\t\t\t\t\t\t         \t\t{hot_items_array[idx].name\n\t\t\t\t\t\t\t\t\t\t         \t\t}\n\t\t\t\t\t\t\t\t\t\t         </Cell>\n\n\t\t\t\t\t\t\t\t\t\t\t\t{//hot_items_array[idx].descr\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t            <span style={{display:\"none\"}} className=\"c-preview__date\">\n\t\t\t\t\t\t\t\t\t            \t{hot_items_array[idx].price}\n\t\t\t\t\t\t\t\t\t            </span>\n\n\t\t\t\t\t\t\t\t     \t\t\t<Cell\n\t\t\t\t\t\t\t\t     \t\t\tkey={idx}\n\t\t\t\t\t\t\t\t     \t\t\tstyle={{display:\"none\"}}\n\t\t\t\t\t\t\t\t     \t\t\t//bottomContent={<Button>Купить</Button>}\n\t\t\t\t\t\t\t\t     \t\t\t//stretched style={{ marginRight: 8 }}>\n\n\t\t\t\t\t\t\t\t     \t\t\tsize=\"l\"\n\t\t\t\t\t\t\t\t     \t\t\t>\n\t\t\t\t\t\t\t\t     \t\t\t{hot_items_array[idx].price}\n\t\t\t\t\t\t\t\t     \t\t\t</Cell>\n\t\t\t\t\t\t\t\t            \t     <Div style={{display: 'flex'}}>\n\t\t\t\t\t\t\t\t\t\t\t\t       <Button\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={(e) => this.openitempanel(hot_items_array[idx].id, e)}\n\t\t\t\t\t\t\t\t\t\t\t\t       \tsize=\"l\" stretched style={{ marginRight: 8 }}>\n\t\t\t\t\t\t\t\t\t\t\t\t       \tКупить\n\t\t\t\t\t\t\t\t\t\t\t\t       \t</Button>\n\n\t\t\t\t\t\t\t\t\t\t\t\t     </Div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\n*/\n\n\t\t//console.log(\"hot_items_array2\",hot_items_array2);\n\t\t/*\n\t\t     \t\t<Div style={{display: 'flex'}}>\n\t\t     \t\t\t<Cell\n\t\t     \t\t\tkey={idx}\n\t\t     \t\t\tphoto={hot_items_array[idx].photo_url_catalog}\n\t\t     \t\t\tdescription={hot_items_array[idx].price}\n\t\t     \t\t\tbottomContent={<Button>BUY</Button>}\n\t\t     \t\t\tbefore={<Avatar src={hot_items_array[idx].photo_url_catalog} size={80}/>}\n\t\t     \t\t\tsize=\"l\"\n\t\t     \t\t\tonClick={(e) => this.openitempanel(hot_items_array[idx].id, e)}\n\t\t     \t\t\t>{hot_items_array[idx].name}</Cell>\n\t\t     \t\t\t<Cell\n\t\t     \t\t\tkey={idx+1}\n\t\t     \t\t\tphoto={hot_items_array[idx+1].photo_url_catalog}\n\t\t     \t\t\tdescription={hot_items_array[idx+1].price}\n\t\t     \t\t\tbottomContent={<Button>BUY</Button>}\n\t\t     \t\t\tbefore={<Avatar src={hot_items_array[idx+1].photo_url_catalog} size={80}/>}\n\t\t     \t\t\tsize=\"l\"\n\t\t     \t\t\tonClick={(e) => this.openitempanel(hot_items_array[idx+1].id, e)}\n\t\t     \t\t\t>{hot_items_array[idx+1].name}</Cell>\n\t\t     \t\t</Div>);\n\t\t*/\n\n\n\t\t//const  purchases_list = purchases_array.map((value, i) => {return ( <CellButton key={i} onClick={(e) => this.manage_purchase(value.pid, e)}>{value.name}</CellButton> ) } )\n\n\t\t//const toplist_array = Array.from(this.state.top_list);\n\t\t//self_raiting\n\tconst modal_add_zakupka = (\n\n      <ModalRoot activeModal={this.state.activeModal}>\n        <ModalPage\n          id={MODAL_PAGE_EDIT_ORG_SBOR}\n          onClose={this.modalBack}\n          header={\n            <ModalPageHeader\n              left={IS_PLATFORM_ANDROID && <HeaderButton onClick={this.modalBack}><Icon24Cancel /></HeaderButton>}\n              right={<HeaderButton onClick={this.add_new_purchase}>{IS_PLATFORM_IOS ? 'Готово' : <Icon24Done />}</HeaderButton>}\n            >\n              Настройка организационного сбора\n            </ModalPageHeader>\n          }\n        >\n          <FormLayout>\n            <FormLayoutGroup top=\"Организационный сбор\">\n              <Cell>\n\t              <Input placeholder=\"Организационный сбор %\"\n\t\t\t\t\tname=\"org_sbor\"\n\t\t\t\t\tvalue={this.state.org_sbor}\n\t\t\t\t\tonChange={this.handleInputChange}\n\t              />\n              </Cell>\n\n              <Cell>\n\t              <Checkbox\n\t              \tchecked={ this.state.org_included }\n\t\t\t\t\tname=\"org_included\"\n\t\t\t\t\tvalue={this.state.org_included}\n\t\t\t\t\tonChange={this.handleInputChange}\n\t              >\n\t              Орг. сбор включен в цену: <b>{ this.state.org_included ? \"Да\":\"Нет\"}</b>\n\t              </Checkbox>\n\t          </Cell>\n            </FormLayoutGroup>\n            <Button level=\"secondary\" onClick={this.add_new_purchase} size=\"xl\">Сохранить</Button>\n\n          </FormLayout>\n          <Div style={{ height: 90, padding:0 }}></Div>\n        </ModalPage>\n        <ModalPage\n          id={MODAL_PAGE_EDIT_DESCR_PID}\n\n\n\n          onClose={this.modalBack}\n          header={\n            <ModalPageHeader\n              left={IS_PLATFORM_ANDROID && <HeaderButton onClick={this.modalBack}><Icon24Cancel /></HeaderButton>}\n              right={<HeaderButton onClick={this.add_new_purchase}>{IS_PLATFORM_IOS ? 'Готово' : <Icon24Done />}</HeaderButton>}\n            >\n              Описание закупки\n            </ModalPageHeader>\n          }\n        >\n          <Textarea\n\t\t\tname=\"save_descr_pid\"\n\t\t\tvalue={this.state.save_descr_pid}\n\t\t\tonChange={this.handleInputChange}\n          \t//defaultValue={ this.state.save_descr_pid}\n          \t>\n          \t{ this.state.save_descr_pid}\n          \t</Textarea>\n          <Div style={{ height: this.state.keyboardH, padding:0 }}></Div>\n        </ModalPage>\n\n\n  \t    <ModalPage\n          id={MODAL_PAGE_ADD_PURCHASE}\n          onClose={this.modalBack}\n          header={\n            <ModalPageHeader\n              left={IS_PLATFORM_ANDROID && <HeaderButton onClick={this.modalBack}><Icon24Cancel /></HeaderButton>}\n              right={<HeaderButton onClick={this.add_new_purchase}>{IS_PLATFORM_IOS ? 'Готово' : <Icon24Done />}</HeaderButton>}\n            >\n              {this.state.pid ? 'Введите название закупки' : 'Добавление закупки'}\n            </ModalPageHeader>\n          }\n        >\n          <FormLayout>\n            <FormLayoutGroup top=\"Закупка\">\n              <Input placeholder=\"Название закупки\"\n\t\t\t\tname=\"new_pid_name\"\n\t\t\t\t//value={this.state.new_pid_name}\n\t\t\t\t//,this.modalBack\n\t\t\t\tvalue={this.state.new_pid_name}\n\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t//onFocus={this.getKeybordH}\n\n              />\n\n\n            </FormLayoutGroup>\n\n            <Button level=\"secondary\" onClick={this.add_new_purchase} size=\"xl\">Сохранить</Button>\n          </FormLayout>\n\n          <Div style={{ height: this.state.keyboardH, padding:0 }}></Div>\n        </ModalPage>\n\n        <ModalPage\n          id=\"Filter_Catalog\"\n          onClose={this.modalBack}\n          header={\n            <ModalPageHeader\n              left={IS_PLATFORM_ANDROID && <HeaderButton onClick={this.modalBack}><Icon24Cancel /></HeaderButton>}\n              right={<HeaderButton onClick={this.modalBack}>{IS_PLATFORM_IOS ? 'Готово' : <Icon24Done />}</HeaderButton>}\n            >\n              Фильтр каталога\n            </ModalPageHeader>\n          }\n        >\n          <FormLayout>\n            <FormLayoutGroup top=\"Организационный сбор\">\n              <Cell>\n\t              <Input placeholder=\"Организационный сбор %\"\n\t\t\t\t\tname=\"org_sbor\"\n\t\t\t\t\tvalue={this.state.org_sbor}\n\t\t\t\t\tonChange={this.handleInputChange}\n\t              />\n              </Cell>\n              <Cell>\n\t              <Checkbox\n\t              \tchecked={ this.state.org_included }\n\t\t\t\t\tname=\"org_included\"\n\t\t\t\t\tvalue={this.state.org_included}\n\t\t\t\t\tonChange={this.handleInputChange}\n\t              >\n\t              Орг. сбор включен в цену: <b>{ this.state.org_included ? \"Да\":\"Нет\"}</b>\n\t              </Checkbox>\n\t          </Cell>\n            </FormLayoutGroup>\n            <Button level=\"secondary\" onClick={this.add_new_purchase} size=\"xl\">Сохранить</Button>\n\n          </FormLayout>\n        </ModalPage>\n\n\n\n        <ModalPage\n          id={MODAL_PAGE_ADD_ALBUM}\n          header={\n            <ModalPageHeader\n              left={IS_PLATFORM_ANDROID && <HeaderButton onClick={this.modalBack}><Icon24Cancel /></HeaderButton>}\n              right={<HeaderButton onClick={(e) => this.add_album_to_purchase_save(this.state.pid)}>{IS_PLATFORM_IOS ? 'Готово' : <Icon24Done />}</HeaderButton>}\n            >\n              Ссылка на альбом\n            </ModalPageHeader>\n          }\n          onClose={this.modalBack}\n          settlingHeight={80}\n        >\n          <FormLayout>\n\n            <FormLayoutGroup top=\"Альбом\">\n              <Input placeholder=\"Скопируйте сюда ссылку на альбом\"\n\t\t\t\tvalue={this.state.new_album}\n\t\t\t\tonChange={this.add_album_to_purchase}\n\n              />\n\n            </FormLayoutGroup>\n\n            <Button level=\"secondary\" onClick={ (e) => this.add_album_to_purchase_save(this.state.pid) } size=\"xl\">Сохранить</Button>\n\n          </FormLayout>\n          <Div style={{ height: this.state.keyboardH, padding:0 }}></Div>\n        </ModalPage>\n\n        <ModalPage\n          id={MODAL_PAGE_IMAGE_VIEW}\n          header={\n            <ModalPageHeader\n              right={<HeaderButton onClick={this.modalBack}>{IS_PLATFORM_IOS ? 'Ok' : <Icon24Done />}</HeaderButton>}\n            >\n              Просмотр картинки\n            </ModalPageHeader>\n          }\n          onClose={this.modalBack}\n          //settlingHeight={80}\n        >\n          <Div style={{textAlign: 'center'}}>\n              <img src={this.state.active_img}/>\n          </Div>\n        </ModalPage>\n\n\n\n\n        <ModalCard\n          id={MODAL_CARD_ERRS}\n          onClose={() => this.setActiveModal(null)}\n          icon={<Avatar type=\"app\" size={72}> <Icon56InfoOutline /> </Avatar>}\n          title=\"Ошибка\"\n          caption={this.state.errors}\n          actions={[{\n            title: 'Ok',\n            type: 'primary',\n            action: () => {\n              this.setActiveModal(this.state.back_page_after_err);\n            }\n          }\n          ]}\n        />\n\n\n\n        <ModalCard\n          id={MODAL_CARD_NOTIFICATIONS}\n          onClose={() => this.setActiveModal(null)}\n          icon={<Icon56NotificationOutline />}\n          title=\"Приложение запрашивает разрешение на отправку Вам уведомлений\"\n          actions={[{\n            title: 'Запретить',\n            type: 'secondary',\n            action: () => this.setActiveModal(MODAL_CARD_CHAT_INVITE)\n          }, {\n            title: 'Разрешить',\n            type: 'primary',\n            action: () => this.setActiveModal(MODAL_CARD_CHAT_INVITE)\n          }]}\n        />\n\n\n      </ModalRoot>\n    );\n\n\t\treturn (\n\n\t      <Epic activeStory={this.state.activeStory} tabbar={\n\t      \tthis.state.activeStory !==\"oferta\" && this.state.activeStory !==\"off\" &&\n\t        <Tabbar>\n\t          <TabbarItem\n\t            onClick={()=>this.setState({ activePanel: 'main', activeStory: 'main' })}\n\t            selected={this.state.activeStory === 'main'}\n\t            data-story=\"main\"\n\t            text=\"Главная\"\n\t          ><Icon24Home /></TabbarItem>\n\t          <TabbarItem\n\t            onClick={()=>this.setState({ activePanel: 'CatalogPanelMain', activeStory: 'CatalogPanelMain' })}\n\t            selected={this.state.activeStory === 'CatalogPanelMain'}\n\t            data-story=\"CatalogPanelMain\"\n\t            //label=\"12\"\n\t            text=\"Каталог\"\n\t          ><Icon24Search /></TabbarItem>\n\t          <TabbarItem\n\t            onClick={()=>this.setState({ activePanel: 'LkPanel', activeStory: 'LkPanel' })} //{this.onStoryChange}\n\t            selected={this.state.activeStory === 'LkPanel'}\n\t            data-story=\"LkPanel\"\n\t            //label=\"12\"\n\t            text=\"Лич каб\"\n\t          ><Icon24Market /></TabbarItem>\n\n\t          <TabbarItem\n\t            onClick={this.onStoryChange}\n\t            selected={this.state.activeStory === 'settings'}\n\t            data-story=\"settings\"\n\t            //label=\"12\"\n\t            text=\"О сервисе\"\n\t          ><Icon24Help /></TabbarItem>\n\n\n\n\n\n\t        </Tabbar>\n\t      }>\n\n\n\t\t\t<View id=\"spinner\" activePanel=\"spinner\" >\n\t\t\t  <Panel id=\"spinner\">\n\t\t\t    <PanelHeader>Загрузка данных...</PanelHeader>\n\t\t\t    <div style={{ display: 'flex', alignItems: 'center', flexDirection: 'column' }}>\n\t\t\t      <Spinner size=\"large\" style={{ marginTop: 20 }} />\n\t\t\t    </div>\n\t\t\t  </Panel>\n\t\t\t</View>\n\n\t\t\t<View id=\"mission\" activePanel=\"mission\" >\n\t\t\t  <Panel id=\"mission\">\n\t            <PanelHeader\n\t\t\t\tleft={<HeaderButton onClick={ this.onStoryChange } selected={this.state.activeStory === 'settings'} data-story=\"settings\">\n\t\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t\t\t\t\t</HeaderButton>}\n\t            >\n\n\t\t\t    Миссия сервиса</PanelHeader>\n\t\t\t\t<Group title=\"Миссия сервиса\">\n\t\t\t        <Div>\n\t\t\t          <InfoRow title=\"\">\n\t\t\t\t\t\tCервис \"СП по России Zakupi.club\" — это сервис для пользоватлей и организаторов, которые активно пользуются совместными покупками.\n\t\t\t\t\t\tДанный сервис направлен на удобство и безопасность взаимодействия пользователя и организатора закупок.\n\t\t\t          </InfoRow>\n\t\t\t        </Div>\n\t\t\t\t</Group>\n\n\t\t\t  </Panel>\n\t\t\t</View>\n\n\t\t\t<View id=\"settings\" activePanel=\"settings\" >\n\n\t\t\t  <Panel id=\"settings\">\n\t\t\t    <PanelHeader>Cервис</PanelHeader>\n    \t\t\t<Group title=\"Сервис\">\n\t\t\t     \t<List>\n\n\n\t\t\t\t         <Cell before={<Icon24Users />} description=\"Zakupi.club\"\n\n\t\t\t\t         href=\"https://vk.com/zakupiclubru\"\n\t\t\t\t         target=\"_blank\"\n\t\t\t\t         >\n\n\t\t\t\t         \t\tНаша группа ВКонтакте\n\t\t\t\t         </Cell>\n\n\t\t\t\t         <Cell before={<Icon24Article />} description=\"Правила\" onClick={ (e) => this.setState({ activeStory: 'rules'  })}\n\t\t\t\t         >\n\t\t\t\t         \tПравила\n\t\t\t\t         </Cell>\n\n\t\t\t\t         <Cell before={<Icon24Education />} description=\"Миссия\" onClick={ (e) => this.setState({ activeStory: 'mission'  })}\n\t\t\t\t         >\n\t\t\t\t         \tМиссия сервиса\n\t\t\t\t         </Cell>\n\n\t\t\t\t         <Cell before={<Icon24Discussions />} description=\"Сысоев Алексей\"\n\t\t\t\t         href=\"https://vk.com/im?media=&sel=142227760\"\n\t\t\t\t         target=\"_blank\"\n\t\t\t\t         >\n\t\t\t\t         \tНаписать автору\n\t\t\t\t         </Cell>\n\t\t\t\t         <Cell before={<Icon24Settings />} description=\"1.1.05\"\n\t\t\t\t         >\n\t\t\t\t         \tВерсия ПО\n\t\t\t\t         </Cell>\n\n\n\t\t\t     \t</List>\n\t\t\t\t</Group>\n\n\n\t\t\t  </Panel>\n\t\t\t</View>\n\n\t\t\t<View id=\"rules\" activePanel=\"rules\" >\n\t\t\t  <Panel id=\"rules\">\n\t            <PanelHeader\n\t\t\t\tleft={<HeaderButton onClick={ this.onStoryChange } selected={this.state.activeStory === 'settings'} data-story=\"settings\">\n\t\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t\t\t\t\t</HeaderButton>}\n\t            >\n\n\t\t\t    Правила </PanelHeader>\n\t\t\t\t<Group title=\"Правила\">\n\t\t\t        <Div>\n\t\t\t          <InfoRow title=\"\">\n\t\t\t    \t\t Правила пользования сервисом совместных покупок Zakupi.club:<br/>\n\t\t\t\t\t\t\tДобро пожаловать в Совместные покупки Zakupi.club! - это клуб по интересам, социальная сеть совместных покупок - ресурс, который помогает вам совершать покупки в сети интернет по наиболее выгодным условиям\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<a href=\"https://zakupi.club/docs/bottom/o_zakupi/rules.php\" target=\"_blank\">Полный текст правил</a>\n\n\t\t\t          </InfoRow>\n\t\t\t        </Div>\n\t\t\t\t</Group>\n\n\t\t\t  </Panel>\n\t\t\t</View>\n\n\n\t\t\t<View id=\"orders_del\" activePanel=\"orders\" >\n\t\t\t  <Panel id=\"orders_del\">\n\t            <PanelHeader\n\t\t\t\tleft={<HeaderButton onClick={ this.onStoryChange } selected={this.state.activeStory === 'main'} data-story=\"main\">\n\t\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t\t\t\t\t</HeaderButton>}\n\t            >\n\n\t\t\t    Заказы</PanelHeader>\n\t\t\t    <Group title=\"Управление\">\n\t\t\t      <CellButton before={<Icon24Add />}>Добавить заказ</CellButton>\n\t\t\t    </Group>\n\n\t\t\t    <Group title=\"Список заказов\">\n\t\t\t      <CellButton>Заказ №19087</CellButton>\n\t\t\t      <CellButton>Заказ №19088</CellButton>\n\t\t\t      <CellButton>Заказ №19089</CellButton>\n\t\t\t    </Group>\n\n\t\t\t  </Panel>\n\t\t\t</View>\n\t\t\t<View id=\"CatalogPanelMain\" modal={modal_add_zakupka} activePanel={this.state.activePanel}  popout={this.state.popout} >\n\n\t\t\t  <CatalogPanel id='CatalogPanelMain' go={(e) => this.setState({ activePanel: \"CatalogPanelMain\"}) }  app={this} popout={this.state.popout}/>\n              <ItemPanel id='ItemPanelFromCatalog' go={(e) => this.setState({ activePanel: \"CatalogPanelMain\"}) } app={this} popout={this.state.popout}/>\n              <Imgview id='Imgview' go={(e) => this.setState({ activePanel: \"CatalogPanelMain\"}) } app={this} popout={this.state.popout}/>\n              <OrderPanel id='OrderPanel' go={(e) => this.setState({ activePanel: \"CatalogPanelMain\"}) } app={this} popout={this.state.popout}/>\n              <Filterpanel id='Filterpanel' go={(e) => this.setState({ activePanel: \"CatalogPanelMain\"}) } app={this} popout={this.state.popout}/>\n              <SortPanel id='SortPanel' go={(e) => this.setState({ activePanel: \"CatalogPanelMain\"}) } app={this} popout={this.state.popout}/>\n\n\n\n\t\t\t</View>\n\n\n\t\t\t<View id=\"main\" modal={modal_add_zakupka}  activePanel={this.state.activePanel} popout={this.state.popout}>\n\t\t\t  {//console.log(\"activePanel\",this)\n\t\t\t  //\n\t\t\t  //<ItemPanel id='ItemPanelFromCatalog' go={(e) => this.setState({ activePanel: \"CatalogPanelMain\"}) } app={this}/>\n\t\t\t  }\n\n              <ItemPanel id='ItemPanel' go={(e) => this.setState({ activePanel: \"main\"}) } app={this} popout={this.state.popout}/>\n              <Imgview id='Imgview' go={(e) => this.setState({ activePanel: \"main\"}) } app={this} popout={this.state.popout}/>\n\n\n\n\t\t\t  <OrderPanel id='OrderPanel' go={(e) => this.setState({ activePanel: \"main\"}) } app={this} popout={this.state.popout}/>\n\t\t\t  <Panel id=\"org_promo\">\n\n\t            <PanelHeader\n\t\t\t\tleft={<HeaderButton onClick={(e)=> this.setState({ activePanel: \"main\"}) } >\n\t\t\t\t\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t\t\t\t\t</HeaderButton>}\n\t\t\t    >Для организаторов\n                </PanelHeader>\n\t\t\t  \t<Group>\n\t\t\t  \t\t<Div>\n\t\t\t\t\t\tВы организатор СП?<br/>\n\t\t\t\t\t\tХотите собирать свои закупки быстрее? <br/>\n\t\t\t\t\t\tЗагружайте свои закупки к нам в сервис-получайте больше заказов!<br/>\n\t\t\t\t\t\tСтоимость загрузки 1 закупки 100 руб в месяц!<br/>\n\t\t\t\t\t\tДля получения доступа на сервис напишите <a href=\"https://vk.me/irinasysoeva_zakupiclub\" target=\"_blank\">Ирине Сысоевой</a><br/>\n\t\t\t\t\t</Div>\n\t\t\t  \t</Group>\n\t\t\t  </Panel>\n\n\t\t\t  <Panel id=\"main\">\n\t            <PanelHeader>\n\t\t\t    СП по России Zakupi.club</PanelHeader>\n\t\t\t\t  <Group>\n\t\t\t\t\t<Gallery\n\t\t\t\t\t  className=\"banner_gallery\"\n\t\t\t\t\t  //slideWidth=\"100%\"\n\t\t\t\t\t  //style={{ height: 160}}\n\t\t\t\t\t  //bullets=\"dark\"\n\t\t\t\t\t>\n\t\t\t\t\t  <div className=\"banner1\" onClick={()=>this.setState({ activePanel: 'CatalogPanelMain', activeStory: 'CatalogPanelMain' })} ></div>\n\t\t\t\t\t  <div className=\"banner2\" onClick={()=>this.setState({ activePanel: 'org_promo', activeStory: 'main' })}></div>\n\t\t\t\t\t</Gallery>\n\t\t\t\t\t<Group title=\"Горячие предложения\">\n\n                    {//console.log(\"datain_array.hot_items.\",this.state.hot_items_array)\n                    }\n\n                    <HorizontalScroll>\n                    <div style={{ display: 'flex' }}>\n\n\t\t\t\t\t\t\t{hot_items_array2}\n\n\t\t\t\t\t</div>\n\t\t\t\t\t</HorizontalScroll>\n\n\t\t\t\t\t</Group>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Button size=\"xl\" onClick={()=>this.setState({ activePanel: 'CatalogPanelMain', activeStory: 'CatalogPanelMain' })} >\n\t\t\t\t\t\t\tПерейти в каталог\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Div>\n\t\t\t\t  </Group>\n\n\t\t\t  </Panel>\n\t\t\t</View>\n\n\n\n\t\t\t<View id=\"off\" activePanel={this.state.activePanel} popout={this.state.popout}>\n\t\t\t\t<Panel id=\"off\">\n\t            <PanelHeader>Соединение internet</PanelHeader>\n\t            \t<Group>\n\t\t\t\t\t\t<Div align=\"center\">\"Помощник организаторам СП\"\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t<Div align=\"center\">Ooops... Пропало интернет соединение.<br/>\n\t\t\t\t\t\tКак только оно будет восстановлено, мы переместим Вас на главную страницу.\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</Group>\n\t\t\t\t</Panel>\n\t\t\t</View>\n\n\n\n\n\t\t\t<View id=\"LkPanel\"  modal={modal_add_zakupka}  activePanel={this.state.activePanel} popout={this.state.popout}>\n\t\t\t  <LkPanel id='LkPanel' go={(e) => this.setState({ activePanel: \"LkPanel\"}) } app={this} popout={this.state.popout}/>\n\t\t\t  <OrdersPanel id='OrdersPanel' go={(e) => this.setState({ activePanel: \"LkPanel\"}) } app={this} popout={this.state.popout}/>\n\n\t\t\t  <PurchasesPanel id='PurchasesPanel' go={(e) => this.setState({ activePanel: \"LkPanel\"}) } app={this} popout={this.state.popout}/>\n\t\t\t  <PurchaseEdit id='PurchaseEdit' go={(e) => this.setState({ activePanel: \"LkPanel\"}) } app={this} popout={this.state.popout}/>\n\t\t\t  <ItemPanel id='ItemPanelFromLkPanel' go={(e) => this.setState({ activePanel: \"LkPanel\"}) } app={this} popout={this.state.popout}/>\n\t\t\t  <AlbumEdit id='AlbumEdit' go={(e) => this.setState({ activePanel: \"LkPanel\"}) } app={this} popout={this.state.popout}/>\n\t\t\t  <Filterpanel id='FilterpanelAlbum' go={(e) => this.setState({ activePanel: \"LkPanel\"}) } app={this} popout={this.state.popout}/>\n\t\t\t  <OrderEditPanel id='OrderEditPanel' go={(e) => this.setState({ activePanel: \"LkPanel\"}) } app={this} popout={this.state.popout}/>\n\n\n\n\n\t\t\t</View>\n\n\n\n\n       </Epic>\n\t\t);\n\t}\n}\n\nexport default App;\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}